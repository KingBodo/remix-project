LavaPack.loadBundle([[6725,{"../../ducks/bridge-status/selectors":6638,"../../helpers/constants/routes":6669,"@metamask/transaction-controller":2773,"react-redux":5087,"react-router-dom":5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.FINAL_NON_CONFIRMED_STATUSES=void 0,n.useBridgeTxHistoryData=function({transactionGroup:e,isEarliestNonce:t}){var n;const r=(0,a.useHistory)(),u=(0,s.useSelector)(o.selectBridgeHistoryForAccount),c=e.initialTransaction,d=c.id,m=u[d],p=m?Boolean((null==m?void 0:m.status.srcChain.txHash)&&(null===(n=m.status.destChain)||void 0===n?void 0:n.txHash)):null,f=l.includes(c.status)?undefined:()=>{r.push({pathname:`${i.CROSS_CHAIN_SWAP_TX_DETAILS_ROUTE}/${d}`,state:{transactionGroup:e,isEarliestNonce:t}})};return{bridgeTxHistoryItem:m,isBridgeComplete:p,showBridgeTxDetails:f}};var s=e("react-redux"),r=e("@metamask/transaction-controller"),a=e("react-router-dom"),o=e("../../ducks/bridge-status/selectors"),i=e("../../helpers/constants/routes");const l=n.FINAL_NON_CONFIRMED_STATUSES=[r.TransactionStatus.failed,r.TransactionStatus.dropped,r.TransactionStatus.rejected]}}},{package:"$root$",file:"ui/hooks/bridge/useBridgeTxHistoryData.ts"}],[6726,{"../../../shared/constants/metametrics":5600,"../../../shared/modules/selectors/networks":5674,"../../contexts/metametrics":6627,"../../ducks/bridge/actions":6639,"../../helpers/constants/routes":6669,"../../helpers/utils/portfolio":6705,"../../selectors":7403,"./useCrossChainSwapsEventTracker":6728,"@metamask/bridge-controller":1411,"@metamask/utils":2822,"ethereumjs-util":4197,react:5129,"react-redux":5087,"react-router-dom":5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react"),r=e("react-redux"),a=e("react-router-dom"),o=e("ethereumjs-util"),i=e("@metamask/utils"),l=e("@metamask/bridge-controller"),u=e("../../ducks/bridge/actions"),c=e("../../selectors"),d=e("../../contexts/metametrics"),m=e("../../../shared/constants/metametrics"),p=e("../../helpers/constants/routes"),f=e("../../helpers/utils/portfolio"),h=e("../../../shared/modules/selectors/networks"),g=e("./useCrossChainSwapsEventTracker");n.default=()=>{const e=(0,r.useDispatch)(),t=(0,a.useHistory)(),n=(0,s.useContext)(d.MetaMetricsContext),y=(0,g.useCrossChainSwapsEventTracker)(),k=(0,r.useSelector)(c.getMetaMetricsId),T=(0,r.useSelector)(c.getParticipateInMetaMetrics),v=(0,r.useSelector)(c.getDataCollectionForMarketing),b=(0,r.useSelector)(h.getProviderConfig),S=(0,r.useSelector)(c.getUseExternalServices),C=(0,r.useSelector)(c.getIsBridgeEnabled),w=(0,r.useSelector)(c.getIsBridgeChain);(0,s.useEffect)((()=>{S&&e((0,u.setBridgeFeatureFlags)())}),[e,u.setBridgeFeatureFlags]);return{openBridgeExperience:(0,s.useCallback)(((e,s,r,a=!1)=>{if(w&&b)if(C){y({event:m.MetaMetricsEventName.ActionOpened,category:m.MetaMetricsEventCategory.Navigation,properties:{location:"Home"===e?m.MetaMetricsSwapsEventSource.MainView:m.MetaMetricsSwapsEventSource.TokenView,chain_id_source:(0,l.formatChainIdToCaip)(b.chainId),token_symbol_source:s.symbol,token_address_source:s.address}}),n({event:m.MetaMetricsEventName.BridgeLinkClicked,category:m.MetaMetricsEventCategory.Navigation,properties:{token_symbol:s.symbol,location:e,text:"Bridge",chain_id:b.chainId}});let r=`${p.CROSS_CHAIN_SWAP_ROUTE}${p.PREPARE_SWAP_ROUTE}`;r+=`?token=${(0,i.isStrictHexString)(s.address)?(0,o.toChecksumAddress)(s.address):s.address}`,a&&(r+="&swaps=true"),t.push(r)}else{const t=(0,f.getPortfolioUrl)("bridge","ext_bridge_button",k,T,v);global.platform.openTab({url:`${t}${r??`&token=${s.address}`}`}),n({category:m.MetaMetricsEventCategory.Navigation,event:m.MetaMetricsEventName.BridgeLinkClicked,properties:{location:e,text:"Bridge",url:t,chain_id:b.chainId,token_symbol:s.symbol}})}}),[C,w,e,t,k,n,y,T,v,b])}}}}},{package:"$root$",file:"ui/hooks/bridge/useBridging.ts"}],[6727,{"../../ducks/bridge/selectors":6641,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCountdownTimer=void 0;var s=e("react"),r=e("react-redux"),a=e("../../ducks/bridge/selectors");const o=1e3;n.useCountdownTimer=()=>{const{quotesLastFetchedMs:e}=(0,r.useSelector)(a.getBridgeQuotes),t=(0,r.useSelector)(a.getQuoteRefreshRate),[n,i]=(0,s.useState)(t);return(0,s.useEffect)((()=>{e&&i(t-(Date.now()-e)+o)}),[e]),(0,s.useEffect)((()=>{const e=setInterval((()=>{i(Math.max(0,n-o))}),o);return()=>clearInterval(e)}),[n]),n}}}},{package:"$root$",file:"ui/hooks/bridge/useCountdownTimer.ts"}],[6728,{"../../../shared/constants/metametrics":5600,"../../contexts/metametrics":6627,"./events/types":6717,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCrossChainSwapsEventTracker=void 0;var s=e("react"),r=e("../../contexts/metametrics"),a=e("../../../shared/constants/metametrics"),o=e("./events/types");n.useCrossChainSwapsEventTracker=()=>{const e=(0,s.useContext)(r.MetaMetricsContext);return(0,s.useCallback)((({event:t,category:n,properties:s})=>{e({category:n??a.MetaMetricsEventCategory.CrossChainSwaps,event:t,properties:{action_type:o.ActionType.CROSSCHAIN_V1,...s},value:"value"in s?s.value:undefined})}),[e])}}}},{package:"$root$",file:"ui/hooks/bridge/useCrossChainSwapsEventTracker.ts"}],[6729,{"../../ducks/bridge/selectors":6641,"../../pages/bridge/hooks/useIsMultichainSwap":6834,"../../selectors/multichain":7407,"../useMultichainSelector":6783,"./useLatestBalance":6730,"@metamask/bridge-controller":1411,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsTxSubmittable=void 0;var s,r=e("react-redux"),a=e("@metamask/bridge-controller"),o=e("react"),i=e("../../ducks/bridge/selectors"),l=e("../../selectors/multichain"),u=e("../useMultichainSelector"),c=e("../../pages/bridge/hooks/useIsMultichainSwap"),d=(s=e("./useLatestBalance"))&&s.__esModule?s:{default:s};n.useIsTxSubmittable=()=>{const e=(0,r.useSelector)(i.getFromToken),t=(0,r.useSelector)(i.getToToken),n=(0,u.useMultichainSelector)(l.getMultichainCurrentChainId),s=(0,r.useSelector)(i.getToChain),m=(0,r.useSelector)(i.getFromAmount),{activeQuote:p}=(0,r.useSelector)(i.getBridgeQuotes),f=(0,c.useIsMultichainSwap)(),{isInsufficientBalance:h,isInsufficientGasBalance:g,isInsufficientGasForQuote:y}=(0,r.useSelector)(i.getValidationErrors),k=(0,d.default)(e),T=(0,o.useMemo)((()=>(0,a.getNativeAssetForChainId)(n)),[n]),v=(0,d.default)(T);return Boolean(e&&t&&n&&(f||s)&&m&&p&&!h(k)&&!g(v)&&!y(v))}}}},{package:"$root$",file:"ui/hooks/bridge/useIsTxSubmittable.ts"}],[6730,{"../../../shared/constants/multichain/assets":5602,"../../../shared/lib/transactions-controller-utils":5650,"../../../shared/modules/Numeric":5652,"../../selectors":7403,"../../selectors/multichain":7407,"../useAsync":6759,"../useMultichainSelector":6783,"@metamask/bridge-controller":1411,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react"),r=e("@metamask/bridge-controller"),a=e("../../selectors"),o=e("../useAsync"),i=e("../../../shared/modules/Numeric"),l=e("../../../shared/lib/transactions-controller-utils"),u=e("../useMultichainSelector"),c=e("../../selectors/multichain"),d=e("../../../shared/constants/multichain/assets");n.default=e=>{const{address:t,id:n}=(0,u.useMultichainSelector)(a.getSelectedInternalAccount),m=(0,u.useMultichainSelector)(c.getMultichainCurrentChainId),p=(0,u.useMultichainSelector)(c.getMultichainBalances),f=null==p?void 0:p[n],h=(0,o.useAsyncResult)((async()=>{if(null==e||!e.chainId||!e)return undefined;const{chainId:n}=e;if((0,r.isSolanaChainId)(n)&&e.decimals){var s;const t=(0,r.isNativeAddress)(e.address)?d.MULTICHAIN_NATIVE_CURRENCY_TO_CAIP19.SOL:e.assetId??e.address;return i.Numeric.from((null==f||null===(s=f[t])||void 0===s?void 0:s.amount)??(null==e?void 0:e.string),10).shiftedBy(-1*e.decimals).toString()}var a;return e.address&&(0,r.formatChainIdToCaip)(m)===(0,r.formatChainIdToCaip)(n)?null===(a=await(0,r.calcLatestSrcBalance)(global.ethereumProvider,t,e.address,(0,r.formatChainIdToHex)(n)))||void 0===a?void 0:a.toString():undefined}),[m,e,t,f]);if(e&&!e.decimals)throw new Error(`Failed to calculate latest balance - ${e.symbol} token is missing "decimals" value`);return(0,s.useMemo)((()=>null!=h&&h.value?(0,l.calcTokenAmount)(h.value,null==e?void 0:e.decimals):undefined),[null==h?void 0:h.value,null==e?void 0:e.decimals])}}}},{package:"$root$",file:"ui/hooks/bridge/useLatestBalance.ts"}],[6731,{"../../../shared/constants/metametrics":5600,"../../ducks/bridge/selectors":6641,"./events/useConvertedUsdAmounts":6718,"./events/useQuoteProperties":6719,"./events/useRequestMetadataProperties":6720,"./events/useRequestProperties":6721,"./events/useTradeProperties":6722,"./useCrossChainSwapsEventTracker":6728,"./useLatestBalance":6730,"@metamask/bridge-controller":1411,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useQuoteFetchEvents=void 0;var s,r=e("react"),a=e("react-redux"),o=e("@metamask/bridge-controller"),i=e("../../../shared/constants/metametrics"),l=e("../../ducks/bridge/selectors"),u=e("./useCrossChainSwapsEventTracker"),c=(s=e("./useLatestBalance"))&&s.__esModule?s:{default:s},d=e("./events/useRequestMetadataProperties"),m=e("./events/useRequestProperties"),p=e("./events/useTradeProperties"),f=e("./events/useConvertedUsdAmounts"),h=e("./events/useQuoteProperties");n.useQuoteFetchEvents=()=>{const e=(0,u.useCrossChainSwapsEventTracker)(),{isLoading:t,quotesRefreshCount:n,quoteFetchError:s,quotesInitialLoadTimeMs:g}=(0,a.useSelector)(l.getBridgeQuotes),{insufficientBal:y,srcTokenAddress:k}=(0,a.useSelector)(l.getQuoteRequest),T=(0,a.useSelector)(l.getFromAmount),v=(0,a.useSelector)(l.getValidationErrors),{quoteRequestProperties:b}=(0,m.useRequestProperties)(),S=(0,d.useRequestMetadataProperties)(),{usd_amount_source:C}=(0,f.useConvertedUsdAmounts)(),w=!y,E=(0,h.useQuoteProperties)(),x=(0,p.useTradeProperties)(),I=(0,a.useSelector)(l.getFromToken),A=(0,a.useSelector)(l.getFromChain),_=(0,c.default)(I),M=(0,r.useMemo)((()=>null!=A&&A.chainId?(0,o.getNativeAssetForChainId)(A.chainId):null),[null==A?void 0:A.chainId]),P=(0,c.default)(M),D=(0,r.useMemo)((()=>{const{isEstimatedReturnLow:e,isNoQuotesAvailable:t,isInsufficientGasBalance:n,isInsufficientGasForQuote:s,isInsufficientBalance:r}=v,a=[];return e&&a.push("low_return"),t&&a.push("no_quotes"),n(P)&&a.push("insufficient_gas_balance"),s(P)&&a.push("insufficient_gas_for_selected_quote"),r(_)&&a.push("insufficient_balance"),a}),[v]);(0,r.useEffect)((()=>{const s=t&&0===n&&g===undefined;b&&T&&k&&s&&e({event:i.MetaMetricsEventName.CrossChainSwapsQuotesRequested,properties:{...b,...S,has_sufficient_funds:w,usd_amount_source:C}})}),[t,g]),(0,r.useEffect)((()=>{b&&T&&k&&s&&e({event:i.MetaMetricsEventName.CrossChainSwapsQuoteError,properties:{...b,...S,has_sufficient_funds:w,usd_amount_source:C,error_message:s}})}),[s]),(0,r.useEffect)((()=>{T&&k&&!t&&n>=0&&E.initial_load_time_all_quotes>0&&b&&!s&&x&&e({event:i.MetaMetricsEventName.CrossChainSwapsQuotesReceived,properties:{...b,...S,...E,...x,refresh_count:n-1,warnings:D}})}),[n])}}}},{package:"$root$",file:"ui/hooks/bridge/useQuoteFetchEvents.ts"}],[6732,{"../../../shared/modules/bridge-utils/security-alerts-api.util":5653,"../../ducks/bridge/selectors":6641,"../useAsync":6759,"@metamask/bridge-controller":1411,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenAlerts=n.default=void 0;var s=e("react-redux"),r=e("@metamask/bridge-controller"),a=e("../../ducks/bridge/selectors"),o=e("../../../shared/modules/bridge-utils/security-alerts-api.util"),i=e("../useAsync");const l=()=>{const e=(0,s.useSelector)(a.getFromToken),t=(0,s.useSelector)(a.getFromChain),n=(0,s.useSelector)(a.getToToken),l=(0,s.useSelector)(a.getToChain),{value:u}=(0,i.useAsyncResult)((async()=>{if(e&&t&&n&&l){const e=(0,o.convertChainIdToBlockAidChainName)(null==l?void 0:l.chainId);if(e)return await(0,o.fetchTokenAlert)(e,(0,r.formatAddressToCaipReference)(n.address))}return null}),[n,l]);return{tokenAlert:u}};n.useTokenAlerts=l;n.default=l}}},{package:"$root$",file:"ui/hooks/bridge/useTokenAlerts.ts"}],[6733,{"../../../shared/constants/bridge":5590,"../../../shared/constants/multichain/networks":5603,"../../../shared/constants/network":5604,"../../../shared/constants/time":5617,"../../../shared/constants/transaction":5619,"../../../shared/lib/asset-utils":5628,"../../../shared/lib/fetch-with-cache":5634,"../../ducks/bridge/selectors":6641,"../../pages/swaps/swaps.util":7385,"../../selectors":7403,"../useAsync":6759,"../useMultichainBalances":6782,"@metamask/bridge-controller":1411,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokensWithFiltering=void 0;var s,r=e("react"),a=e("react-redux"),o=e("@metamask/bridge-controller"),i=e("../../selectors"),l=e("../../../shared/constants/transaction"),u=e("../../../shared/constants/network"),c=e("../useMultichainBalances"),d=e("../useAsync"),m=e("../../pages/swaps/swaps.util"),p=e("../../../shared/constants/time"),f=e("../../ducks/bridge/selectors"),h=(s=e("../../../shared/lib/fetch-with-cache"))&&s.__esModule?s:{default:s},g=e("../../../shared/constants/bridge"),y=e("../../../shared/lib/asset-utils"),k=e("../../../shared/constants/multichain/networks");n.useTokensWithFiltering=(e,t,n)=>{const s=(0,a.useSelector)((t=>(0,f.getTopAssetsFromFeatureFlags)(t,e))),{assetsWithBalance:T}=(0,c.useMultichainBalances)(n),v=(0,a.useSelector)(i.selectERC20TokensByChain),{value:b,pending:S}=(0,d.useAsyncResult)((async()=>{if(e){if(!(0,o.isSolanaChainId)(e)){var t;const s=(0,o.formatChainIdToHex)(e),r=null===(t=v[s])||void 0===t?void 0:t.timestamp;var n;if(r&&Date.now()-r<=10*p.MINUTE)return null===(n=v[s])||void 0===n?void 0:n.data}return await(0,o.fetchBridgeTokens)(e,o.BridgeClientId.EXTENSION,(async(e,t)=>{const{headers:n,...s}=t??{};return await(0,h.default)({url:e,...s,fetchOptions:{method:"GET",headers:n},functionName:"fetchBridgeTokens"})}),g.BRIDGE_API_BASE_URL)}return{}}),[e,v]),{value:C,pending:w}=(0,d.useAsyncResult)((async()=>e?s?s.map((e=>({address:e}))):await(0,m.fetchTopAssetsList)(e):[]),[e,s]),E=(0,r.useCallback)((t=>{if(!e||!t)return undefined;const n={...t,chainId:(0,o.isSolanaChainId)(e)?(0,o.formatChainIdToCaip)(e):(0,o.formatChainIdToHex)(e),assetId:t.assetId};return(0,o.isNativeAddress)(t.address)?{...n,type:l.AssetType.native,address:"",image:u.CHAIN_ID_TOKEN_IMAGE_MAP[n.chainId]??(t.iconUrl||t.icon||""),balance:"0",string:"0"}:{...n,type:l.AssetType.token,image:t.iconUrl??t.icon??"",balance:"",string:undefined}}),[e]);return{filteredTokenListGenerator:(0,r.useCallback)((n=>function*(){const s=(e,s,r)=>n(e,s,r)&&(!t||!r||!(t.symbol===e&&t.address===s&&t.chainId===(0,o.formatChainIdToCaip)(r)));if(e&&C&&b&&0!==Object.keys(b).length){for(const e of T){var r,a,i;if(s(e.symbol,e.address??undefined,e.chainId))if((0,o.isNativeAddress)(e.address)||e.isNative)yield{symbol:e.symbol,chainId:e.chainId,tokenFiatAmount:e.tokenFiatAmount,decimals:e.decimals,address:"",type:l.AssetType.native,balance:e.balance??"0",string:e.string??undefined,image:u.CHAIN_ID_TOKEN_IMAGE_MAP[e.chainId]??k.MULTICHAIN_TOKEN_IMAGE_MAP[e.chainId]??((null===(r=(0,o.getNativeAssetForChainId)(e.chainId))||void 0===r?void 0:r.icon)||(null===(a=(0,o.getNativeAssetForChainId)(e.chainId))||void 0===a?void 0:a.iconUrl)||(0,y.getAssetImageUrl)(e.address,(0,o.formatChainIdToCaip)(e.chainId)))};else yield{symbol:e.symbol,chainId:e.chainId,tokenFiatAmount:e.tokenFiatAmount,decimals:e.decimals,address:e.address,type:l.AssetType.token,balance:e.balance??"",string:e.string??undefined,image:(e.image||(null==b||null===(i=b[e.address.toLowerCase()])||void 0===i?void 0:i.iconUrl))??(0,y.getAssetImageUrl)(e.address,(0,o.formatChainIdToCaip)(e.chainId))??""}}for(const t of C){const n=null==b?void 0:b[t.address],r=E(n);r&&s(r.symbol,r.address??undefined,e)&&r&&(yield r)}for(const t of Object.values(b)){const n=E(t);n&&!n.symbol.includes("$")&&s(n.symbol,n.address??undefined,e)&&n&&(yield n)}}}()),[E,T,C,e,b,t]),isLoading:S||w}}}}},{package:"$root$",file:"ui/hooks/bridge/useTokensWithFiltering.ts"}],[6734,{"./useAccountSyncing":6735},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"useAccountSyncing",{enumerable:!0,get:function(){return s.useAccountSyncing}}),Object.defineProperty(n,"useDeleteAccountSyncingDataFromUserStorage",{enumerable:!0,get:function(){return s.useDeleteAccountSyncingDataFromUserStorage}}),Object.defineProperty(n,"useShouldDispatchAccountSyncing",{enumerable:!0,get:function(){return s.useShouldDispatchAccountSyncing}});var s=e("./useAccountSyncing")}}},{package:"$root$",file:"ui/hooks/identity/useAccountSyncing/index.ts"}],[6735,{"../../../ducks/metamask/metamask":6651,"../../../selectors":7403,"../../../selectors/identity/authentication":7401,"../../../selectors/identity/profile-syncing":7402,"../../../store/actions":7421,loglevel:4733,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShouldDispatchAccountSyncing=n.useDeleteAccountSyncingDataFromUserStorage=n.useAccountSyncing=void 0;var s,r=(s=e("loglevel"))&&s.__esModule?s:{default:s},a=e("react"),o=e("react-redux"),i=e("../../../store/actions"),l=e("../../../selectors/identity/profile-syncing"),u=e("../../../selectors"),c=e("../../../ducks/metamask/metamask"),d=e("../../../selectors/identity/authentication");const m=()=>{const e=(0,o.useSelector)(l.selectIsAccountSyncingReadyToBeDispatched),t=(0,o.useSelector)(l.selectIsProfileSyncingEnabled),n=(0,o.useSelector)(u.getUseExternalServices),s=(0,o.useSelector)(c.getIsUnlocked),r=(0,o.useSelector)(d.selectIsSignedIn),a=(0,o.useSelector)(c.getCompletedOnboarding);return Boolean(n&&t&&s&&r&&a&&e)};n.useShouldDispatchAccountSyncing=m;n.useAccountSyncing=()=>{const e=(0,o.useDispatch)(),t=m(),n=(0,a.useCallback)((()=>{try{if(!t)return;e((0,i.syncInternalAccountsWithUserStorage)())}catch(e){r.default.error(e)}}),[e,t]);return{dispatchAccountSyncing:n,shouldDispatchAccountSyncing:t}};n.useDeleteAccountSyncingDataFromUserStorage=()=>{const e=(0,o.useDispatch)();return{dispatchDeleteAccountSyncingData:(0,a.useCallback)((async()=>{try{await e((0,i.deleteAccountSyncingDataFromUserStorage)())}catch{}}),[])}}}}},{package:"$root$",file:"ui/hooks/identity/useAccountSyncing/useAccountSyncing.ts"}],[6736,{"./useAutoSignIn":6737,"./useAutoSignOut":6738,"./useSignIn":6739,"./useSignOut":6740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"useAutoSignIn",{enumerable:!0,get:function(){return a.useAutoSignIn}}),Object.defineProperty(n,"useAutoSignOut",{enumerable:!0,get:function(){return o.useAutoSignOut}}),Object.defineProperty(n,"useSignIn",{enumerable:!0,get:function(){return s.useSignIn}}),Object.defineProperty(n,"useSignOut",{enumerable:!0,get:function(){return r.useSignOut}});var s=e("./useSignIn"),r=e("./useSignOut"),a=e("./useAutoSignIn"),o=e("./useAutoSignOut")}}},{package:"$root$",file:"ui/hooks/identity/useAuthentication/index.ts"}],[6737,{"../../../ducks/metamask/metamask":6651,"../../../selectors":7403,"../../../selectors/identity/authentication":7401,"../../../selectors/identity/profile-syncing":7402,"../../../selectors/metamask-notifications/metamask-notifications":7404,"./useSignIn":6739,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAutoSignIn=function(){const{signIn:e}=(0,c.useSignIn)(),t=Boolean((0,r.useSelector)(a.getIsUnlocked)),n=Boolean((0,r.useSelector)(o.getUseExternalServices)),d=Boolean((0,r.useSelector)(a.getCompletedOnboarding)),m=(0,r.useSelector)(i.selectIsSignedIn),p=(0,s.useMemo)((()=>!m&&t&&n&&d),[m,t,n,d]),f=(0,r.useSelector)(l.selectIsProfileSyncingEnabled),h=(0,r.useSelector)(o.getParticipateInMetaMetrics),g=(0,r.useSelector)(u.selectIsMetamaskNotificationsEnabled),y=(0,s.useMemo)((()=>f||h||g),[f,h,g]),k=(0,s.useMemo)((()=>p&&y),[p,y]);return{autoSignIn:(0,s.useCallback)((async()=>{k&&await e()}),[k,e]),shouldAutoSignIn:k}};var s=e("react"),r=e("react-redux"),a=e("../../../ducks/metamask/metamask"),o=e("../../../selectors"),i=e("../../../selectors/identity/authentication"),l=e("../../../selectors/identity/profile-syncing"),u=e("../../../selectors/metamask-notifications/metamask-notifications"),c=e("./useSignIn")}}},{package:"$root$",file:"ui/hooks/identity/useAuthentication/useAutoSignIn.ts"}],[6738,{"../../../ducks/metamask/metamask":6651,"../../../selectors":7403,"../../../selectors/identity/authentication":7401,"./useSignOut":6740,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAutoSignOut=function(){const{signOut:e}=(0,l.useSignOut)(),t=Boolean((0,r.useSelector)(a.getIsUnlocked)),n=Boolean((0,r.useSelector)(o.getUseExternalServices)),u=(0,r.useSelector)(i.selectIsSignedIn),c=(0,s.useMemo)((()=>u&&t&&!n),[u,t,n]),d=(0,s.useMemo)((()=>c),[c]);return{autoSignOut:(0,s.useCallback)((async()=>{d&&await e()}),[d,e]),shouldAutoSignOut:d}};var s=e("react"),r=e("react-redux"),a=e("../../../ducks/metamask/metamask"),o=e("../../../selectors"),i=e("../../../selectors/identity/authentication"),l=e("./useSignOut")}}},{package:"$root$",file:"ui/hooks/identity/useAuthentication/useAutoSignOut.ts"}],[6739,{"../../../selectors/identity/authentication":7401,"../../../store/actions":7421,loglevel:4733,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSignIn=function(){const e=(0,a.useDispatch)(),t=(0,a.useSelector)(i.selectIsSignedIn),n=(0,r.useMemo)((()=>!t),[t]);return{signIn:(0,r.useCallback)((async()=>{if(n)try{await e((0,l.performSignIn)())}catch(e){const t=e instanceof Error?e.message:JSON.stringify(e??"");o.default.error(t)}}),[e,n])}};var s,r=e("react"),a=e("react-redux"),o=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("../../../selectors/identity/authentication"),l=e("../../../store/actions")}}},{package:"$root$",file:"ui/hooks/identity/useAuthentication/useSignIn.ts"}],[6740,{"../../../selectors/identity/authentication":7401,"../../../store/actions":7421,loglevel:4733,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSignOut=function(){const e=(0,a.useDispatch)(),t=(0,a.useSelector)(i.selectIsSignedIn),n=(0,r.useMemo)((()=>Boolean(t)),[t]);return{signOut:(0,r.useCallback)((async()=>{if(n)try{await e((0,l.performSignOut)())}catch(e){const t=e instanceof Error?e.message:JSON.stringify(e??"");o.default.error(t)}}),[e,n])}};var s,r=e("react"),a=e("react-redux"),o=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("../../../selectors/identity/authentication"),l=e("../../../store/actions")}}},{package:"$root$",file:"ui/hooks/identity/useAuthentication/useSignOut.ts"}],[6741,{"./useProfileSyncing":6742},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"useDisableProfileSyncing",{enumerable:!0,get:function(){return s.useDisableProfileSyncing}}),Object.defineProperty(n,"useEnableProfileSyncing",{enumerable:!0,get:function(){return s.useEnableProfileSyncing}});var s=e("./useProfileSyncing")}}},{package:"$root$",file:"ui/hooks/identity/useProfileSyncing/index.ts"}],[6742,{"../../../store/actions":7421,loglevel:4733,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDisableProfileSyncing=function(){const e=(0,a.useDispatch)(),[t,n]=(0,r.useState)(null);return{disableProfileSyncing:(0,r.useCallback)((async()=>{n(null);try{await e((0,i.disableProfileSyncing)())}catch(e){const t=e instanceof Error?e.message:JSON.stringify(e??"");n(t),o.default.error(t)}finally{e((0,i.hideLoadingIndication)())}}),[e]),error:t}},n.useEnableProfileSyncing=function(){const e=(0,a.useDispatch)(),[t,n]=(0,r.useState)(null);return{enableProfileSyncing:(0,r.useCallback)((async()=>{n(null);try{await e((0,i.enableProfileSyncing)())}catch(e){const t=e instanceof Error?e.message:JSON.stringify(e??"");o.default.error(t),n(t)}}),[e]),error:t}};var s,r=e("react"),a=e("react-redux"),o=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("../../../store/actions")}}},{package:"$root$",file:"ui/hooks/identity/useProfileSyncing/useProfileSyncing.ts"}],[6743,{"../../selectors/metamask-notifications/metamask-notifications":7404,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useReadNotificationsCounter=function(){const{readSnapNotificationsCount:e}=a(),{featureAnnouncementsReadCount:t}=o(),{onChainMetamaskNotificationsReadCount:n}=i();return{notificationsReadCount:e+t+n}},n.useUnreadNotificationsCounter=function(){const{unreadSnapNotificationsCount:e}=a(),{featureAnnouncementsUnreadCount:t}=o(),{onChainMetamaskNotificationsUnreadCount:n}=i();return{notificationsUnreadCount:e+t+n}};var s=e("react-redux"),r=e("../../selectors/metamask-notifications/metamask-notifications");const a=()=>({unreadSnapNotificationsCount:(0,s.useSelector)(r.getSnapNotificationsUnreadCount),readSnapNotificationsCount:(0,s.useSelector)(r.getSnapNotificationsReadCount)}),o=()=>{const e=(0,s.useSelector)(r.selectIsFeatureAnnouncementsEnabled),t=(0,s.useSelector)(r.getFeatureAnnouncementsUnreadCount),n=(0,s.useSelector)(r.getFeatureAnnouncementsReadCount);return e?{featureAnnouncementsUnreadCount:t,featureAnnouncementsReadCount:n}:{featureAnnouncementsUnreadCount:0,featureAnnouncementsReadCount:0}},i=()=>{const e=(0,s.useSelector)(r.selectIsMetamaskNotificationsEnabled),t=(0,s.useSelector)(r.getOnChainMetamaskNotificationsUnreadCount),n=(0,s.useSelector)(r.getOnChainMetamaskNotificationsReadCount);return e?{onChainMetamaskNotificationsUnreadCount:t,onChainMetamaskNotificationsReadCount:n}:{onChainMetamaskNotificationsUnreadCount:0,onChainMetamaskNotificationsReadCount:0}}}}},{package:"$root$",file:"ui/hooks/metamask-notifications/useCounter.tsx"}],[6744,{"../../store/actions":7421,loglevel:4733,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCreateNotifications=function(){const e=(0,a.useDispatch)(),[t,n]=(0,r.useState)(null);return{createNotifications:(0,r.useCallback)((async()=>{n(null);try{await e((0,i.createOnChainTriggers)())}catch(e){throw n(e instanceof Error?e.message:"An unexpected error occurred"),o.default.error(e),e}}),[e]),error:t}},n.useDisableNotifications=function(){const e=(0,a.useDispatch)(),[t,n]=(0,r.useState)(null);return{disableNotifications:(0,r.useCallback)((async()=>{n(null);try{await e((0,i.disableMetamaskNotifications)())}catch(e){throw n(e instanceof Error?e.message:"An unexpected error occurred"),o.default.error(e),e}}),[e]),error:t}},n.useEnableNotifications=function(){const e=(0,a.useDispatch)(),[t,n]=(0,r.useState)(null);return{enableNotifications:(0,r.useCallback)((async()=>{n(null);try{await e((0,i.enableMetamaskNotifications)())}catch(e){throw n(e instanceof Error?e.message:"An unexpected error occurred"),o.default.error(e),e}}),[e]),error:t}},n.useListNotifications=function(){const e=(0,a.useDispatch)(),[t,n]=(0,r.useState)(!1),[s,l]=(0,r.useState)(null),[u,c]=(0,r.useState)(undefined);return{listNotifications:(0,r.useCallback)((async()=>{n(!0),l(null);const t=new URLSearchParams(window.location.search).get("previewToken");try{const n=await e((0,i.fetchAndUpdateMetamaskNotifications)(t??undefined));return c(n),n}catch(e){throw o.default.error(e),l(e instanceof Error?e.message:"An unexpected error occurred"),e}finally{n(!1)}}),[e]),notificationsData:u,isLoading:t,error:s}},n.useMarkNotificationAsRead=function(){const e=(0,a.useDispatch)();return{markNotificationAsRead:(0,r.useCallback)((async t=>{try{e((0,i.markMetamaskNotificationsAsRead)(t))}catch(e){throw o.default.error(e),e}}),[e])}};var s,r=e("react"),a=e("react-redux"),o=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("../../store/actions")}}},{package:"$root$",file:"ui/hooks/metamask-notifications/useNotifications.ts"}],[6745,{"../../selectors/metamask-notifications/metamask-notifications":7404,"../../store/actions":7421,loglevel:4733,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAccountSettingsProps=function(e){const t=(0,a.useSelector)(l.getIsUpdatingMetamaskNotificationsAccount),n=(0,a.useSelector)(l.selectIsMetamaskNotificationsEnabled),s=function(){const e=(0,a.useDispatch)(),t=(0,r.useCallback)((async t=>{try{return await e((0,i.checkAccountsPresence)(t))}catch{return{}}}),[]);return t}(),[o,u]=(0,r.useState)({}),[c,d]=(0,r.useState)(!1),[m,p]=(0,r.useState)(null),f=(0,r.useMemo)((()=>JSON.stringify(e)),[e]),h=(0,r.useCallback)((async e=>{try{d(!0),p(null);const t=await s(e);u(t)}catch{p("Failed to get account settings")}finally{d(!1)}}),[]);return(0,r.useEffect)((()=>{if(!n)return;const e=JSON.parse(f);h(e)}),[f,s,n]),{data:o,initialLoading:c,error:m,accountsBeingUpdated:t,update:h}},n.useSwitchAccountNotificationsChange=function(){const e=(0,a.useDispatch)(),[t,n]=(0,r.useState)(null);return{onChange:(0,r.useCallback)((async(t,s)=>{n(null);try{s?await e((0,i.updateOnChainTriggersByAccount)(t)):await e((0,i.deleteOnChainTriggersByAccount)(t))}catch(e){const t=e instanceof Error?e.message:JSON.stringify(e??"");o.default.error(t),n(t)}e((0,i.hideLoadingIndication)())}),[e]),error:t}},n.useSwitchFeatureAnnouncementsChange=function(){const e=(0,a.useDispatch)(),[t,n]=(0,r.useState)(null);return{onChange:(0,r.useCallback)((async t=>{n(null);try{await e((0,i.setFeatureAnnouncementsEnabled)(t))}catch(e){const t=e instanceof Error?e.message:JSON.stringify(e??"");n(t)}}),[e]),error:t}};var s,r=e("react"),a=e("react-redux"),o=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("../../store/actions"),l=e("../../selectors/metamask-notifications/metamask-notifications")}}},{package:"$root$",file:"ui/hooks/metamask-notifications/useSwitchNotifications.ts"}],[6746,{"../../selectors":7403,"../../selectors/accounts":7394,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useHdKeyringsWithSnapAccounts=void 0;var s=e("react"),r=e("react-redux"),a=e("../../selectors/accounts"),o=e("../../selectors");n.useHdKeyringsWithSnapAccounts=()=>{const e=(0,r.useSelector)(o.getMetaMaskHdKeyrings),t=(0,r.useSelector)(a.getInternalAccounts);return(0,s.useMemo)((()=>e.map((e=>{const n=t.filter((t=>{var n;return(null===(n=t.options)||void 0===n?void 0:n.entropySource)===e.metadata.id})).map((e=>e.address));return{...e,accounts:[...e.accounts,...n]}}))),[e,t])}}}},{package:"$root$",file:"ui/hooks/multi-srp/useHdKeyringsWithSnapAccounts.ts"}],[6747,{"../../../../shared/modules/selectors/networks":5674,"../../../selectors":7403,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.RampsMetaMaskEntry=void 0;var s=e("react"),r=e("react-redux"),a=e("../../../../shared/modules/selectors/networks"),o=e("../../../selectors");let i=n.RampsMetaMaskEntry=function(e){return e.BuySellButton="ext_buy_sell_button",e.NftBanner="ext_buy_banner_nfts",e.TokensBanner="ext_buy_banner_tokens",e.ActivityBanner="ext_buy_banner_activity",e.BtcBanner="ext_buy_banner_btc",e}({});n.default=(e=i.BuySellButton)=>{const t=(0,r.useSelector)(a.getCurrentChainId),n=(0,r.useSelector)(o.getMetaMetricsId),l=(0,r.useSelector)(o.getParticipateInMetaMetrics),u=(0,r.useSelector)(o.getDataCollectionForMarketing),c=(0,s.useCallback)((t=>{try{const s=new URLSearchParams;s.set("metamaskEntry",e),s.set("chainId",t),n&&s.set("metametricsId",n),s.set("metricsEnabled",String(l)),u&&s.set("marketingEnabled",String(u));const r=new URL("https://portfolio.metamask.io");return r.pathname="buy",r.search=s.toString(),r.toString()}catch{return"https://portfolio.metamask.io/buy"}}),[n]);return{openBuyCryptoInPdapp:(0,s.useCallback)((e=>{const n=c(e||t);global.platform.openTab({url:n})}),[t]),getBuyURI:c}}}}},{package:"$root$",file:"ui/hooks/ramps/useRamps/useRamps.ts"}],[6748,{"../../../shared/modules/conversion.utils":5657,"../../../shared/modules/hexstring-utils":5663,"../../selectors/snaps":7418,"@metamask/utils":2822,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDisplayName=void 0;var s=e("@metamask/utils"),r=e("react-redux"),a=e("../../selectors/snaps"),o=e("../../../shared/modules/hexstring-utils"),i=e("../../../shared/modules/conversion.utils");n.useDisplayName=e=>{const{address:t,chain:{namespace:n,reference:l}}=e,u=n===s.KnownCaipNamespace.Eip155,c=u?(0,o.toChecksumHexAddress)(t):t,d=(0,r.useSelector)((e=>(0,a.getMemoizedAccountName)(e,c))),m=(0,r.useSelector)((e=>(0,a.getAddressBookEntryByNetwork)(e,c,`0x${(0,i.decimalToHex)(u?l:"0")}`)));return d||u&&(null==m?void 0:m.name)||undefined}}}},{package:"$root$",file:"ui/hooks/snaps/useDisplayName.ts"}],[6749,{"../../selectors":7403,"@metamask/snaps-sdk":2607,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useInsightSnaps=function(e){const t=(0,s.useSelector)((t=>(0,a.getSnapInsights)(t,e))),n=t?Object.values(t):[],o=n.filter((e=>e.severity===r.SeverityLevel.Critical));return{data:n,warnings:o}};var s=e("react-redux"),r=e("@metamask/snaps-sdk"),a=e("../../selectors")}}},{package:"$root$",file:"ui/hooks/snaps/useInsightSnaps.js"}],[6750,{react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react");n.default=()=>{const e=(0,s.useRef)(null),[t,n]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{n(e.current&&e.current.offsetHeight<e.current.scrollHeight)}),[e]),{contentRef:e,isOverflowing:t}}}}},{package:"$root$",file:"ui/hooks/snaps/useIsOverflowing.js"}],[6751,{"../../store/actions":7421,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSafeWebsite=void 0;var s=e("react"),r=e("../../store/actions");n.useSafeWebsite=e=>{const[t,n]=(0,s.useState)();return(0,s.useEffect)((()=>{e&&(async()=>{(await(0,r.getPhishingResult)(e)).result||n(new URL(e))})()}),[e]),t}}}},{package:"$root$",file:"ui/hooks/snaps/useSafeWebsite.ts"}],[6752,{"../../helpers/utils/util":6712,"@metamask/snaps-utils":2718,"react-router-dom":5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react-router-dom"),r=e("@metamask/snaps-utils"),a=e("../../helpers/utils/util");n.default=()=>{const e=(0,s.useHistory)();return{navigate:t=>{let n;const s=(0,r.parseMetaMaskUrl)(t);n=s.snapId?(0,a.getSnapRoute)(s.snapId):s.path,e.push(n)}}}}}},{package:"$root$",file:"ui/hooks/snaps/useSnapNavigation.ts"}],[6753,{"../../store/actions":7421,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSnapSettings=function({snapId:e}){const t=(0,r.useDispatch)(),[n,o]=(0,s.useState)(!0),[i,l]=(0,s.useState)(undefined),[u,c]=(0,s.useState)(undefined);return(0,s.useEffect)((()=>{let n=!1;return e&&async function(e){try{c(undefined),o(!0);const s=await(0,a.handleSnapRequest)({snapId:e,origin:"metamask",handler:"onSettingsPage",request:{jsonrpc:"2.0",method:" "}});n||(l(s),(0,a.forceUpdateMetamaskState)(t))}catch(e){n||c(e)}finally{n||o(!1)}}(e),()=>{n=!0}}),[e]),{data:i,error:u,loading:n}};var s=e("react"),r=e("react-redux"),a=e("../../store/actions")}}},{package:"$root$",file:"ui/hooks/snaps/useSnapSettings.ts"}],[6754,{"../../../shared/constants/swaps":5615,"../../../shared/modules/selectors/networks":5674,"../../ducks/swaps/swaps":6659,lodash:4725,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react"),r=e("react-redux"),a=e("lodash"),o=e("../../../shared/modules/selectors/networks"),i=e("../../../shared/constants/swaps"),l=e("../../ducks/swaps/swaps");n.default=function(){const e=(0,r.useSelector)(o.getCurrentChainId),t=(0,r.useSelector)(l.getFromToken,a.isEqual),n=(0,s.useMemo)((()=>{if(!t)return null;const n=i.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e]??null;return n?n.address===(null==t?void 0:t.address)?i.SWAPS_CHAINID_COMMON_TOKEN_PAIR[e]??null:n:null}),[e,null==t?void 0:t.address]);return n||console.warn(`No Swap default token found for chainId: ${e}`),{defaultToToken:n}}}}},{package:"$root$",file:"ui/hooks/swap/useSwapDefaultToToken.ts"}],[6755,{"../../shared/modules/conversion.utils":5657,"../../shared/modules/selectors/networks":5674,"../ducks/metamask/metamask":6651,"../helpers/utils/token-util":6709,"../selectors":7403,"ethereumjs-util":4197,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAccountTotalCrossChainFiatBalance=void 0;var s=e("react-redux"),r=e("ethereumjs-util"),a=e("react"),o=e("../ducks/metamask/metamask"),i=e("../selectors"),l=e("../../shared/modules/conversion.utils"),u=e("../helpers/utils/token-util"),c=e("../../shared/modules/selectors/networks");n.useAccountTotalCrossChainFiatBalance=(e,t)=>{const n=(0,s.useSelector)(c.getNetworkConfigurationsByChainId),d=(0,s.useSelector)(o.getCurrencyRates),m=(0,s.useSelector)(o.getCurrentCurrency),p=(0,s.useSelector)(i.getCrossChainTokenExchangeRates,s.shallowEqual),f=(0,s.useSelector)(i.getCrossChainMetaMaskCachedBalances),h=(0,a.useMemo)((()=>({...p})),[p]),g=(0,a.useMemo)((()=>t.map((t=>{var s,a;const{tokensWithBalances:o}=t,i=n[t.chainId].nativeCurrency,c=null==d||null===(s=d[i])||void 0===s?void 0:s.conversionRate,p=o.map((e=>{var n;const s=null==h||null===(n=h[t.chainId])||void 0===n?void 0:n[(0,r.toChecksumAddress)(e.address)];return(0,u.getTokenFiatAmount)(s,c,m,e.string,e.symbol,!1,!1)})),g=(null==f||null===(a=f[t.chainId])||void 0===a?void 0:a[null==e?void 0:e.address])??0,y=(0,l.getValueFromWeiHex)({value:g,toCurrency:m,conversionRate:c,numberOfDecimals:2});return{...t,tokenFiatBalances:p,nativeFiatValue:y}}))),[t,n,d,h,f,null==e?void 0:e.address,m]);return{totalFiatBalance:(0,a.useMemo)((()=>g.reduce(((e,t)=>{const n=t.tokenFiatBalances.filter((e=>e!==undefined)),s=(0,l.sumDecimals)(t.nativeFiatValue,...n);return e+(s.toNumber?s.toNumber():Number(s))}),0)),[g]).toString(10),tokenFiatBalancesCrossChains:g}}}}},{package:"$root$",file:"ui/hooks/useAccountTotalCrossChainFiatBalance.ts"}],[6756,{"../../shared/modules/conversion.utils":5657,"../../shared/modules/selectors/networks":5674,"../ducks/metamask/metamask":6651,"../helpers/utils/confirm-tx.util":6690,"../helpers/utils/token-util":6709,"../helpers/utils/util":6712,"../selectors":7403,"./useTokenBalances":6799,"ethereumjs-util":4197,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAccountTotalFiatBalance=void 0;var s=e("react-redux"),r=e("ethereumjs-util"),a=e("react"),o=e("../../shared/modules/selectors/networks"),i=e("../selectors"),l=e("../../shared/modules/conversion.utils"),u=e("../ducks/metamask/metamask"),c=e("../helpers/utils/confirm-tx.util"),d=e("../helpers/utils/token-util"),m=e("../helpers/utils/util"),p=e("./useTokenBalances");n.useAccountTotalFiatBalance=(e,t)=>{const n=(0,s.useSelector)(o.getCurrentChainId),f=(0,s.useSelector)(u.getConversionRate),h=(0,s.useSelector)(u.getCurrentCurrency),g=(0,s.useSelector)(i.getTokenExchangeRates,s.shallowEqual),y=(0,s.useSelector)(i.getConfirmationExchangeRates),k=(0,s.useSelector)(i.getMetaMaskCachedBalances),T=(null==k?void 0:k[null==e?void 0:e.address])??0,v=(0,l.getValueFromWeiHex)({value:T,toCurrency:h,conversionRate:f,numberOfDecimals:2}),b=(0,s.useSelector)(i.getAllTokens),S=(0,a.useMemo)((()=>{var t;return(null==b||null===(t=b[n])||void 0===t?void 0:t[null==e?void 0:e.address])??[]}),[null==e?void 0:e.address,n,b]),C=(0,s.useSelector)(i.getTokenList),w=(0,s.useSelector)(i.getNativeCurrencyImage),E=(0,s.useSelector)(u.getNativeCurrency),{tokensWithBalances:x}=(0,p.useTokenTracker)({chainId:n,tokens:S,address:null==e?void 0:e.address,hideZeroBalanceTokens:t}),I=(0,a.useMemo)((()=>({...g,...y})),[y,g]),A=(0,a.useMemo)((()=>x.map((e=>{const t=I[(0,r.toChecksumAddress)(e.address)];return(0,d.getTokenFiatAmount)(t,f,h,e.string,e.symbol,!1,!1)}))),[x,I,f,h]),_=(0,a.useMemo)((()=>((e,t)=>{const n=[];return t.forEach((t=>{const s=e[t.address.toLowerCase()];s&&n.push({...s,balance:t.balance,string:t.string,balanceError:t.balanceError})})),n})(C,x)),[C,x]),M=(0,a.useMemo)((()=>[{iconUrl:w,symbol:E,fiatBalance:v},..._.map(((e,t)=>({...e,fiatBalance:A[t]})))]),[_,A,w,E,v]),P=(0,a.useMemo)((()=>M.sort(((e,t)=>parseFloat(t.fiatBalance)-parseFloat(e.fiatBalance)))),[M]),D=(0,l.sumDecimals)(v,...A).toString(10),N=(0,a.useMemo)((()=>(x.forEach((e=>{e.string=(0,m.roundToDecimalPlacesRemovingExtraZeroes)(e.string,5);const t=I[(0,r.toChecksumAddress)(e.address)];e.tokenFiatAmount=(0,d.getTokenFiatAmount)(t,f,h,e.string,e.symbol,!1,!1)||"0"})),x)),[x,I,f,h]),O=(0,c.formatCurrency)(D,h);let B=(0,l.getWeiHexFromDecimalValue)({value:D,fromCurrency:h,conversionRate:f,invertConversionRate:!0});return"NaN"===B&&(B="0x0"),{formattedFiat:O,totalWeiBalance:B,totalFiatBalance:D,tokensWithBalances:N,loading:!1,orderedTokenList:P,mergedRates:I}}}}},{package:"$root$",file:"ui/hooks/useAccountTotalFiatBalance.js"}],[6757,{"../ducks/metamask/metamask":6651,"../selectors":7403,"../store/actions":7421,"./useMultiPolling":6780,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=e("react-redux"),a=e("../selectors"),o=e("../store/actions"),i=e("../ducks/metamask/metamask"),l=(s=e("./useMultiPolling"))&&s.__esModule?s:{default:s};n.default=()=>{const e=(0,r.useSelector)(a.getNetworkClientIdsToPoll),t=(0,r.useSelector)(i.getCompletedOnboarding),n=(0,r.useSelector)(i.getIsUnlocked),s=t&&n;(0,l.default)({startPolling:o.accountTrackerStartPolling,stopPollingByPollingToken:o.accountTrackerStopPollingByPollingToken,input:s?e:[]})}}}},{package:"$root$",file:"ui/hooks/useAccountTrackerPolling.ts"}],[6758,{"../ducks/confirm-alerts/confirm-alerts":6643,"../helpers/constants/design-system":6663,"../selectors/alerts":7395,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react-redux"),r=e("react"),a=e("../selectors/alerts"),o=e("../ducks/confirm-alerts/confirm-alerts"),i=e("../helpers/constants/design-system");function l(e){const t={[i.Severity.Danger]:3,[i.Severity.Warning]:2,[i.Severity.Info]:1};return e.sort(((e,n)=>t[n.severity]-t[e.severity]))}n.default=e=>{const t=(0,s.useDispatch)(),n=l((0,s.useSelector)((t=>(0,a.selectAlerts)(t,e)))),u=(0,s.useSelector)((t=>(0,a.selectConfirmedAlertKeys)(t,e))),c=l((0,s.useSelector)((t=>(0,a.selectGeneralAlerts)(t,e)))),d=l((0,s.useSelector)((t=>(0,a.selectFieldAlerts)(t,e)))),m=(0,r.useCallback)((e=>e?n.filter((t=>t.field===e)):[]),[n]),p=(0,r.useCallback)(((n,s)=>{t((0,o.setAlertConfirmed)(e,n,s))}),[t,o.setAlertConfirmed,e]),f=(0,r.useCallback)((e=>u.includes(e)),[u]),h=n.filter((e=>!f(e.key)&&e.severity===i.Severity.Danger)),g=n.length>0,y=n.filter((e=>e.severity===i.Severity.Danger)),k=h.length>0,T=d.filter((e=>!f(e.key)&&e.severity===i.Severity.Danger));return{alerts:n,fieldAlerts:d,generalAlerts:c,getFieldAlerts:m,hasAlerts:g,dangerAlerts:y,hasDangerAlerts:(null==y?void 0:y.length)>0,hasUnconfirmedDangerAlerts:k,isAlertConfirmed:f,setAlertConfirmed:p,unconfirmedDangerAlerts:h,unconfirmedFieldDangerAlerts:T,hasUnconfirmedFieldDangerAlerts:T.length>0}}}}},{package:"$root$",file:"ui/hooks/useAlerts.ts"}],[6759,{react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RESULT_PENDING=n.RESULT_IDLE=n.RESULT_BASE=void 0,n.createErrorResult=l,n.createSuccessResult=i,n.useAsyncCallback=u,n.useAsyncResult=c,n.useAsyncResultOrThrow=function(e,t=[]){const n=c(e,t);if("error"===n.status)throw n.error;return n};var s=e("react");const r=n.RESULT_BASE={idle:!1,pending:!1,value:undefined,error:undefined},a=n.RESULT_IDLE={...r,status:"idle",idle:!0},o=n.RESULT_PENDING={...r,status:"pending",pending:!0};function i(e){return{...r,status:"success",value:e}}function l(e){return{...r,status:"error",error:e}}function u(e,t=[]){const[n,r]=(0,s.useState)(a),u=(0,s.useRef)(!0);(0,s.useEffect)((()=>()=>{u.current=!1}),[]);return[(0,s.useCallback)((async()=>{if(u.current){r(o);try{const t=await e();u.current&&r(i(t))}catch(e){u.current&&r(l(e))}}}),t),n]}function c(e,t=[]){const[n,r]=u(e,t);return(0,s.useEffect)((()=>{n()}),[n]),"idle"===r.status?o:r}}}},{package:"$root$",file:"ui/hooks/useAsync.ts"}],[6760,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ZERO_BALANCE=n.SWEEPSTAKES_START=n.SWEEPSTAKES_SLIDE=n.SWEEPSTAKES_END=n.REMOTE_MODE_SLIDE=n.MULTI_SRP_SLIDE=n.FUND_SLIDE=n.CASH_SLIDE=n.CARD_SLIDE=n.BRIDGE_SLIDE=void 0;n.REMOTE_MODE_SLIDE={id:"remoteMode",title:"slideRemoteModeTitle",description:"slideRemoteModeDescription",image:"./images/slide-fund-icon.svg",href:"/home.html#remote"},n.SWEEPSTAKES_SLIDE={id:"sweepStake",title:"slideSweepStakeTitle",description:"slideSweepStakeDescription",image:"./images/sweepstakes.png",href:"https://portfolio.metamask.io/explore/nfts?event=012e19e2"},n.FUND_SLIDE={id:"fund",title:"slideFundWalletTitle",description:"slideFundWalletDescription",image:"./images/slide-fund-icon.svg",href:"https://portfolio.metamask.io/buy/build-quote"},n.BRIDGE_SLIDE={id:"bridge",title:"slideBridgeTitle",description:"slideBridgeDescription",image:"./images/slide-bridge-icon.svg"},n.CARD_SLIDE={id:"card",title:"slideDebitCardTitle",description:"slideDebitCardDescription",image:"./images/slide-card-icon.svg",href:"https://portfolio.metamask.io/card"},n.CASH_SLIDE={id:"cash",title:"slideCashOutTitle",description:"slideCashOutDescription",image:"./images/slide-sell-icon.svg",href:"https://portfolio.metamask.io/sell"},n.MULTI_SRP_SLIDE={id:"multiSrp",title:"slideMultiSrpTitle",description:"slideMultiSrpDescription",image:"./images/slide-multi-srp-icon.svg"},n.ZERO_BALANCE="0x0",n.SWEEPSTAKES_START=new Date("2025-04-09T00:00:00Z"),n.SWEEPSTAKES_END=new Date("2025-04-28T23:59:59Z")}}},{package:"$root$",file:"ui/hooks/useCarouselManagement/constants.ts"}],[6761,{"./constants":6760,"./useCarouselManagement":6762},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var s=e("./useCarouselManagement");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===s[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}}))}));var r=e("./constants");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))}))}}},{package:"$root$",file:"ui/hooks/useCarouselManagement/index.ts"}],[6762,{"../../selectors":7403,"../../selectors/remote-mode":7412,"../../store/actions":7421,"./constants":6760,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSweepstakesCampaignActive=u,n.useCarouselManagement=void 0;var s=e("react"),r=e("react-redux"),a=e("../../store/actions"),o=e("../../selectors"),i=e("../../selectors/remote-mode"),l=e("./constants");function u(e){return e>=l.SWEEPSTAKES_START&&e<=l.SWEEPSTAKES_END}n.useCarouselManagement=({testDate:e}={})=>{const t=Boolean(!1),n=(0,r.useDispatch)(),c=(0,r.useSelector)(o.getSlides),d=(0,r.useSelector)(o.getSelectedAccountCachedBalance),m=(0,r.useSelector)(i.getIsRemoteModeEnabled),p=d===l.ZERO_BALANCE;return(0,s.useEffect)((()=>{const s=[],r=c.find((e=>e.id===l.SWEEPSTAKES_SLIDE.id)),o=(null==r?void 0:r.dismissed)??!1,i={...l.FUND_SLIDE,undismissable:p};s.push(l.BRIDGE_SLIDE),s.push(l.CARD_SLIDE),s.push(l.CASH_SLIDE),s.push(l.MULTI_SRP_SLIDE),s.splice(p?0:2,0,i),m&&s.unshift(l.REMOTE_MODE_SLIDE);const d=u(e?new Date(e):new Date((new Date).toISOString()));if(t||!d||o){if(null!=r&&r.dismissed){const e={...l.SWEEPSTAKES_SLIDE,dismissed:!0};s.push(e)}}else{const e={...l.SWEEPSTAKES_SLIDE,dismissed:!1};s.unshift(e)}n((0,a.updateSlides)(s))}),[n,p,m,c,e,t]),{slides:c}}}}},{package:"$root$",file:"ui/hooks/useCarouselManagement/useCarouselManagement.ts"}],[6763,{"../../shared/constants/copy":5592,"../../shared/constants/time":5617,"./useTimeout":6798,"copy-to-clipboard":4012,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCopyToClipboard=function(e=u){const[t,n]=(0,r.useState)(!1),s=(0,l.useTimeout)((()=>{(0,a.default)(" ",i.COPY_OPTIONS),n(!1)}),e,!1),o=(0,r.useCallback)((e=>{n(!0),s(),(0,a.default)(e,i.COPY_OPTIONS)}),[s]);return[t,o]};var s,r=e("react"),a=(s=e("copy-to-clipboard"))&&s.__esModule?s:{default:s},o=e("../../shared/constants/time"),i=e("../../shared/constants/copy"),l=e("./useTimeout");const u=o.MINUTE}}},{package:"$root$",file:"ui/hooks/useCopyToClipboard.js"}],[6765,{"../../shared/modules/selectors/networks":5674,"../ducks/metamask/metamask":6651,"../selectors":7403,"../store/actions":7421,"./usePolling":6790,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=e("react-redux"),a=e("../selectors"),o=e("../../shared/modules/selectors/networks"),i=e("../store/actions"),l=e("../ducks/metamask/metamask"),u=(s=e("./usePolling"))&&s.__esModule?s:{default:s};n.default=()=>{const e=(0,r.useSelector)(a.getUseCurrencyRateCheck),t=(0,r.useSelector)(l.getCompletedOnboarding),n=(0,r.useSelector)(l.getIsUnlocked),s=(0,r.useSelector)(o.getNetworkConfigurationsByChainId),c=t&&n&&e,d=[...new Set(Object.values(s).map((e=>e.nativeCurrency)))];(0,u.default)({startPolling:i.currencyRateStartPolling,stopPollingByPollingToken:i.currencyRateStopPollingByPollingToken,input:d,enabled:c})}}}},{package:"$root$",file:"ui/hooks/useCurrencyRatePolling.ts"}],[6766,{"../../shared/constants/swaps":5615,"../../shared/modules/selectors/networks":5674,"../../shared/modules/string-utils":5677,"../ducks/metamask/metamask":6651,"../helpers/constants/routes":6669,"react-redux":5087,"react-router-dom":5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCurrentAsset=function(){var e;const t=(0,r.useRouteMatch)({path:`${i.ASSET_ROUTE}/:asset`,exact:!0,strict:!0}),n=null==t||null===(e=t.params)||void 0===e?void 0:e.asset,c=(0,s.useSelector)(a.getTokens),d=n&&c.find((({address:e})=>(0,u.isEqualCaseInsensitive)(e,n))),m=(0,s.useSelector)(o.getCurrentChainId);return d??(l.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[m]||l.ETH_SWAPS_TOKEN_OBJECT)};var s=e("react-redux"),r=e("react-router-dom"),a=e("../ducks/metamask/metamask"),o=e("../../shared/modules/selectors/networks"),i=e("../helpers/constants/routes"),l=e("../../shared/constants/swaps"),u=e("../../shared/modules/string-utils")}}},{package:"$root$",file:"ui/hooks/useCurrentAsset.js"}],[6767,{"../../shared/constants/first-party-contracts":5594,"../../shared/modules/hexstring-utils":5663,"../ducks/domains":6645,"../selectors":7403,"../selectors/nft":7409,"./useName":6784,"./useNftCollectionsMetadata":6785,"@metamask/name-controller":2176,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDisplayName=function(e){return m([e])[0]},n.useDisplayNames=m;var s=e("@metamask/name-controller"),r=e("react-redux"),a=e("../../shared/constants/first-party-contracts"),o=e("../../shared/modules/hexstring-utils"),i=e("../ducks/domains"),l=e("../selectors"),u=e("../selectors/nft"),c=e("./useName"),d=e("./useNftCollectionsMetadata");function m(e){const t=(0,c.useNames)(e),n=e.map((({type:e,value:t,variation:n})=>{if(e!==s.NameType.ETHEREUM_ADDRESS)return undefined;const r=t.toLowerCase();return Object.keys(a.FIRST_PARTY_CONTRACT_NAMES).find((e=>{var t;const s=null===(t=a.FIRST_PARTY_CONTRACT_NAMES[e])||void 0===t?void 0:t[n];return(null==s?void 0:s.toLowerCase())===r}))}));const m=function(e){const t=(0,r.useSelector)(l.selectERC20TokensByChain);return e.map((({preferContractSymbol:e,type:n,value:r,variation:a})=>{var o;if(n!==s.NameType.ETHEREUM_ADDRESS)return undefined;const i=r.toLowerCase(),{iconUrl:l,name:u,symbol:c}=(null==t||null===(o=t[a])||void 0===o||null===(o=o.data)||void 0===o?void 0:o[i])??{};return{name:e&&c?c:u,image:l}}))}(e),p=function(e){const t=(0,r.useSelector)(u.getNftContractsByAddressByChain);return e.map((({type:e,value:n,variation:r})=>{var a;if(e!==s.NameType.ETHEREUM_ADDRESS)return undefined;const o=n.toLowerCase(),i=t[r];return null==i||null===(a=i[o])||void 0===a?void 0:a.name}))}(e),f=function(e){const t=e.filter((({type:e})=>e===s.NameType.ETHEREUM_ADDRESS)).map((({value:e,variation:t})=>({chainId:t,contractAddress:e}))),n=(0,d.useNftCollectionsMetadata)(t);return e.map((({type:e,value:t,variation:r})=>{var a;if(e!==s.NameType.ETHEREUM_ADDRESS)return undefined;const o=null===(a=n[r])||void 0===a?void 0:a[t.toLowerCase()],i=!1!==(null==o?void 0:o.isSpam);if(!o||i)return undefined;const{name:l,image:u}=o;return{name:l,image:u}}))}(e),h=function(e){const t=(0,r.useSelector)(i.getDomainResolutions);return e.map((({type:e,value:n})=>{if(e!==s.NameType.ETHEREUM_ADDRESS)return undefined;const r=null==t?void 0:t.find((e=>(0,o.toChecksumHexAddress)(e.resolvedAddress)===(0,o.toChecksumHexAddress)(n)));return null==r?void 0:r.domainName}))}(e);return e.map(((e,s)=>{const r=t[s],a=n[s],o=m[s],i=p[s],l=f[s],u=h[s],c=(null==r?void 0:r.name)||a||(null==l?void 0:l.name)||(null==o?void 0:o.name)||i||u||null,d=(null==l?void 0:l.image)||(null==o?void 0:o.image);return{name:c,hasPetname:Boolean(null==r?void 0:r.name),contractDisplayName:null==o?void 0:o.name,image:d}}))}}}},{package:"$root$",file:"ui/hooks/useDisplayName.ts"}],[6768,{lodash:4725,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useEqualityCheck=function(e,t=r.isEqual){const[n,a]=(0,s.useState)(e);return(0,s.useLayoutEffect)((()=>{t(e,n)||a(e)}),[e,t,n]),n};var s=e("react"),r=e("lodash")}}},{package:"$root$",file:"ui/hooks/useEqualityCheck.js"}],[6769,{"../../shared/modules/conversion.utils":5657,"../ducks/metamask/metamask":6651,"../helpers/utils/confirm-tx.util":6690,"../selectors":7403,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useEthFiatAmount=function(e,t={},n){const u=(0,r.useSelector)(i.getConversionRate),c=(0,r.useSelector)(i.getCurrentCurrency),d=(0,r.useSelector)(a.getShouldShowFiat),m=t.showFiat??d,p=(0,s.useMemo)((()=>(0,l.decEthToConvertedCurrency)(e,c,u)),[u,c,e]);if(!m||"ETH"===c.toUpperCase()||u<=0||e===undefined)return undefined;return n?(0,o.formatCurrency)(p,c):`${(0,o.formatCurrency)(p,c)} ${c.toUpperCase()}`};var s=e("react"),r=e("react-redux"),a=e("../selectors"),o=e("../helpers/utils/confirm-tx.util"),i=e("../ducks/metamask/metamask"),l=e("../../shared/modules/conversion.utils")}}},{package:"$root$",file:"ui/hooks/useEthFiatAmount.js"}],[6770,{react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react");n.default=e=>{const[t,n]=(0,s.useState)(""),[r,a]=(0,s.useState)("");return(0,s.useEffect)((()=>{(async()=>{if(!e)return;const t=await fetch(e);if(t.ok)try{let e=await t.text();e=e.replace(/,\s*}/g,"}").replace(/,\s*\]/g,"]");const s=JSON.parse(e);n(s.image),a(s.name)}catch{}})()}),[e]),{image:t,name:r}}}}},{package:"$root$",file:"ui/hooks/useFetchNftDetailsFromTokenURI.ts"}],[6771,{"../ducks/locale/locale":6650,"../ducks/metamask/metamask":6651,"../helpers/utils/util":6712,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useFiatFormatter=void 0;var s=e("react-redux"),r=e("../ducks/locale/locale"),a=e("../ducks/metamask/metamask"),o=e("../helpers/utils/util");n.useFiatFormatter=()=>{const e=(0,s.useSelector)(r.getIntlLocale),t=(0,s.useSelector)(a.getCurrentCurrency);return(n,s={})=>{const{shorten:r}=s;try{const s=new Intl.NumberFormat(e,{style:"currency",currency:t});if(!r)return s.format(n);const a=s.formatToParts(n);let i="",l="";a.forEach((e=>{"currency"===e.type?i+=e.value:l+=e.value}));const u=(0,o.shortenString)(l,{truncatedCharLimit:15,truncatedStartChars:12,truncatedEndChars:0,skipCharacterInEnd:!0});return a.findIndex((e=>"currency"===e.type))<a.findIndex((e=>"integer"===e.type))?`${i}${u}`:`${u}${i}`}catch(s){const a=new Intl.NumberFormat(e).format(n),i=(0,o.shortenString)(a,{truncatedCharLimit:15,truncatedStartChars:12,truncatedEndChars:0,skipCharacterInEnd:!0});return r?`${i} ${t}`:`${a} ${t}`}}}}}},{package:"$root$",file:"ui/hooks/useFiatFormatter.ts"}],[6772,{"../../shared/modules/selectors/networks":5674,"../ducks/metamask/metamask":6651,"../store/actions":7421,"./usePolling":6790,"lodash/isEqual":4712,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGasFeeEstimates=function(e){const t=(0,r.useSelector)(l.getSelectedNetworkClientId),n=e??t,[c,d]=(0,a.useState)(""),m=(0,r.useSelector)((e=>(0,o.getGasEstimateTypeByChainId)(e,c))),p=(0,r.useSelector)((e=>(0,o.getGasFeeEstimatesByChainId)(e,c)),s.default),f=(0,r.useSelector)((e=>(0,o.getIsGasEstimatesLoadingByChainId)(e,{chainId:c,networkClientId:n}))),h=(0,r.useSelector)((e=>(0,o.getIsNetworkBusyByChainId)(e,c)));return(0,a.useEffect)((()=>{let e=!0;return(0,i.getNetworkConfigurationByNetworkClientId)(n).then((t=>{t&&e&&d(t.chainId)})),()=>{e=!1}}),[n]),(0,u.default)({startPolling:e=>(0,i.gasFeeStartPollingByNetworkClientId)(e.networkClientId),stopPollingByPollingToken:i.gasFeeStopPollingByPollingToken,input:{networkClientId:n}}),{gasFeeEstimates:p,gasEstimateType:m,isGasEstimatesLoading:f,isNetworkBusy:h}};var s=c(e("lodash/isEqual")),r=e("react-redux"),a=e("react"),o=e("../ducks/metamask/metamask"),i=e("../store/actions"),l=e("../../shared/modules/selectors/networks"),u=c(e("./usePolling"));function c(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/hooks/useGasFeeEstimates.js"}],[6773,{"../helpers/utils/util":6712,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react"),r=e("../helpers/utils/util");n.default=(e,t)=>{const[n,a]=(0,s.useState)("");return(0,s.useEffect)((()=>{(async()=>{const n=await(0,r.getAssetImageURL)(e,t);a(n)})()}),[e,t]),n}}}},{package:"$root$",file:"ui/hooks/useGetAssetImageUrl.ts"}],[6774,{"../../shared/modules/conversion.utils":5657,"../../shared/modules/selectors/networks":5674,"../selectors":7403,"./useTokenBalances":6799,"bn.js":3895,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGetFormattedTokensPerChain=void 0;var s=e("react-redux"),r=e("bn.js"),a=e("../selectors"),o=e("../../shared/modules/selectors/networks"),i=e("../../shared/modules/conversion.utils"),l=e("./useTokenBalances");n.useGetFormattedTokensPerChain=(e,t,n,u)=>{const c=(0,s.useSelector)(o.getCurrentChainId),d=(0,s.useSelector)(a.getAllTokens),m=(0,l.useTokenBalances)({chainIds:u});return{formattedTokensWithBalancesPerChain:(n?[c]:u).map((n=>{var s;const a=((null==d||null===(s=d[n])||void 0===s?void 0:s[null==e?void 0:e.address])??[]).reduce(((s,a)=>{var o;const u=(null===(o=m.tokenBalances[e.address])||void 0===o||null===(o=o[n])||void 0===o?void 0:o[a.address])??"0x0";if("0x0"!==u||!t){const e=(0,i.hexToDecimal)(u);s.push({address:a.address,symbol:a.symbol,decimals:a.decimals,balance:e,string:(0,l.stringifyBalance)(new r.BN(e),new r.BN(a.decimals))})}return s}),[]);return{chainId:n,tokensWithBalances:a}}))}}}}},{package:"$root$",file:"ui/hooks/useGetFormattedTokensPerChain.ts"}],[6776,{"../../app/scripts/lib/util":204,"../../shared/constants/network":5604,"../../shared/constants/time":5617,"../../shared/lib/fetch-with-cache":5634,"../selectors":7403,"../selectors/multichain":7407,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsOriginalNativeTokenSymbol=function(e,t,n,s=""){const[m,p]=(0,r.useState)(!1),f=(0,a.useSelector)(u.useSafeChainsListValidationSelector),h=(0,a.useSelector)(c.getMultichainIsEvm),g=(0,a.useSelector)(c.getMultichainCurrentNetwork);return(0,r.useEffect)((()=>{!async function(n){if(h)try{var r;if(!f)return void p(!0);if((e=>{const t=(0,d.getValidUrl)(e);return null!==t&&("localhost"===t.hostname||"127.0.0.1"===t.hostname)})(s))return void p(!0);const a=i.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[e];if(a)return void p(a===t);const u=i.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP_NETWORK_COLLISION[e];if(u&&u.some((e=>e.currencySymbol===t)))return void p(!0);const c=(await(0,o.default)({url:i.CHAIN_SPEC_URL,allowStale:!0,cacheOptions:{cacheRefreshTime:l.DAY},functionName:"getSafeChainsList"})).find((e=>e.chainId===parseInt(n,16))),m=(null==c||null===(r=c.nativeCurrency)||void 0===r?void 0:r.symbol)??null;p(m===t)}catch(e){p(!1)}else p(t===(null==g?void 0:g.ticker))}(e)}),[m,e,t,n,s,f]),m};var s,r=e("react"),a=e("react-redux"),o=(s=e("../../shared/lib/fetch-with-cache"))&&s.__esModule?s:{default:s},i=e("../../shared/constants/network"),l=e("../../shared/constants/time"),u=e("../selectors"),c=e("../selectors/multichain"),d=e("../../app/scripts/lib/util")}}},{package:"$root$",file:"ui/hooks/useIsOriginalNativeTokenSymbol.js"}],[6777,{"../selectors":7403,"../store/actions":7421,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsOriginalTokenSymbol=function(e,t){const[n,i]=(0,s.useState)(null),l=(0,r.useSelector)(o.getTokenList);return(0,s.useEffect)((()=>{!async function(e){var n,s;let r=null===(n=l[null==e?void 0:e.toLowerCase()])||void 0===n?void 0:n.symbol;r||(r=await(0,a.getTokenSymbol)(e)),i((null===(s=r)||void 0===s?void 0:s.toLowerCase())===(null==t?void 0:t.toLowerCase()))}(e)}),[e,t]),n};var s=e("react"),r=e("react-redux"),a=e("../store/actions"),o=e("../selectors")}}},{package:"$root$",file:"ui/hooks/useIsOriginalTokenSymbol.js"}],[6778,{"../store/actions":7421,loglevel:4733,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDisableMetametrics=function(){const e=(0,a.useDispatch)(),[t,n]=(0,r.useState)(!1),[s,o]=(0,r.useState)(null);return{disableMetametrics:(0,r.useCallback)((async()=>{n(!0),e((0,i.showLoadingIndication)()),o(null);try{await e((0,i.setParticipateInMetaMetrics)(!1))}catch(e){throw o(e instanceof Error?e.message:"An unexpected error occurred"),e}finally{n(!1),e((0,i.hideLoadingIndication)())}e((0,i.hideLoadingIndication)())}),[e]),loading:t,error:s}},n.useEnableMetametrics=function(){const e=(0,a.useDispatch)(),[t,n]=(0,r.useState)(!1),[s,l]=(0,r.useState)(null);return{enableMetametrics:(0,r.useCallback)((async()=>{n(!0),e((0,i.showLoadingIndication)()),l(null);try{await e((0,i.setParticipateInMetaMetrics)(!0))}catch(e){throw l(e instanceof Error?e.message:"An unexpected error occurred"),o.default.error(e),e}finally{n(!1),e((0,i.hideLoadingIndication)())}e((0,i.hideLoadingIndication)())}),[e]),loading:t,error:s}};var s,r=e("react"),a=e("react-redux"),o=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("../store/actions")}}},{package:"$root$",file:"ui/hooks/useMetametrics.ts"}],[6779,{"../store/actions":7421,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useModalProps=function(){const e=(0,s.useSelector)((e=>{var t;return null===(t=e.appState.modal.modalState)||void 0===t?void 0:t.props})),t=(0,s.useDispatch)();return{props:e,hideModal:()=>t((0,r.hideModal)())}};var s=e("react-redux"),r=e("../store/actions")}}},{package:"$root$",file:"ui/hooks/useModalProps.ts"}],[6780,{react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react");n.default=e=>{const t=(0,s.useRef)(new Map);(0,s.useEffect)((()=>{for(const n of e.input){const s=JSON.stringify(n);t.current.has(s)||e.startPolling(n).then((e=>t.current.set(s,e)))}for(const[n,s]of t.current.entries()){e.input.some((e=>n===JSON.stringify(e)))||(e.stopPollingByPollingToken(s),t.current.delete(n))}}),[e.input&&JSON.stringify(e.input)]),(0,s.useEffect)((()=>()=>{for(const n of t.current.values())e.stopPollingByPollingToken(n)}),[])}}}},{package:"$root$",file:"ui/hooks/useMultiPolling.ts"}],[6781,{"../../shared/constants/multichain/assets":5602,"../helpers/utils/confirm-tx.util":6690,"../helpers/utils/token-util":6709,"../selectors/multichain":7407,"./useAccountTotalFiatBalance":6756,"./useMultichainSelector":6783,"@metamask/keyring-api":2002,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useMultichainAccountTotalFiatBalance=n.EMPTY_VALUES=void 0;var s=e("react-redux"),r=e("@metamask/keyring-api"),a=e("../selectors/multichain"),o=e("../helpers/utils/confirm-tx.util"),i=e("../../shared/constants/multichain/assets"),l=e("../helpers/utils/token-util"),u=e("./useMultichainSelector"),c=e("./useAccountTotalFiatBalance");const d=n.EMPTY_VALUES={formattedFiat:"0",totalFiatBalance:"0",totalWeiBalance:"0",tokensWithBalances:[],loading:!1,orderedTokenList:[]};n.useMultichainAccountTotalFiatBalance=(e,t=!1)=>{var n;if((0,r.isEvmAccountType)(e.type))return(0,c.useAccountTotalFiatBalance)(e,t);const m=(0,u.useMultichainSelector)(a.getMultichainCurrentCurrency,e),{network:p}=(0,u.useMultichainSelector)(a.getMultichainNetwork,e),{ticker:f}=p,h=(0,u.useMultichainSelector)(a.getMultichainConversionRate,e),g=(0,u.useMultichainSelector)(a.getMultichainCurrencyImage,e),y=(0,s.useSelector)(a.getMultichainBalances),k=i.MULTICHAIN_NATIVE_CURRENCY_TO_CAIP19[f];if(null==y||null===(n=y[e.id])||void 0===n||!n[k])return d;const{amount:T}=y[e.id][k],v=(0,l.getTokenFiatAmount)(1,Number(h),m,T,f,!1,!1)??"0",b={iconUrl:g,symbol:f,fiatBalance:v};return{formattedFiat:(0,o.formatCurrency)(v,m),totalFiatBalance:v,totalBalance:T,tokensWithBalances:[],loading:!1,orderedTokenList:[b]}}}}},{package:"$root$",file:"ui/hooks/useMultichainAccountTotalFiatBalance.ts"}],[6782,{"../../shared/constants/transaction":5619,"../selectors/assets":7397,"../selectors/multichain":7407,"../selectors/selectors":7413,"./useMultichainSelector":6783,"@metamask/utils":2822,"bignumber.js":3847,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useMultichainBalances=void 0;var s=e("react"),r=e("react-redux"),a=e("@metamask/utils"),o=e("bignumber.js"),i=e("../selectors/assets"),l=e("../selectors/multichain"),u=e("../../shared/constants/transaction"),c=e("../selectors/selectors"),d=e("./useMultichainSelector");n.useMultichainBalances=e=>{const t=(0,r.useSelector)(c.getSelectedEvmInternalAccount),n=(0,r.useSelector)((t=>(0,c.getInternalAccount)(t,e??""))),m=e?n:t,p=(0,r.useSelector)((e=>(0,i.getTokenBalancesEvm)(e,null==m?void 0:m.address))),f=(0,r.useSelector)(l.getLastSelectedNonEvmAccount),h=(e=>{const t=(0,r.useSelector)(i.getAccountAssets),n=(0,r.useSelector)(i.getAssetsMetadata),c=(0,d.useMultichainSelector)(l.getMultichainBalances),m=(0,r.useSelector)(i.getAssetsRates);return(0,s.useMemo)((()=>{if(!e)return[];const s=null==t?void 0:t[e],r=null==c?void 0:c[e];return r&&s?s.filter((e=>n[e])).map((e=>{var t,s,i,l,c,d,p;const{chainId:f,assetReference:h,assetNamespace:g}=(0,a.parseCaipAssetType)(e);return{chainId:f,symbol:(null===(t=n[e])||void 0===t?void 0:t.symbol)??"",assetId:e,address:h,string:(null===(s=r[e])||void 0===s?void 0:s.amount)??"0",balance:(null===(i=r[e])||void 0===i?void 0:i.amount)??"0",decimals:null===(l=n[e])||void 0===l||null===(l=l.units[0])||void 0===l?void 0:l.decimals,image:(null===(c=n[e])||void 0===c?void 0:c.iconUrl)??"",type:"token"===g?u.AssetType.token:u.AssetType.native,tokenFiatAmount:new o.BigNumber((null===(d=r[e])||void 0===d?void 0:d.amount)??"1").times((null==m||null===(p=m[e])||void 0===p?void 0:p.rate)??"1").toNumber()}})).filter(Boolean):[]}),[n,m,t,e,c])})(e??(null==f?void 0:f.id));return{assetsWithBalance:(0,s.useMemo)((()=>[...p,...h].map((e=>({...e,type:e.isNative?u.AssetType.native:u.AssetType.token}))).sort(((e,t)=>(t.tokenFiatAmount??0)-(e.tokenFiatAmount??0)))),[p,h]),balanceByChainId:(0,s.useMemo)((()=>[...p,...h].reduce(((e,t)=>(e[t.chainId]||(e[t.chainId]=0),e[t.chainId]+=t.tokenFiatAmount??0,e)),{})),[p,h])}}}}},{package:"$root$",file:"ui/hooks/useMultichainBalances.ts"}],[6784,{"../selectors":7403,"@metamask/name-controller":2176,lodash:4725,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useName=function(e,t,n){return i([{value:e,type:t,variation:n}])[0]},n.useNames=i;var s=e("@metamask/name-controller"),r=e("react-redux"),a=e("lodash"),o=e("../selectors");function i(e){const t=(0,r.useSelector)(o.getNames,a.isEqual);return e.map((({value:e,type:n,variation:r})=>{var a;const o=function(e,t){if(t===s.NameType.ETHEREUM_ADDRESS)return e.toLowerCase();return e}(e,n),i=(null===(a=t[n])||void 0===a?void 0:a[o])??{},l=i[r],u=i[s.FALLBACK_VARIATION],c=null!=l&&l.name||!u?l??{}:u,{name:d=null,sourceId:m=null,origin:p=null,proposedNames:f={}}=c;return{name:d,sourceId:m,proposedNames:f,origin:p}}))}}}},{package:"$root$",file:"ui/hooks/useName.ts"}],[6785,{"../../shared/constants/transaction":5619,"../store/actions":7421,"./useAsync":6759},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNftCollectionsMetadata=function(e){const{value:t}=(0,a.useAsyncResult)((()=>async function(e){const t=e.reduce(((e,{chainId:t,contractAddress:n})=>(e[t]=[...e[t]??[],n.toLowerCase()],e)),{}),n=Object.keys(t),s=await Promise.all(n.map((e=>async function(e,t){const n=await Promise.all(e.map((e=>(0,r.getTokenStandardAndDetails)(e,t)))),s=e.filter(((e,t)=>o.includes(n[t].standard)));if(0===s.length)return{};const a=await(0,r.getNFTContractInfo)(s,t);return a.collections.reduce(((e,t,n)=>(e[s[n]]={name:null==t?void 0:t.name,image:null==t?void 0:t.image,isSpam:null==t?void 0:t.isSpam},e)),{})}(t[e],e))));return n.reduce(((e,t,n)=>(e[t]=s[n],e)),{})}(e)),[JSON.stringify(e)]);return t??{}};var s=e("../../shared/constants/transaction"),r=e("../store/actions"),a=e("./useAsync");const o=[s.TokenStandard.ERC721]}}},{package:"$root$",file:"ui/hooks/useNftCollectionsMetadata.ts"}],[6786,{"../../shared/modules/selectors/networks":5674,"../ducks/metamask/metamask":6651,"../selectors":7403,"./useI18nContext":6775,"./usePrevious":6791,lodash:4725,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNfts=function({overridePopularNetworkFilter:e=!1}={}){const t=(0,c.useI18nContext)(),n=(0,r.useSelector)(o.getAllNfts),{address:d}=(0,r.useSelector)(i.getSelectedInternalAccount),m=(0,r.useSelector)(l.getCurrentChainId),p=(0,r.useSelector)(i.getAllChainsToPoll),f=(0,r.useSelector)(i.getIsTokenNetworkFilterEqualCurrentNetwork),h=(0,s.useMemo)((()=>f||e?(null==n?void 0:n[m])??[]:n),[f,n,m,e]),g=(0,r.useSelector)(o.getNftContracts),y=t("nftsPreviouslyOwned"),k=t("unknownCollection"),[T,v]=(0,s.useState)([]),[b,S]=(0,s.useState)([]),[C,w]=(0,s.useState)((()=>(null==h?void 0:h.length)>=0)),E=(0,u.usePrevious)(h),x=(0,u.usePrevious)(p),I=(0,u.usePrevious)(d);return(0,s.useEffect)((()=>{(0,a.isEqual)(E,h)&&(0,a.isEqual)(I,d)&&(0,a.isEqual)(x,m)||(()=>{if(w(!0),d===undefined||p===undefined)return;const e=[],t=[];Object.values(h).flat().forEach((n=>{!1===(null==n?void 0:n.isCurrentlyOwned)?e.push(n):t.push(n)})),S(e),v(t),w(!1)})()}),[h,E,g,w,m,x,d,I,y,k,p]),{loading:C,currentlyOwnedNfts:T,previouslyOwnedNfts:b}};var s=e("react"),r=e("react-redux"),a=e("lodash"),o=e("../ducks/metamask/metamask"),i=e("../selectors"),l=e("../../shared/modules/selectors/networks"),u=e("./usePrevious"),c=e("./useI18nContext")}}},{package:"$root$",file:"ui/hooks/useNfts.ts"}],[6787,{"../../shared/modules/selectors/networks":5674,"../ducks/metamask/metamask":6651,"../helpers/utils/nfts":6701,"../selectors":7403,"./useI18nContext":6775,"./usePrevious":6791,lodash:4725,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNftsCollections=function(){const e=(0,d.useI18nContext)(),t=e("nftsPreviouslyOwned"),n=e("unknownCollection"),[m,p]=(0,s.useState)({}),[f,h]=(0,s.useState)({collectionName:t,nfts:[]}),g=(0,r.useSelector)(i.getIsTokenNetworkFilterEqualCurrentNetwork),y=(0,r.useSelector)(o.getAllNfts),{address:k}=(0,r.useSelector)(i.getSelectedInternalAccount),T=(0,r.useSelector)(l.getCurrentChainId),v=(0,s.useMemo)((()=>g?(null==y?void 0:y[T])??[]:y),[g,y,T]),[b,S]=(0,s.useState)((()=>(null==v?void 0:v.length)>=0)),C=(0,r.useSelector)(o.getNftContracts),w=(0,c.usePrevious)(v),E=(0,c.usePrevious)(T),x=(0,c.usePrevious)(k);return(0,s.useEffect)((()=>{(0,a.isEqual)(w,v)&&(0,a.isEqual)(x,k)&&(0,a.isEqual)(E,T)||(()=>{if(S(!0),k===undefined||T===undefined)return;const e={},s={collectionName:t,nfts:[]};Object.values(v).flat().forEach((t=>{if(!1===(null==t?void 0:t.isCurrentlyOwned))s.nfts.push(t);else if(e[t.address])e[t.address].nfts.push(t);else{const s=C.find((({address:e})=>e===t.address));e[t.address]={collectionName:(null==s?void 0:s.name)||n,collectionImage:(null==s?void 0:s.logo)||(0,u.getNftImage)(t.image),nfts:[t]}}})),p(e),h(s),S(!1)})()}),[v,w,C,S,T,E,k,x,t,n]),{nftsLoading:b,collections:m,previouslyOwnedCollection:f}};var s=e("react"),r=e("react-redux"),a=e("lodash"),o=e("../ducks/metamask/metamask"),i=e("../selectors"),l=e("../../shared/modules/selectors/networks"),u=e("../helpers/utils/nfts"),c=e("./usePrevious"),d=e("./useI18nContext")}}},{package:"$root$",file:"ui/hooks/useNftsCollections.js"}],[6788,{"../helpers/constants/notifications":6667,"../store/actions":7421,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSnapNotificationTimeouts=void 0;var s=e("react-redux"),r=e("../store/actions"),a=e("../helpers/constants/notifications");n.useSnapNotificationTimeouts=()=>{const e=(0,s.useDispatch)();return{setNotificationTimeout:t=>{setTimeout((()=>{e((0,r.deleteNotificationsById)([t]))}),a.NOTIFICATIONS_EXPIRATION_DELAY)}}}}}},{package:"$root$",file:"ui/hooks/useNotificationTimeouts.ts"}],[6789,{"../selectors":7403,"@metamask/permission-controller":2254,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useOriginMetadata=function(e){const t=(0,r.useSelector)((t=>(0,a.getTargetSubjectMetadata)(t,e)));if(!e)return null;let n=null;try{const t=new URL(e);n={host:t.host,hostname:t.hostname,origin:e,subjectType:s.SubjectType.Unknown}}catch(e){}if(t&&n)return{...n,...t};if(t)return t;return n};var s=e("@metamask/permission-controller"),r=e("react-redux"),a=e("../selectors")}}},{package:"$root$",file:"ui/hooks/useOriginMetadata.js"}],[6790,{react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react");n.default=e=>{const t=(0,s.useRef)(null),n=(0,s.useRef)(null);let r=!1;(0,s.useEffect)((()=>{if(!1===e.enabled)return()=>{};r=!0;const s=()=>{var s;t.current&&(e.stopPollingByPollingToken(t.current),null===(s=n.current)||void 0===s||s.call(n,t.current))};return e.startPolling(e.input).then((a=>{var o;t.current=a,n.current=(null===(o=e.callback)||void 0===o?void 0:o.call(e,a))||null,r||s()})),()=>{r=!1,s()}}),[e.input&&JSON.stringify(e.input),e.enabled])}}}},{package:"$root$",file:"ui/hooks/usePolling.ts"}],[6791,{react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.usePrevious=function(e){const t=(0,s.useRef)();return(0,s.useEffect)((()=>{t.current=e}),[e]),t.current};var s=e("react")}}},{package:"$root$",file:"ui/hooks/usePrevious.ts"}],[6792,{"./usePrevious":6791,lodash:4725,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useScrollRequired=void 0;var s=e("react"),r=e("lodash"),a=e("./usePrevious");n.useScrollRequired=(e=[],{offsetPxFromBottom:t=16}={})=>{var n,o;const i=(0,s.useRef)(null),l=(0,a.usePrevious)(null===(n=i.current)||void 0===n?void 0:n.offsetHeight),[u,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)(!1),[p,f]=(0,s.useState)(!1),h=()=>{if(!i.current)return;const e=i.current&&i.current.scrollHeight>i.current.clientHeight,n=e&&Math.round(i.current.scrollTop)+i.current.offsetHeight+t>=i.current.scrollHeight;e!==d&&(c(!1),m(e)),f(!e||n),e&&!n||c(!0)};(0,s.useEffect)(h,[i,...e]),(0,s.useEffect)((()=>{var e;l!==(null===(e=i.current)||void 0===e?void 0:e.offsetHeight)&&h()}),[null===(o=i.current)||void 0===o?void 0:o.offsetHeight]);return{isScrollable:d,isScrolledToBottom:p,hasScrolledToBottom:u,scrollToBottom:()=>{f(!0),c(!0),i.current&&i.current.scrollTo({top:i.current.scrollHeight,behavior:"smooth"})},setHasScrolledToBottom:c,ref:i,onScroll:(0,r.debounce)(h,25)}}}}},{package:"$root$",file:"ui/hooks/useScrollRequired.js"}],[6793,{"../helpers/constants/routes":6669,"../selectors":7403,"react-redux":5087,"react-router-dom":5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSegmentContext=function(){const e=(0,r.useRouteMatch)({path:i,exact:!0,strict:!0}),t=((0,s.useSelector)(o.txDataSelector)||{}).origin,n=t?{url:t}:undefined;return{page:e?{path:e.path,title:a.PATH_NAME_MAP[e.path],url:e.path}:undefined,referrer:n}};var s=e("react-redux"),r=e("react-router-dom"),a=e("../helpers/constants/routes"),o=e("../selectors");const i=Object.keys(a.PATH_NAME_MAP)}}},{package:"$root$",file:"ui/hooks/useSegmentContext.js"}],[6794,{"../ducks/app/app":6636,"./useGasFeeEstimates":6772,lodash:4725,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShouldAnimateGasEstimations=function(){const{isGasEstimatesLoading:e,gasFeeEstimates:t}=(0,i.useGasFeeEstimates)(),n=(0,r.useDispatch)(),l=(0,r.useSelector)(o.getGasLoadingAnimationIsShowing),u=(0,s.useRef)(t),c=!(0,a.isEqual)(u.current,t),d=(0,a.isEqual)(u.current,{});c&&(u.current=t);const m=e||c&&!d;(0,s.useEffect)((()=>{!1===l&&!0===m&&n((0,o.toggleGasLoadingAnimation)(!0))}),[n,l,m]),(0,s.useEffect)((()=>{let e;return l&&!m&&(e=setTimeout((()=>{n((0,o.toggleGasLoadingAnimation)(!1))}),2e3)),()=>{e&&clearTimeout(e)}}),[n,l,m])};var s=e("react"),r=e("react-redux"),a=e("lodash"),o=e("../ducks/app/app"),i=e("./useGasFeeEstimates")}}},{package:"$root$",file:"ui/hooks/useShouldAnimateGasEstimations.js"}],[6795,{"../../shared/constants/time":5617,"../../shared/modules/selectors/networks":5674,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShouldShowSpeedUp=function(e,t){const{transactions:n,hasRetried:i}=e,l=(0,r.useSelector)(o.getCurrentChainId),[u={}]=n,c=u.chainId===l,{submittedTime:d}=u,[m,p]=(0,s.useState)((()=>Date.now()-d>5e3&&t&&!i&&c));return(0,s.useEffect)((()=>{let e;return i||!t||m||(Date.now()-d>5*a.SECOND?p(!0):e=setTimeout((()=>{p(!0),clearTimeout(e)}),5001-(Date.now()-d))),()=>{e&&clearTimeout(e)}}),[d,m,i,t]),m};var s=e("react"),r=e("react-redux"),a=e("../../shared/constants/time"),o=e("../../shared/modules/selectors/networks")}}},{package:"$root$",file:"ui/hooks/useShouldShowSpeedUp.js"}],[6796,{"../../shared/lib/transactions-controller-utils":5650,"../../shared/modules/selectors/networks":5674,"../../shared/modules/swaps.utils":5678,"./useTokenFiatAmount":6803,"@metamask/transaction-controller":2773,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSwappedTokenValue=function(e,t){const{symbol:n,decimals:u,address:c}=t,{primaryTransaction:d,initialTransaction:m}=e,{type:p}=m,{from:f}=m.txParams||{},h=(0,s.useSelector)(i.getCurrentChainId),g=p===r.TransactionType.swap&&((null==t?void 0:t.symbol)===d.destinationTokenSymbol||(0,o.isSwapsDefaultTokenAddress)(t.address,h)&&(0,o.isSwapsDefaultTokenSymbol)(d.destinationTokenSymbol,h)),y=[r.TransactionType.swap].includes(p)&&g?(0,a.getSwapsTokensReceivedFromTxMeta)(d.destinationTokenSymbol,m,c,f,u,null,h):[r.TransactionType.swap,r.TransactionType.swapAndSend].includes(p)&&d.swapTokenValue,k="string"==typeof y&&-1===Math.sign(y),T=(0,l.useTokenFiatAmount)(c,y||"",n),v=(0,l.useTokenFiatAmount)(d.sourceTokenAddress,y,d.sourceTokenSymbol);let b;y&&(g?b=T:p===r.TransactionType.swapAndSend&&(b=v));return{swapTokenValue:y,swapTokenFiatAmount:b,isViewingReceivedTokenFromSwap:g,isNegative:k}};var s=e("react-redux"),r=e("@metamask/transaction-controller"),a=e("../../shared/lib/transactions-controller-utils"),o=e("../../shared/modules/swaps.utils"),i=e("../../shared/modules/selectors/networks"),l=e("./useTokenFiatAmount")}}},{package:"$root$",file:"ui/hooks/useSwappedTokenValue.js"}],[6797,{"../../shared/constants/preferences":5609,"../selectors":7403,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTheme=function(){const e=(0,r.useSelector)(a.getTheme),[t,n]=(0,s.useState)(e);return(0,s.useEffect)((()=>{const t=e&&e!==o.ThemeType.os?e:document.documentElement.getAttribute("data-theme");i.includes(t)||(console.warn(`useTheme: Invalid theme resolved to "${t}". Defaulting to "${o.ThemeType.light}".`),n(o.ThemeType.light)),n(t)}),[e]),t};var s=e("react"),r=e("react-redux"),a=e("../selectors"),o=e("../../shared/constants/preferences");const i=Object.values(o.ThemeType).filter((e=>e!==o.ThemeType.os))}}},{package:"$root$",file:"ui/hooks/useTheme.ts"}],[6798,{react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTimeout=function(e,t,n=!0){const r=(0,s.useRef)(),[a,o]=(0,s.useState)(null);(0,s.useEffect)((()=>{r.current=e}),[e]),(0,s.useEffect)((()=>{if("start"!==a)return undefined;const e=setTimeout((()=>{r.current()}),t);return o(e),()=>{clearTimeout(a)}}),[t,a]);const i=(0,s.useCallback)((()=>{clearTimeout(a),o("start")}),[a]);n&&i();return i};var s=e("react")}}},{package:"$root$",file:"ui/hooks/useTimeout.js"}],[6799,{"../../shared/modules/conversion.utils":5657,"../../shared/modules/selectors/networks":5674,"../ducks/metamask/metamask":6651,"../store/actions":7421,"./useMultiPolling":6780,"bn.js":3895,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.stringifyBalance=m,n.useTokenTracker=n.useTokenBalances=void 0;var s=e("react-redux"),r=c(e("bn.js")),a=e("../../shared/modules/selectors/networks"),o=e("../store/actions"),i=e("../ducks/metamask/metamask"),l=e("../../shared/modules/conversion.utils"),u=c(e("./useMultiPolling"));function c(e){return e&&e.__esModule?e:{default:e}}const d=({chainIds:e}={})=>{const t=(0,s.useSelector)(i.getTokenBalances),n=(0,s.useSelector)(a.getNetworkConfigurationsByChainId);return(0,u.default)({startPolling:o.tokenBalancesStartPolling,stopPollingByPollingToken:o.tokenBalancesStopPollingByPollingToken,input:e??Object.keys(n)}),{tokenBalances:t}};n.useTokenBalances=d;function m(e,t,n=5){if(e.eq(new r.default(0)))return"0";const s=parseInt(t.toString(),10);if(0===s)return e.toString();let a=e.toString(),o=a.length,i=o-s,l="";if(i<=0){for(;l.length<=-1*i;)l+="0",o+=1;a=l+a,i=1}const u=a.substr(0,o-s);if(0===n)return u;const c=a.substr(i,n);if(/0+$/u.test(c)){let e=a.substr(i).replace(/0+$/u,"");return e.length>0&&(e=`.${e}`),`${u}${e}`}return`${u}.${c}`}n.useTokenTracker=({chainId:e,tokens:t,address:n,hideZeroBalanceTokens:s})=>{const{tokenBalances:a}=d({chainIds:[e]});return{tokensWithBalances:t.reduce(((t,o)=>{var i;const u=(null===(i=a[n])||void 0===i||null===(i=i[e])||void 0===i?void 0:i[o.address])??"0x0";if("0x0"!==u||!s){const e=(0,l.hexToDecimal)(u);t.push({address:o.address,symbol:o.symbol,decimals:o.decimals,balance:e,balanceError:null,string:m(new r.default(e),new r.default(o.decimals))})}return t}),[])}}}}},{package:"$root$",file:"ui/hooks/useTokenBalances.ts"}],[680,{"@ethereumjs/util":476,"@keystonehq/bc-ur-registry":702,buffer:3943,hdkey:4502,uuid:5533},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var s,r=e("@keystonehq/bc-ur-registry"),a=e("uuid"),o=(s=e("hdkey"))&&"object"==typeof s&&"default"in s?s.default:s,i=e("@ethereumjs/util");const l={ETH_SIGN_REQUEST:new r.RegistryType("eth-sign-request",401),ETH_SIGNATURE:new r.RegistryType("eth-signature",402),ETH_NFT_ITEM:new r.RegistryType("eth-nft-item",403)},{decodeToDataItem:u,RegistryTypes:c}=r.extend;var d,m;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(d||(d={})),(m=n.DataType||(n.DataType={}))[m.transaction=1]="transaction",m[m.typedData=2]="typedData",m[m.personalMessage=3]="personalMessage",m[m.typedTransaction=4]="typedTransaction";class p extends r.RegistryItem{constructor(e){super(),this.getRegistryType=()=>l.ETH_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSourceFingerprint=()=>this.derivationPath.getSourceFingerprint(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[d.requestId]=new r.DataItem(this.requestId,c.UUID.getTag())),this.address&&(e[d.address]=this.address),this.chainId&&(e[d.chainId]=Number(this.chainId)),this.origin&&(e[d.origin]=this.origin),e[d.signData]=this.signData,e[d.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[d.derivationPath]=t,new r.DataItem(e)},this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin}static constructETHRequest(e,n,s,o,i,l,u,c){const d=s.replace(/[m|M]\//,"").split("/"),m=new r.CryptoKeypath(d.map((e=>{const t=parseInt(e.replace("'",""));let n=!1;return e.endsWith("'")&&(n=!0),new r.PathComponent({index:t,hardened:n})})),t.from(o,"hex"));return new p({requestId:i?t.from(a.parse(i)):undefined,signData:e,dataType:n,derivationPath:m,chainId:l,address:u?t.from(u.replace("0x",""),"hex"):undefined,origin:c||undefined})}}p.fromDataItem=e=>{const t=e.getData(),n=t[d.signData],s=t[d.dataType],a=r.CryptoKeypath.fromDataItem(t[d.derivationPath]),o=t[d.chainId]?t[d.chainId]:undefined,i=t[d.address]?t[d.address]:undefined,l=t[d.requestId]?t[d.requestId].getData():undefined,u=t[d.origin]?t[d.origin]:undefined;return new p({requestId:l,signData:n,dataType:s,chainId:o,derivationPath:a,address:i,origin:u})},p.fromCBOR=e=>{const t=u(e);return p.fromDataItem(t)};const{RegistryTypes:f,decodeToDataItem:h}=r.extend;var g;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature",e[e.origin=3]="origin"}(g||(g={}));class y extends r.RegistryItem{constructor(e,t,n){super(),this.getRegistryType=()=>l.ETH_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};return this.requestId&&(e[g.requestId]=new r.DataItem(this.requestId,f.UUID.getTag())),this.origin&&(e[g.origin]=this.origin),e[g.signature]=this.signature,new r.DataItem(e)},this.signature=e,this.requestId=t,this.origin=n}}y.fromDataItem=e=>{const t=e.getData(),n=t[g.signature],s=t[g.requestId]?t[g.requestId].getData():undefined;return new y(n,s,t[g.origin])},y.fromCBOR=e=>{const t=h(e);return y.fromDataItem(t)};const{decodeToDataItem:k}=r.extend;var T;!function(e){e[e.chainId=1]="chainId",e[e.contractAddress=2]="contractAddress",e[e.contractName=3]="contractName",e[e.name=4]="name",e[e.mediaData=5]="mediaData"}(T||(T={}));class v extends r.RegistryItem{constructor(e){super(),this.getRegistryType=()=>l.ETH_NFT_ITEM,this.getChainId=()=>this.chainId,this.getName=()=>this.name,this.getmediaData=()=>this.mediaData,this.getContractAddress=()=>this.contractAddress,this.getContractName=()=>this.contractName,this.toDataItem=()=>{const e={};return e[T.chainId]=this.chainId,e[T.name]=this.name,e[T.contractAddress]=this.contractAddress,e[T.contractName]=this.contractName,e[T.mediaData]=this.mediaData,new r.DataItem(e)},this.chainId=e.chainId,this.name=e.name,this.contractAddress=e.contractAddress,this.contractName=e.contractName,this.mediaData=e.mediaData}static constructETHNFTItem(e,t,n,s,r){return new v({chainId:e,contractAddress:t,contractName:n,mediaData:r,name:s})}}v.fromDataItem=e=>{const t=e.getData(),n=t[T.chainId],s=t[T.name],r=t[T.mediaData],a=t[T.contractAddress],o=t[T.contractName];return new v({chainId:n,name:s,contractAddress:a,contractName:o,mediaData:r})},v.fromCBOR=e=>{const t=k(e);return v.fromDataItem(t)};const b=(e,n)=>{const s=o.fromExtendedKey(e).derive(n),r="0x"+t.from(i.publicToAddress(s.publicKey,!0)).toString("hex");return i.toChecksumAddress(r)};r.patchTags(Object.values(l).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(r).forEach((function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})})),n.ETHNFTItem=v,n.ETHSignature=y,n.EthSignRequest=p,n.findHDPathFromAddress=(e,t,n,s)=>{for(let r=0;r<n;r++){const n=b(t,`M/0/${r}`);if(e.toLowerCase()==n.toLowerCase())return`${s}/0/${r}`}return null},n.generateAddressFromXpub=b}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/bc-ur-registry-eth/dist/bc-ur-registry-eth.cjs.development.js"}],[6800,{"../../shared/modules/transaction.utils":5679,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenData=function(e,t=!0){return(0,s.useMemo)((()=>t&&e?(0,r.parseStandardTokenTransactionData)(e):null),[t,e])};var s=e("react"),r=e("../../shared/modules/transaction.utils")}}},{package:"$root$",file:"ui/hooks/useTokenData.js"}],[6801,{"../ducks/metamask/metamask":6651,"../selectors":7403,"../store/actions":7421,"./useMultiPolling":6780,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=e("react-redux"),a=e("../selectors"),o=e("../store/actions"),i=e("../ducks/metamask/metamask"),l=(s=e("./useMultiPolling"))&&s.__esModule?s:{default:s};n.default=()=>{const e=(0,r.useSelector)(a.getUseTokenDetection),t=(0,r.useSelector)(i.getCompletedOnboarding),n=(0,r.useSelector)(i.getIsUnlocked),s=(0,r.useSelector)(a.getChainIdsToPoll),u=t&&n&&e;return(0,l.default)({startPolling:o.tokenDetectionStartPolling,stopPollingByPollingToken:o.tokenDetectionStopPollingByPollingToken,input:u?[s]:[]}),{}}}}},{package:"$root$",file:"ui/hooks/useTokenDetectionPolling.ts"}],[6802,{"../../shared/lib/metamask-controller-utils":5638,"../../shared/lib/transactions-controller-utils":5650,"./useTokenData":6800,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenDisplayValue=function(e,t,n=!0){const i=(0,o.useTokenData)(e,n),l=(0,r.getTokenValueParam)(i),u=Boolean(n&&e&&t&&null!==t.decimals&&t.decimals!==undefined&&l);return(0,s.useMemo)((()=>u?(0,a.calcTokenAmount)(l,t.decimals).toString(10):null),[u,l,t])};var s=e("react"),r=e("../../shared/lib/metamask-controller-utils"),a=e("../../shared/lib/transactions-controller-utils"),o=e("./useTokenData")}}},{package:"$root$",file:"ui/hooks/useTokenDisplayValue.js"}],[6804,{"../ducks/metamask/metamask":6651,"../selectors":7403,"../store/actions":7421,"./useMultiPolling":6780,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=e("react-redux"),a=e("../selectors"),o=e("../store/actions"),i=e("../ducks/metamask/metamask"),l=(s=e("./useMultiPolling"))&&s.__esModule?s:{default:s};n.default=()=>{const e=(0,r.useSelector)(a.getUseTokenDetection),t=(0,r.useSelector)(a.getUseTransactionSimulations),n=(0,r.useSelector)(i.getCompletedOnboarding),s=(0,r.useSelector)(i.getIsUnlocked),u=(0,r.useSelector)(a.getUseExternalServices),c=(0,r.useSelector)(a.getChainIdsToPoll),d=n&&s&&u&&(e||t);return(0,l.default)({startPolling:o.tokenListStartPolling,stopPollingByPollingToken:o.tokenListStopPollingByPollingToken,input:d?c:[]}),{}}}}},{package:"$root$",file:"ui/hooks/useTokenListPolling.ts"}],[6805,{"../ducks/metamask/metamask":6651,"../selectors":7403,"../store/actions":7421,"./useMultiPolling":6780,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=e("react-redux"),a=e("../selectors"),o=e("../store/actions"),i=e("../ducks/metamask/metamask"),l=(s=e("./useMultiPolling"))&&s.__esModule?s:{default:s};n.default=()=>{const e=(0,r.useSelector)(i.getCompletedOnboarding),t=(0,r.useSelector)(i.getIsUnlocked),n=(0,r.useSelector)(a.getUseCurrencyRateCheck),s=(0,r.useSelector)(a.getChainIdsToPoll),u=(0,r.useSelector)(a.getTokenExchangeRates),c=(0,r.useSelector)(a.getTokensMarketData),d=(0,r.useSelector)(a.getMarketData),m=e&&t&&n;return(0,l.default)({startPolling:o.tokenRatesStartPolling,stopPollingByPollingToken:o.tokenRatesStopPollingByPollingToken,input:m?s:[]}),{tokenExchangeRates:u,tokensMarketData:c,marketData:d}}}}},{package:"$root$",file:"ui/hooks/useTokenRatesPolling.ts"}],[6806,{"../../shared/constants/time":5617,"../../shared/modules/selectors/networks":5674,"../../shared/modules/string-utils":5677,"../selectors":7403,"./useEqualityCheck":6768,"@metamask/eth-token-tracker":1873,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenTracker=function({tokens:e,address:t,includeFailedTokens:n=!1,hideZeroBalanceTokens:s=!1}){const{chainId:m,rpcUrl:p}=(0,o.useSelector)(l.getProviderConfig),{address:f}=(0,o.useSelector)(i.getSelectedInternalAccount,o.shallowEqual),h=t??f,[g,y]=(0,r.useState)((()=>(null==e?void 0:e.length)>=0)),[k,T]=(0,r.useState)([]),[v,b]=(0,r.useState)(null),S=(0,r.useRef)(null),C=(0,d.useEqualityCheck)(e),w=(0,r.useCallback)((e=>{const t=(s?e.filter((e=>Number(e.balance)>0)):e).map((e=>{const t=C.find((t=>(0,c.isEqualCaseInsensitive)(t.address,e.address)));return{...e,isERC721:null==t?void 0:t.isERC721,image:null==t?void 0:t.image}}));T(t),y(!1),b(null)}),[s,C]),E=(0,r.useCallback)((e=>{b(e),y(!1)}),[]),x=(0,r.useCallback)((()=>{S.current&&(S.current.stop(),S.current.removeAllListeners("update"),S.current.removeAllListeners("error"),S.current=null)}),[]),I=(0,r.useCallback)(((e,t)=>{x(),S.current=new a.default({userAddress:e,provider:global.ethereumProvider,tokens:t,includeFailedTokens:n,pollingInterval:8*u.SECOND,balanceDecimals:5}),S.current.on("update",w),S.current.on("error",E),S.current.updateBalances()}),[w,n,E,x]);return(0,r.useEffect)((()=>x),[x]),(0,r.useEffect)((()=>{y(!0),h&&m!==undefined&&global.ethereumProvider?(0===C.length&&w([]),I(h,C)):x()}),[h,x,m,p,C,w,I]),{loading:g,tokensWithBalances:k,error:v}};var s,r=e("react"),a=(s=e("@metamask/eth-token-tracker"))&&s.__esModule?s:{default:s},o=e("react-redux"),i=e("../selectors"),l=e("../../shared/modules/selectors/networks"),u=e("../../shared/constants/time"),c=e("../../shared/modules/string-utils"),d=e("./useEqualityCheck")}}},{package:"$root$",file:"ui/hooks/useTokenTracker.js"}],[6807,{"../../shared/constants/network":5604,"../../shared/constants/swaps":5615,"../../shared/modules/hexstring-utils":5663,"../../shared/modules/selectors/networks":5674,"../../shared/modules/swaps.utils":5678,"../ducks/metamask/metamask":6651,"../ducks/swaps/swaps":6659,"../helpers/utils/token-util":6709,"../selectors":7403,"./useEqualityCheck":6768,"@metamask/assets-controllers":1351,"bignumber.js":3847,lodash:4725,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRenderableTokenData=T,n.useTokensToSearch=function({usersTokens:e=[],topTokens:t={},shuffledTokensList:n,tokenBucketPriority:s=g.TokenBucketPriority.owned}){const l=(0,a.useSelector)(d.getCurrentChainId),u=(0,a.useSelector)(c.getTokenExchangeRates,i.isEqual),h=(0,a.useSelector)(m.getConversionRate),y=(0,a.useSelector)(m.getCurrentCurrency),v=(0,a.useSelector)(c.getSwapsDefaultToken,a.shallowEqual),b=(0,a.useSelector)(c.getTokenList,i.isEqual),S=(0,k.useEqualityCheck)(t),C=(0,k.useEqualityCheck)(e),w=T(v,u,h,y,l,b),E=(0,k.useEqualityCheck)(w),x=(0,a.useSelector)(p.getSwapsTokens,i.isEqual)||[],I=x.length?x:[E,...n.filter((e=>e.symbol!==E.symbol))],A=(0,k.useEqualityCheck)(I);return(0,r.useMemo)((()=>{const e=C.reduce(((e,t)=>({...e,[t.address.toLowerCase()]:t})),{}),t={owned:[],top:[],others:[]};return(0,i.uniqBy)([E,...A,...C],(e=>e.address.toLowerCase())).forEach((n=>{const r=T({...e[n.address.toLowerCase()],...n},u,h,y,l,b);s===g.TokenBucketPriority.owned?(0,f.isSwapsDefaultTokenSymbol)(r.symbol,l)||e[n.address.toLowerCase()]?t.owned.push(r):S[n.address.toLowerCase()]?t.top[S[n.address.toLowerCase()].index]=r:t.others.push(r):S[n.address.toLowerCase()]?t.top[S[n.address.toLowerCase()].index]=r:(0,f.isSwapsDefaultTokenSymbol)(r.symbol,l)||e[n.address.toLowerCase()]?t.owned.push(r):t.others.push(r)})),t.owned=t.owned.sort((({rawFiat:e},{rawFiat:t})=>new o.default(e||0).gt(t||0)?-1:1)),t.top=t.top.filter(Boolean),s===g.TokenBucketPriority.owned?[...t.owned,...t.top,...t.others]:[...t.top,...t.owned,...t.others]}),[A,C,S,u,h,y,E,l,b,s])};var s,r=e("react"),a=e("react-redux"),o=(s=e("bignumber.js"))&&s.__esModule?s:{default:s},i=e("lodash"),l=e("@metamask/assets-controllers"),u=e("../helpers/utils/token-util"),c=e("../selectors"),d=e("../../shared/modules/selectors/networks"),m=e("../ducks/metamask/metamask"),p=e("../ducks/swaps/swaps"),f=e("../../shared/modules/swaps.utils"),h=e("../../shared/modules/hexstring-utils"),g=e("../../shared/constants/swaps"),y=e("../../shared/constants/network"),k=e("./useEqualityCheck");function T(e,t,n,s,r,a){var i,c;const{symbol:d,name:m,address:p,iconUrl:g,string:k,balance:T,decimals:v}=e;let b;(0,f.isSwapsDefaultTokenSymbol)(d,r)?b=1:k&&n>0&&(b=t[(0,h.toChecksumHexAddress)(p)]);const S=(0,u.getTokenFiatAmount)(b,n,s,k,d,!0)||"",C=S?(0,u.getTokenFiatAmount)(b,n,s,k,d,!1):"",w=r===y.CHAIN_IDS.SEPOLIA?y.CHAIN_IDS.MAINNET:r,E=(d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.MAINNET||d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.SEPOLIA||d===y.CURRENCY_SYMBOLS.BNB&&r===y.CHAIN_IDS.BSC||d===y.CURRENCY_SYMBOLS.MATIC&&r===y.CHAIN_IDS.POLYGON||d===y.CURRENCY_SYMBOLS.AVALANCHE&&r===y.CHAIN_IDS.AVALANCHE||d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.OPTIMISM||d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.ARBITRUM||d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.LINEA_MAINNET||d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.ZKSYNC_ERA||d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.BASE?g:(0,l.formatIconUrlWithProxy)({chainId:w,tokenAddress:p||""}))||(null==e?void 0:e.image);return{...e,primaryLabel:d,secondaryLabel:m||(null===(i=a[null==p?void 0:p.toLowerCase()])||void 0===i?void 0:i.name),rightPrimaryLabel:k&&`${new o.default(k).round(6).toString()} ${d}`,rightSecondaryLabel:S,iconUrl:E,identiconAddress:E?null:p,balance:T,decimals:v,name:m||(null===(c=a[null==p?void 0:p.toLowerCase()])||void 0===c?void 0:c.name),rawFiat:C,image:e.image||e.iconUrl}}}}},{package:"$root$",file:"ui/hooks/useTokensToSearch.js"}],[6808,{"../../shared/constants/bridge":5590,"../../shared/constants/transaction":5619,"../../shared/lib/metamask-controller-utils":5638,"../../shared/modules/string-utils":5677,"../ducks/bridge-status/selectors":6638,"../ducks/locale/locale":6650,"../ducks/metamask/metamask":6651,"../helpers/constants/common":6661,"../helpers/constants/transactions":6675,"../helpers/utils/common.util":6689,"../helpers/utils/token-util":6709,"../helpers/utils/transactions.util":6710,"../helpers/utils/util":6712,"../pages/bridge/hooks/useBridgeTokenDisplayData":6828,"../pages/confirmations/components/simulation-details/formatAmount":7031,"../selectors/selectors":7413,"../store/actions":7421,"./bridge/useBridgeChainInfo":6723,"./useCurrencyDisplay":6764,"./useCurrentAsset":6766,"./useI18nContext":6775,"./useSwappedTokenValue":6796,"./useTokenData":6800,"./useTokenDisplayValue":6802,"./useTokenFiatAmount":6803,"./useUserPreferencedCurrency":6809,"@metamask/transaction-controller":2773,"bignumber.js":3847,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTransactionDisplayData=function(e){var t,n,N,B,R,F,j,L,$,q,U;const W=(0,s.useDispatch)(),H=(0,s.useSelector)(S.getIntlLocale),V=(0,P.useCurrentAsset)(),z=(0,s.useSelector)(i.getAllTokens),G=(0,s.useSelector)(i.getSelectedAddress),Q=(0,s.useSelector)(f.getNfts),K=(0,s.useSelector)(i.getAllDetectedTokens),J=(0,s.useSelector)(i.selectERC20TokensByChain),Y=(0,w.useI18nContext)(),X=(0,s.useSelector)(T.selectBridgeHistoryForAccount),Z=e.initialTransaction.id,ee=X[Z],{destNetwork:te}=(0,D.default)({bridgeHistoryItem:ee,srcTxMeta:e.initialTransaction}),ne=C.NETWORK_TO_SHORT_NETWORK_NAME_MAP[null==te?void 0:te.chainId],{initialTransaction:se,primaryTransaction:re}=e,{type:ae}=se,{from:oe,to:ie}=se.txParams||{},le=(0,s.useSelector)((e=>{var t;return(0,i.getKnownMethodData)(e,null==se||null===(t=se.txParams)||void 0===t?void 0:t.data)}))||{},ue=(0,l.getStatusKey)(re),ce=ue in p.PENDING_STATUS_HASH,de=ue===a.TransactionStatus.submitted,me=(0,r.useRef)(!0),pe=null===(t=re.txParams)||void 0===t?void 0:t.value,fe=(0,m.formatDateWithYearContext)(se.time);let he,ge="-",ye=!1,ke=ie;const Te=p.TOKEN_CATEGORY_HASH[ae];let ve=null;const[be,Se]=(0,r.useState)(null);var Ce,we,Ee,xe,Ie,Ae;Te&&(ve=(null==z||null===(Ce=z[null==e||null===(we=e.initialTransaction)||void 0===we?void 0:we.chainId])||void 0===Ce||null===(Ce=Ce[G])||void 0===Ce?void 0:Ce.find((({address:e})=>(0,y.isEqualCaseInsensitive)(e,ke))))||(null==K||null===(Ee=K[null==e||null===(xe=e.initialTransaction)||void 0===xe?void 0:xe.chainId])||void 0===Ee||null===(Ee=Ee[G])||void 0===Ee?void 0:Ee.find((({address:e})=>(0,y.isEqualCaseInsensitive)(e,ke))))||(null==J||null===(Ie=J[null==e||null===(Ae=e.initialTransaction)||void 0===Ae?void 0:Ae.chainId])||void 0===Ie||null===(Ie=Ie.data)||void 0===Ie?void 0:Ie[ke.toLowerCase()]));(0,r.useEffect)((()=>()=>{me.current=!1}),[]),(0,r.useEffect)((()=>{!async function(){if(Te&&!ve){var e;const t=await(0,d.getAssetDetails)(ie,oe,null==se||null===(e=se.txParams)||void 0===e?void 0:e.data,Q);!0===me.current&&Se(t)}}()}),[Te,ve,ke,oe,null==se||null===(n=se.txParams)||void 0===n?void 0:n.data,Q,ie,me]),be&&(ve={address:be.toAddress,symbol:be.symbol,decimals:be.decimals});const _e=(0,_.useTokenData)(null==se||null===(N=se.txParams)||void 0===N?void 0:N.data,Te),Me=(0,d.getTokenIdParam)(_e)??(0,k.getTokenValueParam)(_e),Pe=Te&&Q.find((({address:e,tokenId:t})=>(0,y.isEqualCaseInsensitive)(e,ke)&&t===Me)),De=(0,A.useTokenDisplayValue)(null==re||null===(B=re.txParams)||void 0===B?void 0:B.data,ve,Te),Ne=(0,E.useTokenFiatAmount)(null===(R=ve)||void 0===R?void 0:R.address,De,null===(F=ve)||void 0===F?void 0:F.symbol),Oe=(0,m.stripHttpSchemes)(se.origin||(null===(j=se.msgParams)||void 0===j?void 0:j.origin)||"");let Be,Re,Fe=Te?null===(L=ve)||void 0===L?void 0:L.symbol:undefined,je=Te?De:undefined,Le=Te?Ne:undefined;const{swapTokenValue:$e,isNegative:qe,swapTokenFiatAmount:Ue,isViewingReceivedTokenFromSwap:We}=(0,M.useSwappedTokenValue)(e,V),He=(0,v.useBridgeTokenDisplayData)(e);if(O.includes(ae))Be=h.TransactionGroupCategory.signatureRequest,Re=Y("signatureRequest"),he=Oe,ye=!0;else if(ae===a.TransactionType.swap)Be=h.TransactionGroupCategory.swap,Re=Y("swapTokenToToken",[se.sourceTokenSymbol,se.destinationTokenSymbol]),he=Oe,ye=!0,Fe=We?V.symbol:se.sourceTokenSymbol,je=$e,Le=Ue,ge=qe?"":We?"+":"-";else if(ae===a.TransactionType.swapAndSend){const e=se.swapAndSendRecipient===oe;ke=se.swapAndSendRecipient,Be=h.TransactionGroupCategory.swapAndSend,Re=Y("sendTokenAsToken",[se.sourceTokenSymbol,se.destinationTokenSymbol]),he=Oe,ye=!0,Fe=We&&e?V.symbol:se.sourceTokenSymbol,je=$e,Le=Ue,ge=qe?"":We&&e?"+":"-"}else if(ae===a.TransactionType.swapApproval)Be=h.TransactionGroupCategory.approval,Re=Y("swapApproval",[re.sourceTokenSymbol]),he=Oe,ye=!0,Fe=re.sourceTokenSymbol;else if(ae===a.TransactionType.tokenMethodApprove){var Ve;Be=h.TransactionGroupCategory.approval,ge="",Re=Y("approveSpendingCap",[(null===(Ve=ve)||void 0===Ve?void 0:Ve.symbol)||Y("token").toLowerCase()]),he=Oe,ye=!0}else if(ae===a.TransactionType.tokenMethodSetApprovalForAll){var ze,Ge,Qe;const e=!(null!=_e&&null!==(ze=_e.args)&&void 0!==ze&&ze[1]);Be=h.TransactionGroupCategory.approval,ge="",Re=e?Y("revokePermissionTitle",[(null===(Ge=ve)||void 0===Ge?void 0:Ge.symbol)||(null==Pe?void 0:Pe.name)||Y("token")]):Y("setApprovalForAllTitle",[(null===(Qe=ve)||void 0===Qe?void 0:Qe.symbol)||Y("token")]),he=Oe,ye=!0}else if(ae===a.TransactionType.tokenMethodIncreaseAllowance){var Ke;Be=h.TransactionGroupCategory.approval,ge="",Re=Y("approveIncreaseAllowance",[(null===(Ke=ve)||void 0===Ke?void 0:Ke.symbol)||Y("token")]),he=Oe,ye=!0}else if(ae===a.TransactionType.contractInteraction||ae===a.TransactionType.batch||ae===a.TransactionType.revokeDelegation){Be=h.TransactionGroupCategory.interaction;const e=(0,l.getTransactionTypeTitle)(Y,ae);Re=(null==le?void 0:le.name)&&(0,u.camelCaseToCapitalize)(le.name)||e,he=Oe,ye=!0}else if(ae===a.TransactionType.deployContract)Be=h.TransactionGroupCategory.interaction,Re=(0,l.getTransactionTypeTitle)(Y,ae),he=Oe,ye=!0;else if(ae===a.TransactionType.incoming)Be=h.TransactionGroupCategory.receive,Re=Y("receive"),ge="",he=Y("fromAddress",[(0,m.shortenAddress)(oe)]);else if(ae===a.TransactionType.tokenMethodTransferFrom||ae===a.TransactionType.tokenMethodTransfer){var Je;Be=h.TransactionGroupCategory.send,Re=Y("sendSpecifiedTokens",[(null===(Je=ve)||void 0===Je?void 0:Je.symbol)||(null==Pe?void 0:Pe.name)||Y("token")]),ke=(0,d.getTokenAddressParam)(_e),he=Y("toAddress",[(0,m.shortenAddress)(ke)])}else ae===a.TransactionType.tokenMethodSafeTransferFrom?(Be=h.TransactionGroupCategory.send,Re=Y("safeTransferFrom"),ke=(0,d.getTokenAddressParam)(_e),he=Y("toAddress",[(0,m.shortenAddress)(ke)])):ae===a.TransactionType.simpleSend?(Be=h.TransactionGroupCategory.send,Re=Y("send"),he=Y("toAddress",[(0,m.shortenAddress)(ke)])):ae===a.TransactionType.bridgeApproval?(Re=Y("bridgeApproval"),Be=h.TransactionGroupCategory.approval,Re=Y("bridgeApproval",[re.sourceTokenSymbol]),he=Oe,ye=!0,Fe=re.sourceTokenSymbol):ae===a.TransactionType.bridge?(Re=Y("bridgeToChain",[ne||""]),Be=He.category,Fe=He.sourceTokenSymbol,je=(0,b.formatAmount)(H,new o.default(He.sourceTokenAmountSent??0)),Le=He.displayCurrencyAmount):W((0,g.captureSingleException)(`useTransactionDisplayData does not recognize transaction type. Type received is: ${ae}`));const Ye=(0,x.useUserPreferencedCurrency)(c.PRIMARY,{},null==e||null===($=e.initialTransaction)||void 0===$?void 0:$.chainId),Xe=(0,x.useUserPreferencedCurrency)(c.SECONDARY),[Ze]=(0,I.useCurrencyDisplay)(pe,{prefix:ge,displayValue:je,suffix:Fe,...Ye},null==e||null===(q=e.initialTransaction)||void 0===q?void 0:q.chainId),[et]=(0,I.useCurrencyDisplay)(pe,{prefix:ge,displayValue:Le,hideLabel:Te||Boolean($e),...Xe},null==e||null===(U=e.initialTransaction)||void 0===U?void 0:U.chainId);return{title:Re,category:Be,date:fe,subtitle:he,subtitleContainsOrigin:ye,primaryCurrency:ae===a.TransactionType.swap&&ce?"":Ze,senderAddress:oe,recipientAddress:ke,secondaryCurrency:Te&&!Ne||[a.TransactionType.swap,a.TransactionType.swapAndSend].includes(ae)&&!Ue?undefined:et,displayedStatusKey:ue,isPending:ce,isSubmitted:de}};var s=e("react-redux"),r=e("react"),a=e("@metamask/transaction-controller"),o=N(e("bignumber.js")),i=e("../selectors/selectors"),l=e("../helpers/utils/transactions.util"),u=e("../helpers/utils/common.util"),c=e("../helpers/constants/common"),d=e("../helpers/utils/token-util"),m=e("../helpers/utils/util"),p=e("../helpers/constants/transactions"),f=e("../ducks/metamask/metamask"),h=e("../../shared/constants/transaction"),g=e("../store/actions"),y=e("../../shared/modules/string-utils"),k=e("../../shared/lib/metamask-controller-utils"),T=e("../ducks/bridge-status/selectors"),v=e("../pages/bridge/hooks/useBridgeTokenDisplayData"),b=e("../pages/confirmations/components/simulation-details/formatAmount"),S=e("../ducks/locale/locale"),C=e("../../shared/constants/bridge"),w=e("./useI18nContext"),E=e("./useTokenFiatAmount"),x=e("./useUserPreferencedCurrency"),I=e("./useCurrencyDisplay"),A=e("./useTokenDisplayValue"),_=e("./useTokenData"),M=e("./useSwappedTokenValue"),P=e("./useCurrentAsset"),D=N(e("./bridge/useBridgeChainInfo"));function N(e){return e&&e.__esModule?e:{default:e}}const O=[null,undefined,a.TransactionType.sign,a.TransactionType.personalSign,a.TransactionType.signTypedData,a.TransactionType.ethDecrypt,a.TransactionType.ethGetEncryptionPublicKey]}}},{package:"$root$",file:"ui/hooks/useTransactionDisplayData.js"}],[6809,{"../../shared/constants/common":5591,"../../shared/constants/network":5604,"../constants":6620,"../helpers/constants/common":6661,"../selectors":7403,"../selectors/multichain":7407,"./useMultichainSelector":6783,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useUserPreferencedCurrency=function(e,t={},n=null){const d=(0,s.useSelector)(r.getSelectedInternalAccount),m=t.account??d,p=(0,c.useMultichainSelector)(a.getMultichainNativeCurrency,m),{showNativeTokenAsMainBalance:f}=(0,s.useSelector)(r.getPreferences,s.shallowEqual),h=(0,c.useMultichainSelector)(a.getMultichainShouldShowFiat,m),g={currency:(0,c.useMultichainSelector)(a.getMultichainCurrentCurrency,m),numberOfDecimals:t.numberOfDecimals||t.fiatNumberOfDecimals||2},y={currency:n?u.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[n]||p||i.EtherDenomination.ETH:p||i.EtherDenomination.ETH,numberOfDecimals:t.numberOfDecimals||t.ethNumberOfDecimals||l.ETH_DEFAULT_DECIMALS};if(t.showNativeOverride)return y;if(t.showFiatOverride)return g;if(!h)return y;if(t.shouldCheckShowNativeToken&&f||!t.shouldCheckShowNativeToken)return e===o.PRIMARY?y:g;return e===o.PRIMARY?g:y};var s=e("react-redux"),r=e("../selectors"),a=e("../selectors/multichain"),o=e("../helpers/constants/common"),i=e("../../shared/constants/common"),l=e("../constants"),u=e("../../shared/constants/network"),c=e("./useMultichainSelector")}}},{package:"$root$",file:"ui/hooks/useUserPreferencedCurrency.js"}],[681,{"@ethereumjs/util":476,"@keystonehq/bc-ur-registry":702,buffer:3943,hdkey:4502,uuid:5533},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var s,r=e("@keystonehq/bc-ur-registry"),a=e("uuid"),o=(s=e("hdkey"))&&"object"==typeof s&&"default"in s?s.default:s,i=e("@ethereumjs/util");const l={ETH_SIGN_REQUEST:new r.RegistryType("eth-sign-request",401),ETH_SIGNATURE:new r.RegistryType("eth-signature",402),ETH_NFT_ITEM:new r.RegistryType("eth-nft-item",403)},{decodeToDataItem:u,RegistryTypes:c}=r.extend;var d,m;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(d||(d={})),(m=n.DataType||(n.DataType={}))[m.transaction=1]="transaction",m[m.typedData=2]="typedData",m[m.personalMessage=3]="personalMessage",m[m.typedTransaction=4]="typedTransaction";class p extends r.RegistryItem{constructor(e){super(),this.getRegistryType=()=>l.ETH_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSourceFingerprint=()=>this.derivationPath.getSourceFingerprint(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[d.requestId]=new r.DataItem(this.requestId,c.UUID.getTag())),this.address&&(e[d.address]=this.address),this.chainId&&(e[d.chainId]=Number(this.chainId)),this.origin&&(e[d.origin]=this.origin),e[d.signData]=this.signData,e[d.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[d.derivationPath]=t,new r.DataItem(e)},this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin}static constructETHRequest(e,n,s,o,i,l,u,c){const d=s.replace(/[m|M]\//,"").split("/"),m=new r.CryptoKeypath(d.map((e=>{const t=parseInt(e.replace("'",""));let n=!1;return e.endsWith("'")&&(n=!0),new r.PathComponent({index:t,hardened:n})})),t.from(o,"hex"));return new p({requestId:i?t.from(a.parse(i)):void 0,signData:e,dataType:n,derivationPath:m,chainId:l,address:u?t.from(u.replace("0x",""),"hex"):void 0,origin:c||void 0})}}p.fromDataItem=e=>{const t=e.getData(),n=t[d.signData],s=t[d.dataType],a=r.CryptoKeypath.fromDataItem(t[d.derivationPath]),o=t[d.chainId]?t[d.chainId]:void 0,i=t[d.address]?t[d.address]:void 0,l=t[d.requestId]?t[d.requestId].getData():void 0;return new p({requestId:l,signData:n,dataType:s,chainId:o,derivationPath:a,address:i,origin:t[d.origin]?t[d.origin]:void 0})},p.fromCBOR=e=>{const t=u(e);return p.fromDataItem(t)};const{RegistryTypes:f,decodeToDataItem:h}=r.extend;var g;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature",e[e.origin=3]="origin"}(g||(g={}));class y extends r.RegistryItem{constructor(e,t,n){super(),this.getRegistryType=()=>l.ETH_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};return this.requestId&&(e[g.requestId]=new r.DataItem(this.requestId,f.UUID.getTag())),this.origin&&(e[g.origin]=this.origin),e[g.signature]=this.signature,new r.DataItem(e)},this.signature=e,this.requestId=t,this.origin=n}}y.fromDataItem=e=>{const t=e.getData(),n=t[g.signature],s=t[g.requestId]?t[g.requestId].getData():void 0;return new y(n,s,t[g.origin])},y.fromCBOR=e=>{const t=h(e);return y.fromDataItem(t)};const{decodeToDataItem:k}=r.extend;var T;!function(e){e[e.chainId=1]="chainId",e[e.contractAddress=2]="contractAddress",e[e.contractName=3]="contractName",e[e.name=4]="name",e[e.mediaData=5]="mediaData"}(T||(T={}));class v extends r.RegistryItem{constructor(e){super(),this.getRegistryType=()=>l.ETH_NFT_ITEM,this.getChainId=()=>this.chainId,this.getName=()=>this.name,this.getmediaData=()=>this.mediaData,this.getContractAddress=()=>this.contractAddress,this.getContractName=()=>this.contractName,this.toDataItem=()=>{const e={};return e[T.chainId]=this.chainId,e[T.name]=this.name,e[T.contractAddress]=this.contractAddress,e[T.contractName]=this.contractName,e[T.mediaData]=this.mediaData,new r.DataItem(e)},this.chainId=e.chainId,this.name=e.name,this.contractAddress=e.contractAddress,this.contractName=e.contractName,this.mediaData=e.mediaData}static constructETHNFTItem(e,t,n,s,r){return new v({chainId:e,contractAddress:t,contractName:n,mediaData:r,name:s})}}v.fromDataItem=e=>{const t=e.getData();return new v({chainId:t[T.chainId],name:t[T.name],contractAddress:t[T.contractAddress],contractName:t[T.contractName],mediaData:t[T.mediaData]})},v.fromCBOR=e=>{const t=k(e);return v.fromDataItem(t)};const b=(e,n)=>{const s=o.fromExtendedKey(e).derive(n),r="0x"+t.from(i.publicToAddress(s.publicKey,!0)).toString("hex");return i.toChecksumAddress(r)};r.patchTags(Object.values(l).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(r).forEach((function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})})),n.ETHNFTItem=v,n.ETHSignature=y,n.EthSignRequest=p,n.findHDPathFromAddress=(e,t,n,s)=>{for(let r=0;r<n;r++){const n=b(t,"M/0/"+r);if(e.toLowerCase()==n.toLowerCase())return`${s}/0/${r}`}return null},n.generateAddressFromXpub=b}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/bc-ur-registry-eth/dist/bc-ur-registry-eth.cjs.production.min.js"}],[6810,{react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useWindowFocus=void 0;var s=e("react");n.useWindowFocus=()=>{const[e,t]=(0,s.useState)(document.hasFocus());return(0,s.useEffect)((()=>{const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("focus",e),window.addEventListener("blur",n),()=>{window.removeEventListener("focus",e),window.removeEventListener("blur",n)}}),[]),e}}}},{package:"$root$",file:"ui/hooks/useWindowFocus.ts"}],[6811,{"../app/scripts/constants/sentry-state":7,"../app/scripts/lib/util":204,"../shared/constants/alerts":5587,"../shared/constants/app":5589,"../shared/constants/copy":5592,"../shared/lib/error-utils":5633,"../shared/lib/multichain/chain-agnostic-permission-utils/caip-accounts":5640,"../shared/lib/switch-direction":5646,"../shared/lib/trace":5648,"../shared/modules/object.utils":5668,"../shared/modules/selectors/networks":5674,"./ducks/alerts":6633,"./ducks/metamask/metamask":6651,"./helpers/utils/tags":6708,"./helpers/utils/tx-helper":6711,"./pages":7169,"./selectors":7403,"./store/actions":7421,"./store/background-connection":7422,"./store/store":7424,"copy-to-clipboard":4012,lodash:4725,loglevel:4733,react:5129,"react-dom":4958,util:5532,"webextension-polyfill":5566},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function(e){const{backgroundConnection:t,traceContext:n}=e,r=await(0,k.trace)({name:k.TraceName.GetState,parentContext:n},(()=>(0,s.promisify)(t.getState.bind(t))())),a=await async function(e,t,n){const{traceContext:s}=n,r=(0,_.getStartupTraceTags)({metamask:e}),a=await(0,k.trace)({name:k.TraceName.SetupStore,parentContext:s,tags:r},(()=>O(e,t,n.activeTab)));return global.metamask={updateCurrentLocale:e=>{a.dispatch(b.updateCurrentLocale(e))},setFeatureFlag:(e,t)=>{a.dispatch(b.setFeatureFlag(e,t))}},await(0,k.trace)({name:k.TraceName.InitialActions,parentContext:s},(()=>async function(e){const t=e.getState(),n=(0,C.getNetworkToAutomaticallySwitchTo)(t);n?await e.dispatch(b.automaticallySwitchNetwork(n,(0,C.getOriginOfCurrentTab)(t))):(0,C.getSwitchedNetworkDetails)(t)&&await e.dispatch(b.clearSwitchedNetworkDetails());if((0,c.getEnvironmentType)()===f.ENVIRONMENT_TYPE_POPUP){const t=Date.now();global.metamask.id=t,await e.dispatch(b.setCurrentExtensionPopupId(t))}}(a))),(0,k.trace)({name:k.TraceName.FirstRender,parentContext:s},(()=>(0,l.render)(i.default.createElement(x.default,{store:a}),n.container))),a}(r,t,e);return await(0,s.promisify)(t.startPatches.bind(t))(),function(e){0;window.stateHooks.getCleanAppState=async function(){const t=(0,o.clone)(e.getState());return t.version=global.platform.getVersion(),t.browser=window.navigator.userAgent,t},window.stateHooks.getSentryAppState=function(){const t=e.getState();return(0,m.maskObject)(t,p.SENTRY_UI_STATE)},window.stateHooks.getLogs=function(){const t=e.getState(),{logs:n}=t.metamask;return Object.values(n).sort(((e,t)=>e.timestamp-t.timestamp))}}(a),a},n.setupInitialStore=O,n.updateBackgroundConnection=void 0;var s=e("util"),r=P(e("copy-to-clipboard")),a=P(e("loglevel")),o=e("lodash"),i=P(e("react")),l=e("react-dom"),u=P(e("webextension-polyfill")),c=e("../app/scripts/lib/util"),d=e("../shared/constants/alerts"),m=e("../shared/modules/object.utils"),p=e("../app/scripts/constants/sentry-state"),f=e("../shared/constants/app"),h=e("../shared/constants/copy"),g=P(e("../shared/lib/switch-direction")),y=e("../shared/lib/error-utils"),k=e("../shared/lib/trace"),T=e("../shared/modules/selectors/networks"),v=e("../shared/lib/multichain/chain-agnostic-permission-utils/caip-accounts"),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("./store/actions")),S=P(e("./store/store")),C=e("./selectors"),w=e("./ducks/alerts"),E=e("./ducks/metamask/metamask"),x=P(e("./pages")),I=P(e("./helpers/utils/tx-helper")),A=e("./store/background-connection"),_=e("./helpers/utils/tags");function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}function P(e){return e&&e.__esModule?e:{default:e}}let D;a.default.setLevel(global.METAMASK_DEBUG?"debug":"warn",!1);const N=e=>{(0,A.setBackgroundConnection)(e),e.onNotification((e=>{if("sendUpdate"!==e.method)throw new Error(`Internal JSON-RPC Notification Not Handled:\n\n ${JSON.stringify(e)}`);D.dispatch(b.updateMetamaskState(e.params[0]))}))};async function O(e,t,n){e.featureFlags||(e.featureFlags={});const{currentLocaleMessages:s,enLocaleMessages:r}=await(0,y.setupLocale)(e.currentLocale);"rtl"===e.textDirection&&(0,g.default)("rtl");const a={activeTab:n,metamask:e,appState:{},localeMessages:{currentLocale:e.currentLocale,current:s,en:r}};if(N(t),(0,c.getEnvironmentType)()===f.ENVIRONMENT_TYPE_POPUP){const{origin:e}=a.activeTab,t=(0,C.getAllPermittedAccountsForCurrentTab)(a),n=(0,C.getSelectedInternalAccount)(a),s=(0,v.isInternalAccountInPermittedAccountIds)(n,t),r=(0,E.getUnconnectedAccountAlertShown)(a),o=(0,E.getUnconnectedAccountAlertEnabledness)(a);e&&o&&!r[e]&&t.length>0&&!s&&(a[d.AlertTypes.unconnectedAccount]={state:w.ALERT_STATE.OPEN},b.setUnconnectedAccountAlertShown(e))}const o=(0,S.default)(a);D=o;const i=(0,C.getUnapprovedTransactions)(e),l=(0,I.default)(i,e.unapprovedPersonalMsgs,e.unapprovedDecryptMsgs,e.unapprovedEncryptionPublicKeyMsgs,e.unapprovedTypedMessages,e.networkId,(0,T.getCurrentChainId)({metamask:e}));return l.length>0&&o.dispatch(b.showConfTxPage({id:l[0].id})),o}n.updateBackgroundConnection=N,window.logStateString=async function(e){const t=await window.stateHooks.getCleanAppState(),n=window.stateHooks.getLogs();u.default.runtime.getPlatformInfo().then((s=>{t.platform=s,t.logs=n;const r=JSON.stringify(t,null,2);e(null,r)})).catch((t=>{e(t)}))},window.logState=function(e){return window.logStateString(((t,n)=>{t?console.error(t.message):e?((0,r.default)(n,h.COPY_OPTIONS),console.log("State log copied")):console.log(n)}))}}}},{package:"$root$",file:"ui/index.js"}],[6812,{"../../../shared/modules/string-utils":5677,"../../components/app/assets/nfts/nft-details/nft-details":5739,"../../ducks/metamask/metamask":6651,"../../helpers/constants/routes":6669,"../../selectors/assets":7397,"./components/native-asset":6819,"./components/token-asset":6820,react:5129,"react-redux":5087,"react-router-dom":5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),r=e("react-redux"),a=e("react-router-dom"),o=e("../../../shared/modules/string-utils"),i=p(e("../../components/app/assets/nfts/nft-details/nft-details")),l=e("../../ducks/metamask/metamask"),u=e("../../helpers/constants/routes"),c=e("../../selectors/assets"),d=p(e("./components/native-asset")),m=p(e("./components/token-asset"));function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,a.useParams)(),{chainId:t,asset:n,id:p}=e,f=n?decodeURIComponent(n):undefined,h=(0,r.useSelector)((e=>(0,l.getNFTsByChainId)(e,t))),g=(0,r.useSelector)((e=>(0,c.getTokenByAccountAndAddressAndChainId)(e,undefined,f,t))),y=h.find((({address:e,tokenId:t})=>(0,o.isEqualCaseInsensitive)(e,f)&&p===t.toString()));(0,s.useEffect)((()=>{const e=document.querySelector(".app");null==e||e.scroll(0,0)}),[]);const k=(()=>{if(y)return s.default.createElement(i.default,{nft:y});if(!g||!t)return s.default.createElement(a.Redirect,{to:{pathname:u.DEFAULT_ROUTE}});return!g.isNative&&g.address?s.default.createElement(m.default,{chainId:t,token:g}):s.default.createElement(d.default,{chainId:t,token:g})})();return s.default.createElement("div",{className:"main-container asset__container"},k)}}}},{package:"$root$",file:"ui/pages/asset/asset.tsx"}],[6813,{"../../../components/component-library":6193,"../../../components/ui/menu":6564,"../../../contexts/i18n":6623,"../../../helpers/constants/design-system":6663,"../../../helpers/constants/routes":6669,"../../../selectors":7403,"../../../selectors/multichain":7407,"prop-types":4883,react:5129,"react-redux":5087,"react-router-dom":5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),a=(s=e("prop-types"))&&s.__esModule?s:{default:s},o=e("react-router-dom"),i=e("react-redux"),l=e("../../../contexts/i18n"),u=e("../../../components/ui/menu"),c=e("../../../selectors"),d=e("../../../helpers/constants/routes"),m=e("../../../components/component-library"),p=e("../../../helpers/constants/design-system"),f=e("../../../selectors/multichain");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}const g=({onRemove:e,onClickBlockExplorer:t,onViewTokenDetails:n,tokenSymbol:s,isNativeAsset:a})=>{const h=(0,r.useContext)(l.I18nContext),[g,y]=(0,r.useState)(!1),k=(0,o.useHistory)(),T=(0,i.useSelector)(c.getBlockExplorerLinkText),v=(0,r.useRef)(!1),b=(0,i.useSelector)(f.getMultichainIsEvm)&&!a;return r.default.createElement("div",{ref:v},r.default.createElement(m.ButtonIcon,{className:"asset-options__button","data-testid":"asset-options__button",onClick:()=>y(!0),ariaLabel:h("assetOptions"),iconName:m.IconName.MoreVertical,color:p.Color.textDefault,size:m.ButtonIconSize.Sm}),g?r.default.createElement(u.Menu,{anchorElement:v.current,onHide:()=>y(!1)},r.default.createElement(u.MenuItem,{iconName:m.IconName.Export,"data-testid":"asset-options__etherscan",onClick:"addBlockExplorer"===T.firstPart?()=>{k.push(`${d.NETWORKS_ROUTE}#blockExplorerUrl`)}:()=>{y(!1),t()}},h(T.firstPart,""===T.secondPart?null:[h("blockExplorerAssetAction")])),b&&r.default.createElement(u.MenuItem,{iconName:m.IconName.Trash,"data-testid":"asset-options__hide",onClick:()=>{y(!1),e()}},h("hideTokenSymbol",[s])),a||!n?null:r.default.createElement(u.MenuItem,{iconName:m.IconName.Info,"data-testid":"asset-options__token-details",onClick:()=>{y(!1),n()}},h("tokenDetails"))):null)};g.propTypes={isNativeAsset:a.default.bool,onClickBlockExplorer:a.default.func.isRequired,onRemove:e=>{if(!1===e.isNativeAsset&&"function"!=typeof e.onRemove)throw new Error("When isNativeAsset is true, onRemove is a required prop")},onViewTokenDetails:a.default.func,tokenSymbol:e=>{if(!1===e.isNativeAsset&&"string"!=typeof e.tokenSymbol)throw new Error("When isNativeAsset is true, tokenSymbol is a required prop")}};n.default=g}}},{package:"$root$",file:"ui/pages/asset/components/asset-options.js"}],[6814,{"../../../../shared/constants/transaction":5619,"../../../../shared/modules/conversion.utils":5657,"../../../../shared/modules/hexstring-utils":5663,"../../../components/app/assets/hooks/useMultichainAssets":5730,"../../../components/app/assets/token-cell":5755,"../../../components/app/assets/util/calculateTokenBalance":5759,"../../../components/app/transaction-list":6106,"../../../components/app/wallet-overview/coin-buttons":6113,"../../../components/component-library":6193,"../../../components/multichain":6365,"../../../ducks/metamask/metamask":6651,"../../../ducks/ramps":6653,"../../../helpers/constants/design-system":6663,"../../../helpers/constants/routes":6669,"../../../helpers/utils/confirm-tx.util":6690,"../../../helpers/utils/portfolio":6705,"../../../hooks/useI18nContext":6775,"../../../hooks/useMultichainSelector":6783,"../../../hooks/useTokenBalances":6799,"../../../selectors":7403,"../../../selectors/multichain":7407,"../util":6824,"./chart/asset-chart":6816,"./token-buttons":6821,"@metamask/assets-controllers":1351,"@metamask/keyring-api":2002,"@metamask/utils":2822,lodash:4725,react:5129,"react-redux":5087,"react-router-dom":5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("@metamask/assets-controllers"),r=e("@metamask/keyring-api"),a=e("@metamask/utils"),o=e("lodash"),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=B(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),l=e("react-redux"),u=e("react-router-dom"),c=e("../../../../shared/constants/transaction"),d=e("../../../../shared/modules/conversion.utils"),m=e("../../../../shared/modules/hexstring-utils"),p=O(e("../../../components/app/assets/hooks/useMultichainAssets")),f=O(e("../../../components/app/assets/token-cell")),h=e("../../../components/app/assets/util/calculateTokenBalance"),g=O(e("../../../components/app/transaction-list")),y=O(e("../../../components/app/wallet-overview/coin-buttons")),k=e("../../../components/component-library"),T=e("../../../components/multichain"),v=e("../../../ducks/metamask/metamask"),b=e("../../../ducks/ramps"),S=e("../../../helpers/constants/design-system"),C=e("../../../helpers/constants/routes"),w=e("../../../helpers/utils/confirm-tx.util"),E=e("../../../helpers/utils/portfolio"),x=e("../../../hooks/useI18nContext"),I=e("../../../hooks/useMultichainSelector"),A=e("../../../hooks/useTokenBalances"),_=e("../../../selectors"),M=e("../../../selectors/multichain"),P=e("../util"),D=O(e("./chart/asset-chart")),N=O(e("./token-buttons"));function O(e){return e&&e.__esModule?e:{default:e}}function B(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(B=function(e){return e?n:t})(e)}function R(e,t){return i.default.createElement(k.Box,{display:S.Display.Flex,justifyContent:S.JustifyContent.spaceBetween},i.default.createElement(k.Text,{color:S.TextColor.textAlternative,variant:S.TextVariant.bodyMdMedium},e),t)}n.default=({asset:e,optionsButton:t})=>{var n,O,B,F,j,L,$;const q=(0,x.useI18nContext)(),U=(0,u.useHistory)(),W=(0,l.useSelector)(_.getSelectedAccount),H=(0,l.useSelector)(v.getCurrentCurrency),V=(0,I.useMultichainSelector)(M.getMultichainConversionRate),z=(0,l.useSelector)(b.getIsNativeTokenBuyable),G=(0,I.useMultichainSelector)(M.getMultichainIsEvm),{chainId:Q,type:K,symbol:J,name:Y,image:X,decimals:Z}=e,ee=K===c.AssetType.native,te=(0,l.useSelector)((e=>(0,_.getSwapsDefaultToken)(e,Q)),o.isEqual),ne=(0,l.useSelector)((e=>(0,_.getIsSwapsChain)(e,Q))),se=(0,l.useSelector)((e=>(0,_.getIsBridgeChain)(e,Q))),re=(0,l.useSelector)(_.getSelectedInternalAccount,o.isEqual),ae=re.methods.includes(r.EthMethod.SignTransaction)||re.methods.includes(r.EthMethod.SignUserOperation)||re.methods.includes(r.SolMethod.SignTransaction),oe=(0,l.useSelector)(_.getMarketData),ie=(0,l.useSelector)(_.getCurrencyRates),le=(0,I.useMultichainSelector)(M.getMultichainIsTestnet),ue=(0,I.useMultichainSelector)(M.getMultichainShouldShowFiat),ce=!le,de=(0,l.useSelector)(_.getShowFiatInTestnets),me=ue&&(ce||le&&de),pe=(0,l.useSelector)(_.getSelectedAccountNativeTokenCachedBalanceByChainId),{tokenBalances:fe}=(0,A.useTokenBalances)({chainIds:[Q]}),he=fe[W.address],ge=(0,p.default)().filter((e=>e.chainId===Q&&e.address!==undefined)).find((t=>{switch(K){case c.AssetType.native:return t.isNative;case c.AssetType.token:return t.address===e.address;default:return!1}})),ye=(0,l.useSelector)(_.getParticipateInMetaMetrics),ke=(0,l.useSelector)(_.getDataCollectionForMarketing),Te=(0,l.useSelector)(_.getMetaMetricsId),ve=K===c.AssetType.token?G?(0,m.toChecksumHexAddress)(e.address):e.address:(0,s.getNativeTokenAddress)(Q),be=K===c.AssetType.token,Se=be?G?(0,m.toChecksumHexAddress)(e.address):(0,a.parseCaipAssetType)(ve).assetReference:"",Ce=null==he||null===(n=he[Q])||void 0===n?void 0:n[ve],we=(0,h.calculateTokenBalance)({isNative:ee,chainId:Q,address:ve,decimals:Z,nativeBalances:pe,selectedAccountTokenBalancesAcrossChains:he}),Ee=null===(O=oe[Q])||void 0===O||null===(O=O[ve])||void 0===O?void 0:O.currency,xe=(null===(B=oe[Q])||void 0===B||null===(B=B[ve])||void 0===B?void 0:B.price)||undefined,Ie=K===c.AssetType.native?null===(F=ie[J])||void 0===F?void 0:F.conversionRate:(null===(j=ie[Ee])||void 0===j?void 0:j.conversionRate)||0,Ae=xe*Ie*parseFloat(String(we)),_e=Ie!==undefined&&xe!==undefined?Ie*xe:undefined,Me=null===(L=oe[Q])||void 0===L?void 0:L[ve],Pe=V>0&&Me&&(Me.marketCap>0||Me.totalVolume>0||Me.circulatingSupply>0||Me.allTimeHigh>0||Me.allTimeLow>0);e.balance={value:(0,d.hexToDecimal)(Ce),display:String(we),fiat:String(Ae)};const De=G,Ne=(0,i.useMemo)((()=>(0,E.getPortfolioUrl)("","asset_page",Te,ye,ke,re.address,"spending-caps")),[re.address,ke,ye,Te]),Oe=null===($=(0,l.useSelector)(M.getMultichainNetworkConfigurationsByChainId)[Q])||void 0===$?void 0:$.name,Be=(0,M.getImageForChainId)(Q),Re=G?{address:ve,chainId:Q,symbol:J,image:X,title:Y??J,tokenFiatAmount:me&&xe?Ae:null,string:we?we.toString():"",decimals:e.decimals,aggregators:K===c.AssetType.token&&e.aggregators?e.aggregators:[],isNative:K===c.AssetType.native,primary:we?we.toString():"",secondary:we?Number(we):0}:ge;if(!Re)throw new Error("Token with fiat amount not found");return i.default.createElement(k.Box,{marginLeft:"auto",marginRight:"auto",marginTop:4,className:"asset__content"},i.default.createElement(k.Box,{display:S.Display.Flex,flexDirection:S.FlexDirection.Row,justifyContent:S.JustifyContent.spaceBetween,paddingLeft:2,paddingRight:4,paddingBottom:1},i.default.createElement(k.Box,{display:S.Display.Flex},i.default.createElement(k.ButtonIcon,{color:S.IconColor.iconAlternative,marginRight:1,size:k.ButtonIconSize.Sm,ariaLabel:q("back"),iconName:k.IconName.ArrowLeft,onClick:()=>U.push(C.DEFAULT_ROUTE)}),i.default.createElement(k.Text,{"data-testid":"asset-name",color:S.TextColor.textAlternative},Y&&J&&Y!==J?`${Y} (${J})`:Y??J)),t),i.default.createElement(D.default,{chainId:Q,address:ve,currentPrice:_e,currency:H}),i.default.createElement(k.Box,{marginTop:4},K===c.AssetType.native?i.default.createElement(y.default,{account:re,trackingLocation:"asset-page",isBuyableChain:z,isSigningEnabled:ae,isSwapsChain:ne,isBridgeChain:se,chainId:Q,defaultSwapsToken:te}):i.default.createElement(N.default,{token:e})),i.default.createElement(k.Box,{display:S.Display.Flex,flexDirection:S.FlexDirection.Column,paddingTop:5},i.default.createElement(k.Text,{variant:S.TextVariant.headingMd,paddingBottom:2,paddingLeft:4},q("yourBalance")),[c.AssetType.token,c.AssetType.native].includes(K)&&i.default.createElement(f.default,{key:`${J}-${ve}`,token:Re,disableHover:!0}),i.default.createElement(k.Box,{marginTop:2,display:S.Display.Flex,flexDirection:S.FlexDirection.Column,gap:7},[c.AssetType.token,c.AssetType.native].includes(K)&&i.default.createElement(k.Box,{display:S.Display.Flex,flexDirection:S.FlexDirection.Column,paddingLeft:4,paddingRight:4},i.default.createElement(k.Text,{variant:S.TextVariant.headingMd,paddingBottom:4},q("tokenDetails")),i.default.createElement(k.Box,{display:S.Display.Flex,flexDirection:S.FlexDirection.Column,gap:2},R(q("network"),i.default.createElement(k.Text,{display:S.Display.Flex,alignItems:S.AlignItems.center,gap:1,"data-testid":"asset-network"},i.default.createElement(k.AvatarNetwork,{src:Be,name:Oe,size:k.AvatarNetworkSize.Sm}),Oe)),be&&i.default.createElement(k.Box,null,R(q("contractAddress"),i.default.createElement(T.AddressCopyButton,{address:Se,shorten:!0})),i.default.createElement(k.Box,{display:S.Display.Flex,flexDirection:S.FlexDirection.Column,gap:2},e.decimals!==undefined&&R(q("tokenDecimal"),i.default.createElement(k.Text,null,e.decimals)),e.aggregators&&e.aggregators.length>0&&i.default.createElement(k.Box,null,i.default.createElement(k.Text,{color:S.TextColor.textAlternative,variant:S.TextVariant.bodyMdMedium},q("tokenList")),i.default.createElement(k.Text,null,e.aggregators.map((e=>e.replace(/^metamask$/iu,"MetaMask"))).join(", "))))),De&&R(q("spendingCaps"),i.default.createElement(k.ButtonLink,{className:"asset-page__spending-caps mm-text--body-md-medium",href:Ne,target:"_blank",rel:"noopener noreferrer"},q("editInPortfolio"))))),Pe&&i.default.createElement(k.Box,{paddingLeft:4,paddingRight:4},i.default.createElement(k.Text,{variant:S.TextVariant.headingMd,paddingBottom:4},q("marketDetails")),i.default.createElement(k.Box,{display:S.Display.Flex,flexDirection:S.FlexDirection.Column,gap:2},Me.marketCap>0&&R(q("marketCap"),i.default.createElement(k.Text,{"data-testid":"asset-market-cap"},(0,P.localizeLargeNumber)(q,Ie*Me.marketCap))),Me.totalVolume>0&&R(q("totalVolume"),i.default.createElement(k.Text,null,(0,P.localizeLargeNumber)(q,Ie*Me.totalVolume))),Me.circulatingSupply>0&&R(q("circulatingSupply"),i.default.createElement(k.Text,null,(0,P.localizeLargeNumber)(q,Me.circulatingSupply))),Me.allTimeHigh>0&&R(q("allTimeHigh"),i.default.createElement(k.Text,null,(0,w.formatCurrency)(""+Ie*Me.allTimeHigh,H,(0,P.getPricePrecision)(Ie*Me.allTimeHigh)))),Me.allTimeLow>0&&R(q("allTimeLow"),i.default.createElement(k.Text,null,(0,w.formatCurrency)(""+Ie*Me.allTimeLow,H,(0,P.getPricePrecision)(Ie*Me.allTimeLow)))))),i.default.createElement(k.Box,{marginBottom:8},i.default.createElement(k.Text,{paddingLeft:4,paddingRight:4,variant:S.TextVariant.headingMd},q("yourActivity")),K===c.AssetType.native?i.default.createElement(g.default,{hideNetworkFilter:!0}):i.default.createElement(g.default,{tokenAddress:ve,hideNetworkFilter:!0})))))}}}},{package:"$root$",file:"ui/pages/asset/components/asset-page.tsx"}],[6815,{"../../../components/component-library":6193,"../../../helpers/constants/design-system":6663,"../../../helpers/utils/confirm-tx.util":6690,"../util":6824,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),r=e("../../../helpers/constants/design-system"),a=e("../../../components/component-library"),o=e("../../../helpers/utils/confirm-tx.util"),i=e("../util");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}const u=s.default.createElement("svg",{className:"chart-up",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.default.createElement("path",{d:"M9.75 3.8125L6.25 7.4875L4.91667 5.3875L2.25 8.1875",strokeLinecap:"round",strokeLinejoin:"round"}),s.default.createElement("path",{d:"M8.08398 3.8125H9.75065V5.5625",strokeLinecap:"round",strokeLinejoin:"round"})),c=s.default.createElement("svg",{className:"chart-down",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.default.createElement("path",{d:"M9.75 8.1875L6.25 4.5125L4.91667 6.6125L2.25 3.8125",strokeLinecap:"round",strokeLinejoin:"round"}),s.default.createElement("path",{d:"M8.08398 8.1875H9.75065V6.4375",strokeLinecap:"round",strokeLinejoin:"round"})),d=(0,s.forwardRef)(((e,t)=>{const[{price:n,date:l},d]=(0,s.useState)({price:e.price,date:e.date});(0,s.useImperativeHandle)(t,(()=>({setPrice:d})));const{loading:m,currency:p,comparePrice:f}=e,h=n!==undefined&&f!==undefined?n-f:undefined;return s.default.createElement(a.Box,{marginLeft:4,marginRight:4},s.default.createElement(a.Text,{"data-testid":"asset-hovered-price",style:{width:"100px"},variant:r.TextVariant.displayMd,fontWeight:r.FontWeight.Medium,borderRadius:r.BorderRadius.LG,marginBottom:1,backgroundColor:m&&!n?r.BackgroundColor.backgroundAlternative:r.BackgroundColor.transparent},n?(0,o.formatCurrency)(`${n}`,p,(0,i.getPricePrecision)(n)):" "),s.default.createElement(a.Box,null,h!==undefined&&f!==undefined?s.default.createElement(a.Box,{style:{opacity:m?i.loadingOpacity:1}},h>=0?u:c,s.default.createElement(a.Text,{display:r.Display.InlineBlock,variant:r.TextVariant.bodyMdMedium,marginLeft:1,marginRight:1,color:h>=0?r.TextColor.successDefault:r.TextColor.errorDefault},(0,o.formatCurrency)(`${Math.abs(h)}`,p,(0,i.getPricePrecision)(h))," ","(",h>=0?"+":"",(h/f*100).toFixed(2),"%)"),s.default.createElement(a.Text,{display:r.Display.InlineBlock,variant:r.TextVariant.bodyMdMedium,color:r.TextColor.textAlternative},(0,i.getShortDateFormatter)().format(l))):s.default.createElement(a.Text,{style:{width:"200px"},backgroundColor:m?r.BackgroundColor.backgroundAlternative:r.BackgroundColor.transparent,borderRadius:r.BorderRadius.LG,variant:r.TextVariant.bodyMdMedium}," ")))}));n.default=d}}},{package:"$root$",file:"ui/pages/asset/components/asset-price.tsx"}],[6816,{"../../../../components/component-library":6193,"../../../../helpers/constants/design-system":6663,"../../../../hooks/useI18nContext":6775,"../../../../hooks/useTheme":6797,"../../useHistoricalPrices":6823,"../../util":6824,"../asset-price":6815,"./chart-tooltip":6817,"./crosshair-plugin":6818,"@metamask/design-tokens":1517,"chart.js":3966,classnames:3971,react:5129,"react-chartjs-2":4954},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),r=e("chart.js"),a=e("react-chartjs-2"),o=y(e("classnames")),i=e("@metamask/design-tokens"),l=e("../../../../hooks/useTheme"),u=e("../../../../helpers/constants/design-system"),c=e("../../../../components/component-library"),d=e("../../../../hooks/useI18nContext"),m=e("../../useHistoricalPrices"),p=e("../../util"),f=y(e("../asset-price")),h=y(e("./chart-tooltip")),g=e("./crosshair-plugin");function y(e){return e&&e.__esModule?e:{default:e}}function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},T.apply(null,arguments)}r.Chart.register(r.LinearScale,r.PointElement,r.LineElement,r.Filler,r.Decimation,g.CrosshairPlugin);const v={normalized:!0,parsing:!1,aspectRatio:2.9,layout:{autoPadding:!1,padding:0},animation:{duration:0},fill:!0,backgroundColor:({chart:e})=>{const t=e.ctx.createLinearGradient(0,0,0,e.height);return t.addColorStop(0,`${e.options.borderColor}60`),t.addColorStop(1,`${e.options.borderColor}00`),t},elements:{line:{borderWidth:2},point:{pointStyle:!1}},plugins:{decimation:{algorithm:"lttb",samples:150,threshold:150,enabled:!0}}};n.default=({chainId:e,address:t,currentPrice:n,currency:r})=>{var g;const y=(0,d.useI18nContext)(),k=(0,l.useTheme)(),[b,S]=(0,s.useState)("1D"),C=(0,s.useRef)(),w=(0,s.useRef)(),{loading:E,data:{prices:x,edges:I}}=(0,m.useHistoricalPrices)({chainId:e,address:t,currency:r,timeRange:b}),{xMin:A,xMax:_,yMin:M,yMax:P}=I??{},D={...v,borderColor:"dark"===k?i.brandColor.blue400:i.brandColor.blue500,scales:{x:{min:null==A?void 0:A.x,max:null==_?void 0:_.x,display:!1,type:"linear"},y:{min:null==M?void 0:M.y,max:null==P?void 0:P.y,display:!1}}};return n&&(E||x)?s.default.createElement(c.Box,{borderRadius:u.BorderRadius.LG},s.default.createElement(f.default,{ref:w,loading:E,currency:r,price:n,date:Date.now(),comparePrice:null==x||null===(g=x[0])||void 0===g?void 0:g.y}),s.default.createElement(c.Box,{"data-testid":"asset-price-chart",marginTop:4,borderRadius:u.BorderRadius.LG,backgroundColor:E&&!x?u.BackgroundColor.backgroundAlternative:u.BackgroundColor.transparent},s.default.createElement(c.Box,{style:{opacity:E&&x?p.loadingOpacity:1}},s.default.createElement(h.default,T({point:P},I,{currency:r})),s.default.createElement(c.Box,{style:{aspectRatio:`${D.aspectRatio}`},display:u.Display.Flex,flexDirection:u.FlexDirection.Column,justifyContent:n?u.JustifyContent.flexEnd:u.JustifyContent.flexStart},s.default.createElement(a.Line,{ref:C,data:{datasets:[{data:x}]},options:D,updateMode:"none",onMouseMove:e=>{var t;const n=null==C||null===(t=C.current)||void 0===t||null===(t=t.data)||void 0===t||null===(t=t.datasets)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.data;if(n){const t=e.target,r=n[Math.max(0,Math.min(n.length-1,Math.round(e.nativeEvent.offsetX/t.clientWidth*n.length)))];var s;if(r)null==w||null===(s=w.current)||void 0===s||s.setPrice({price:r.y,date:r.x})}},onMouseOut:()=>{var e;null==w||null===(e=w.current)||void 0===e||e.setPrice({price:n,date:Date.now()})}})),s.default.createElement(h.default,T({point:M},I,{currency:r}))),s.default.createElement(c.Box,{style:x?undefined:{visibility:"hidden"},display:u.Display.Flex,justifyContent:u.JustifyContent.spaceBetween,marginTop:4,marginLeft:4,marginRight:4},[[y("oneDayAbbreviation"),"1D"],[y("oneWeekAbbreviation"),"7D"],[y("oneMonthAbbreviation"),"1M"],[y("threeMonthsAbbreviation"),"3M"],[y("oneYearAbbreviation"),"1Y"],[y("all"),"1000Y"]].map((([e,t])=>s.default.createElement(c.ButtonBase,{key:t,className:(0,o.default)("time-range-button",{"time-range-button__selected":t===b}),onClick:()=>S(t),variant:u.TextVariant.bodySmMedium,size:c.ButtonBaseSize.Sm,backgroundColor:u.BackgroundColor.transparent,color:u.TextColor.textAlternative},e)))))):null}}}},{package:"$root$",file:"ui/pages/asset/components/chart/asset-chart.tsx"}],[6817,{"../../../../components/component-library":6193,"../../../../helpers/constants/design-system":6663,"../../../../helpers/utils/confirm-tx.util":6690,"../../util":6824,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=(s=e("react"))&&s.__esModule?s:{default:s},a=e("../../../../components/component-library"),o=e("../../../../helpers/utils/confirm-tx.util"),i=e("../../../../helpers/constants/design-system"),l=e("../../util");n.default=({point:e,xMin:t,xMax:n,currency:s})=>{const u=e&&t&&n?(e.x-t.x)/(n.x-t.x):0;return r.default.createElement(a.Box,{style:{...u<.5?{paddingRight:100-200*u+"%"}:{paddingLeft:100-2*(100-100*u)+"%"},direction:u<.5?a.TextDirection.LeftToRight:a.TextDirection.RightToLeft}},r.default.createElement(a.Text,{marginLeft:4,marginRight:4,variant:i.TextVariant.bodySmMedium,color:i.TextColor.textAlternative,textAlign:i.TextAlign.Center},(null==e?void 0:e.y)===undefined?" ":(0,o.formatCurrency)(`${null==e?void 0:e.y}`,s,(0,l.getPricePrecision)(null==e?void 0:e.y))))}}}},{package:"$root$",file:"ui/pages/asset/components/chart/chart-tooltip.tsx"}],[6818,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CrosshairPlugin=void 0;n.CrosshairPlugin={id:"crosshair",afterEvent(e,{event:t}){e.crosshairX="mouseout"===t.type?undefined:t.x??undefined,e.draw()},afterDraw(e){if(e.crosshairX!==undefined){const t=e.data.datasets[0].data,n=t[Math.max(0,Math.min(t.length-1,Math.round(e.crosshairX/e.width*t.length)))];if(n){const{x:t,y:s}=e.scales,r=t.getPixelForValue(n.x),a=s.getPixelForValue(n.y);e.ctx.lineWidth=1,e.ctx.strokeStyle="#BBC0C5",e.ctx.beginPath(),e.ctx.moveTo(r,0),e.ctx.lineTo(r,e.height),e.ctx.stroke(),e.ctx.beginPath(),e.ctx.arc(r,a,3,0,2*Math.PI),e.ctx.fillStyle=e.options.borderColor,e.ctx.fill()}}}}}}},{package:"$root$",file:"ui/pages/asset/components/chart/crosshair-plugin.ts"}],[6819,{"../../../../shared/constants/metametrics":5600,"../../../../shared/constants/transaction":5619,"../../../../shared/modules/selectors/networks":5674,"../../../contexts/metametrics":6627,"../../../helpers/utils/util":6712,"../../../hooks/useIsOriginalNativeTokenSymbol":6776,"../../../selectors":7403,"./asset-options":6813,"./asset-page":6814,"@metamask/etherscan-link":1926,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),r=e("react-redux"),a=e("@metamask/etherscan-link"),o=e("../../../selectors"),i=e("../../../../shared/modules/selectors/networks"),l=e("../../../../shared/constants/transaction"),u=e("../../../hooks/useIsOriginalNativeTokenSymbol"),c=e("../../../../shared/constants/metametrics"),d=e("../../../helpers/utils/util"),m=e("../../../contexts/metametrics"),p=h(e("./asset-options")),f=h(e("./asset-page"));function h(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}n.default=({token:e,chainId:t})=>{const{symbol:n}=e,h=(0,o.getNativeCurrencyForChain)(t),{type:g}=(0,r.useSelector)(i.getProviderConfig)??{},{address:y}=(0,r.useSelector)(o.getSelectedInternalAccount),k=(0,r.useSelector)(o.getRpcPrefsForCurrentProvider),T=(0,a.getAccountLink)(y,t,k),v=(0,s.useContext)(m.MetaMetricsContext),b=(0,u.useIsOriginalNativeTokenSymbol)(t,n,g);return s.default.createElement(f.default,{asset:{chainId:t,type:l.AssetType.native,symbol:n,image:h,decimals:e.decimals,isOriginalNativeSymbol:!0===b},optionsButton:s.default.createElement(p.default,{isNativeAsset:!0,onClickBlockExplorer:()=>{v({event:"Clicked Block Explorer Link",category:c.MetaMetricsEventCategory.Navigation,properties:{link_type:"Account Tracker",action:"Asset Options",block_explorer_domain:(0,d.getURLHostName)(T)}}),global.platform.openTab({url:T})}})})}}}},{package:"$root$",file:"ui/pages/asset/components/native-asset.tsx"}],[682,{"./bc-ur-registry-eth.cjs.development.js":680,"./bc-ur-registry-eth.cjs.production.min.js":681},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=e("./bc-ur-registry-eth.cjs.production.min.js")}}},{package:"@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/bc-ur-registry-eth/dist/index.js"}],[6820,{"../../../../shared/constants/metametrics":5600,"../../../../shared/constants/transaction":5619,"../../../../shared/modules/selectors/networks":5674,"../../../../shared/modules/string-utils":5677,"../../../contexts/metametrics":6627,"../../../helpers/utils/multichain/blockExplorer":6700,"../../../helpers/utils/util":6712,"../../../hooks/useMultichainSelector":6783,"../../../hooks/useTokenFiatAmount":6803,"../../../hooks/useTokenTracker":6806,"../../../selectors":7403,"../../../selectors/multichain":7407,"../../../store/actions":7421,"./asset-options":6813,"./asset-page":6814,"@metamask/etherscan-link":1926,"@metamask/utils":2822,react:5129,"react-redux":5087,"react-router-dom":5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("@metamask/etherscan-link"),r=e("@metamask/utils"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),o=e("react-redux"),i=e("react-router-dom"),l=e("../../../../shared/constants/metametrics"),u=e("../../../../shared/constants/transaction"),c=e("../../../../shared/modules/selectors/networks"),d=e("../../../../shared/modules/string-utils"),m=e("../../../contexts/metametrics"),p=e("../../../helpers/utils/util"),f=e("../../../hooks/useTokenFiatAmount"),h=e("../../../hooks/useTokenTracker"),g=e("../../../selectors"),y=e("../../../store/actions"),k=e("../../../helpers/utils/multichain/blockExplorer"),T=e("../../../hooks/useMultichainSelector"),v=e("../../../selectors/multichain"),b=C(e("./asset-options")),S=C(e("./asset-page"));function C(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}n.default=({token:e,chainId:t})=>{var n,C,w;const{address:E,symbol:x,isERC721:I,image:A}=e,_=(0,o.useSelector)(g.getTokenList),M=(0,o.useSelector)(c.getNetworkConfigurationsByChainId),P=null===(n=M[t])||void 0===n?void 0:n.defaultBlockExplorerUrlIndex,D=P===undefined?null:null===(C=M[t])||void 0===C?void 0:C.blockExplorerUrls[P],N=(0,o.useSelector)(g.getSelectedInternalAccount),{address:O}=N,B=(0,o.useSelector)(g.selectERC20TokensByChain),R=(0,T.useMultichainSelector)(v.getMultichainNetwork,N),F=(0,o.useSelector)(v.getMultichainIsEvm),j=(0,i.useHistory)(),L=(0,o.useDispatch)(),$=(0,a.useContext)(m.MetaMetricsContext),q=Object.values(_).find((e=>(0,d.isEqualCaseInsensitive)(e.symbol,x)&&(0,d.isEqualCaseInsensitive)(e.address,E))),U=null==B||null===(w=B[t])||void 0===w||null===(w=w.data)||void 0===w?void 0:w[E.toLowerCase()],W=(null==q?void 0:q.name)||(null==U?void 0:U.name)||x,H=(null==q?void 0:q.iconUrl)||(null==U?void 0:U.iconUrl)||A||"",V=null==q?void 0:q.aggregators,{tokensWithBalances:z}=(0,h.useTokenTracker)({tokens:[e],address:undefined}),G=null==z?void 0:z[0],Q=(0,f.useTokenFiatAmount)(E,null==G?void 0:G.string,x,{},!1),K=(0,s.getTokenTrackerLink)(e.address,t,"",O,{blockExplorerUrl:D??""}),J=F?K:(0,k.getMultichainAccountUrl)((0,r.parseCaipAssetType)(E).assetReference,R);return a.default.createElement(S.default,{asset:{chainId:t,type:u.AssetType.token,address:E,symbol:x,name:W,decimals:e.decimals,image:H,aggregators:V,balance:{value:null==G?void 0:G.balance,display:`${(0,p.roundToDecimalPlacesRemovingExtraZeroes)(null==G?void 0:G.string,5)}`,fiat:Q},isERC721:I},optionsButton:a.default.createElement(b.default,{isNativeAsset:!1,onRemove:()=>L((0,y.showModal)({name:"HIDE_TOKEN_CONFIRMATION",token:e,history:j})),onClickBlockExplorer:()=>{$({event:"Clicked Block Explorer Link",category:l.MetaMetricsEventCategory.Navigation,properties:{link_type:"Token Tracker",action:"Token Options",block_explorer_domain:(0,p.getURLHostName)(K)}}),global.platform.openTab({url:J})},tokenSymbol:e.symbol})})}}}},{package:"$root$",file:"ui/pages/asset/components/token-asset.tsx"}],[6821,{"../../../../shared/constants/metametrics":5600,"../../../../shared/constants/transaction":5619,"../../../../shared/modules/selectors/networks":5674,"../../../components/component-library":6193,"../../../components/ui/icon-button/icon-button":6534,"../../../contexts/i18n":6623,"../../../contexts/metametrics":6627,"../../../ducks/ramps":6653,"../../../ducks/send":6656,"../../../ducks/swaps/swaps":6659,"../../../helpers/constants/design-system":6663,"../../../helpers/constants/error-keys":6664,"../../../helpers/constants/routes":6669,"../../../helpers/utils/hardware":6694,"../../../hooks/bridge/useBridging":6726,"../../../hooks/ramps/useRamps/useRamps":6747,"../../../hooks/useMultichainSelector":6783,"../../../selectors":7403,"../../../selectors/multichain":7407,"../../../store/actions":7421,lodash:4725,react:5129,"react-redux":5087,"react-router-dom":5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=A(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),r=e("react-redux"),a=e("react-router-dom"),o=e("lodash"),i=e("../../../contexts/i18n"),l=e("../../../helpers/constants/routes"),u=e("../../../ducks/send"),c=e("../../../helpers/utils/hardware"),d=e("../../../ducks/swaps/swaps"),m=I(e("../../../hooks/ramps/useRamps/useRamps")),p=e("../../../selectors"),f=I(e("../../../hooks/bridge/useBridging")),h=e("../../../helpers/constants/error-keys"),g=e("../../../store/actions"),y=e("../../../contexts/metametrics"),k=e("../../../../shared/constants/metametrics"),T=e("../../../../shared/constants/transaction"),v=e("../../../helpers/constants/design-system"),b=I(e("../../../components/ui/icon-button/icon-button")),S=e("../../../components/component-library"),C=e("../../../ducks/ramps"),w=e("../../../hooks/useMultichainSelector"),E=e("../../../selectors/multichain"),x=e("../../../../shared/modules/selectors/networks");function I(e){return e&&e.__esModule?e:{default:e}}function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(A=function(e){return e?n:t})(e)}n.default=({token:e})=>{const t=(0,r.useDispatch)(),n=(0,s.useContext)(i.I18nContext),I=(0,s.useContext)(y.MetaMetricsContext),A=(0,a.useHistory)(),_=(0,r.useSelector)(p.getCurrentKeyring),M=(0,c.isHardwareKeyring)(_.type),P=(0,w.useMultichainSelector)(E.getMultichainIsEvm),D=(0,r.useSelector)(p.getSelectedInternalAccount,o.isEqual),{chainId:N}=(0,w.useMultichainSelector)(E.getMultichainNetwork),O=(0,r.useSelector)(x.getCurrentChainId),B=(0,r.useSelector)(p.getNetworkConfigurationIdByChainId),R=(0,r.useSelector)((e=>(0,p.getIsSwapsChain)(e,P?O:N))),F=(0,r.useSelector)(p.getIsBridgeChain),j=(0,r.useSelector)(C.getIsNativeTokenBuyable),{openBuyCryptoInPdapp:L}=(0,m.default)(),{openBridgeExperience:$}=(0,f.default)();(0,s.useEffect)((()=>{e.isERC721&&t((0,g.showModal)({name:"CONVERT_TOKEN_TO_NFT",tokenAddress:e.address}))}),[e.isERC721,e.address,t]);const q=(0,s.useCallback)((async()=>{if(O!==e.chainId&&N!==e.chainId)try{const n=B[e.chainId];await t((0,g.setActiveNetworkWithError)(n)),await t((0,g.setSwitchedNetworkDetails)({networkClientId:n}))}catch(t){throw console.error(`Failed to switch chains.\n        Target chainId: ${e.chainId}, Current chainId: ${O}.\n        ${t}`),t}}),[O,N,B,e.chainId,t]),U=(0,s.useCallback)((()=>{L(),I({event:k.MetaMetricsEventName.NavBuyButtonClicked,category:k.MetaMetricsEventCategory.Navigation,properties:{location:"Token Overview",text:"Buy",chain_id:O,token_symbol:e.symbol}})}),[O,e.symbol,I,L]),W=(0,s.useCallback)((async()=>{I({event:k.MetaMetricsEventName.NavSendButtonClicked,category:k.MetaMetricsEventCategory.Navigation,properties:{token_symbol:e.symbol,location:k.MetaMetricsSwapsEventSource.TokenView,text:"Send",chain_id:e.chainId}},{excludeMetaMetricsId:!1});try{await q(),await t((0,u.startNewDraftTransaction)({type:T.AssetType.token,details:e})),A.push(l.SEND_ROUTE)}catch(e){if(!e.message.includes(h.INVALID_ASSET_TYPE))throw e}}),[I,t,A,e,q,D]),H=(0,s.useCallback)((async t=>{var n,s;await q(),$(k.MetaMetricsSwapsEventSource.TokenView,{...e,iconUrl:e.image,balance:null==e||null===(n=e.balance)||void 0===n?void 0:n.value,string:null==e||null===(s=e.balance)||void 0===s?void 0:s.display,name:e.name??""},undefined,t)}),[e,q,$]),V=(0,s.useCallback)((async()=>{var n,s,r,a,o;(await q(),I({event:k.MetaMetricsEventName.NavSwapButtonClicked,category:k.MetaMetricsEventCategory.Swaps,properties:{token_symbol:e.symbol,location:k.MetaMetricsSwapsEventSource.TokenView,text:"Swap",chain_id:O}}),t((0,d.setSwapsFromToken)({...e,address:null===(n=e.address)||void 0===n?void 0:n.toLowerCase(),iconUrl:e.image,balance:null==e||null===(s=e.balance)||void 0===s?void 0:s.value,string:null==e||null===(r=e.balance)||void 0===r?void 0:r.display})),M)?null===(a=(o=global.platform).openExtensionInBrowser)||void 0===a||a.call(o,l.PREPARE_SWAP_ROUTE,undefined,!1):A.push(l.PREPARE_SWAP_ROUTE)}),[O,I,t,A,e,M,q,H,N]);return s.default.createElement(S.Box,{display:v.Display.Flex,justifyContent:v.JustifyContent.spaceEvenly},s.default.createElement(b.default,{className:"token-overview__button",Icon:s.default.createElement(S.Icon,{name:S.IconName.PlusMinus,color:v.IconColor.primaryInverse,size:S.IconSize.Sm}),label:n("buyAndSell"),"data-testid":"token-overview-buy",onClick:U,disabled:e.isERC721||!j,tooltipRender:null}),s.default.createElement(b.default,{className:"token-overview__button",onClick:W,Icon:s.default.createElement(S.Icon,{name:S.IconName.Arrow2UpRight,color:v.IconColor.primaryInverse,size:S.IconSize.Sm}),label:n("send"),"data-testid":"eth-overview-send",disabled:e.isERC721,tooltipRender:null}),R&&s.default.createElement(b.default,{className:"token-overview__button",Icon:s.default.createElement(S.Icon,{name:S.IconName.SwapHorizontal,color:v.IconColor.primaryInverse,size:S.IconSize.Sm}),onClick:V,label:n("swap"),tooltipRender:null}),F&&s.default.createElement(b.default,{className:"token-overview__button","data-testid":"token-overview-bridge",Icon:s.default.createElement(S.Icon,{name:S.IconName.Bridge,color:v.IconColor.primaryInverse,size:S.IconSize.Sm}),label:n("bridge"),onClick:()=>H(!1),tooltipRender:null}))}}}},{package:"$root$",file:"ui/pages/asset/components/token-buttons.tsx"}],[6822,{"./asset":6812},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var s,r=(s=e("./asset"))&&s.__esModule?s:{default:s}}}},{package:"$root$",file:"ui/pages/asset/index.js"}],[6823,{"../../../shared/constants/time":5617,"../../../shared/lib/fetch-with-cache":5634,"../../selectors":7403,"./util":6824,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useHistoricalPrices=void 0;var s,r=e("react"),a=e("react-redux"),o=(s=e("../../../shared/lib/fetch-with-cache"))&&s.__esModule?s:{default:s},i=e("../../../shared/constants/time"),l=e("../../selectors"),u=e("./util");n.useHistoricalPrices=({chainId:e,address:t,currency:n,timeRange:s})=>{const c=(0,a.useSelector)(l.getShouldShowFiat)&&(0,u.chainSupportsPricing)(e),[d,m]=(0,r.useState)(c),[p,f]=(0,r.useState)({});return(0,r.useEffect)((()=>{c?(m(!0),(0,o.default)({url:`https://price.api.cx.metamask.io/v1/chains/${e}/historical-prices/${t}?vsCurrency=${n}&timePeriod=${s}`,cacheOptions:{cacheRefreshTime:5*i.MINUTE},functionName:"GetAssetHistoricalPrices",fetchOptions:{headers:{"X-Client-Id":"extension"}}}).catch((()=>({}))).then((e=>{var t;const n=null==e||null===(t=e.prices)||void 0===t?void 0:t.map((e=>({x:null==e?void 0:e[0],y:null==e?void 0:e[1]})));let s;if(n&&n.length>0){let[e,t,r,a]=[];for(const s of n)e=!e||s.x<e.x?s:e,t=!t||s.x>t.x?s:t,r=!r||s.y<r.y?s:r,a=!a||s.y>a.y?s:a;s={xMin:e,xMax:t,yMin:r,yMax:a}}f({prices:n,edges:s}),m(!1)}))):(f({}),m(!1))}),[c,e,t,n,s]),{loading:d,data:p}}}}},{package:"$root$",file:"ui/pages/asset/useHistoricalPrices.ts"}],[6824,{"@metamask/assets-controllers":1351},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.localizeLargeNumber=n.loadingOpacity=n.getShortDateFormatterV2=n.getShortDateFormatter=n.getPricePrecision=n.findAssetByAddress=n.chainSupportsPricing=void 0;var s=e("@metamask/assets-controllers");n.getShortDateFormatter=()=>Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"});n.getShortDateFormatterV2=()=>Intl.DateTimeFormat(navigator.language,{year:"numeric",month:"short",day:"numeric"});n.localizeLargeNumber=(e,t)=>t>=1e12?`${(t/1e12).toFixed(2)}${e("trillionAbbreviation")}`:t>=1e9?`${(t/1e9).toFixed(2)}${e("billionAbbreviation")}`:t>=1e6?`${(t/1e6).toFixed(2)}${e("millionAbbreviation")}`:t.toFixed(2);n.getPricePrecision=e=>{if(0===e)return 1;let t=2;for(let n=Math.abs(e);n<1;t++)n*=10;return t};n.chainSupportsPricing=e=>s.SUPPORTED_CHAIN_IDS.includes(e);n.loadingOpacity=.2;n.findAssetByAddress=(e,t,n)=>{if(!n)return console.error("Chain ID is required."),null;const s=e[n];return s?t?s.find((e=>e.address&&e.address.toLowerCase()===t.toLowerCase())):s.find((e=>!e.address)):(console.warn(`No tokens found for chainId: ${n}`),null)}}}},{package:"$root$",file:"ui/pages/asset/util.ts"}],[6825,{"../../../components/component-library":6193,"../../../contexts/i18n":6623,"../../../helpers/constants/routes":6669,react:5129,"react-router-dom":5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),r=e("react-router-dom"),a=e("../../../helpers/constants/routes"),o=e("../../../components/component-library"),i=e("../../../contexts/i18n");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,s.useContext)(i.I18nContext),t=(0,r.useHistory)();return s.default.createElement(o.Button,{onClick:()=>{t.push(`${a.CROSS_CHAIN_SWAP_ROUTE}${a.PREPARE_SWAP_ROUTE}`)}},e("cancel"))}}}},{package:"$root$",file:"ui/pages/bridge/awaiting-signatures/awaiting-signatures-cancel-button.tsx"}],[6826,{"../../../../shared/constants/metametrics":5600,"../../../components/component-library":6193,"../../../components/ui/pulse-loader":6582,"../../../contexts/metametrics":6627,"../../../ducks/bridge/selectors":6641,"../../../helpers/constants/design-system":6663,"../../../hooks/useI18nContext":6775,"../../../selectors/selectors":7413,"lodash/isEqual":4712,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e;const t=(0,p.useI18nContext)(),{activeQuote:n}=(0,r.useSelector)(m.getBridgeQuotes,r.shallowEqual),f=null==n||null===(e=n.sentAmount)||void 0===e||null===(e=e.amount)||void 0===e?void 0:e.toNumber(),h=(0,r.useSelector)(m.getFromToken,a.default),g=(0,r.useSelector)(m.getToToken,a.default),y=(0,r.useSelector)(m.getFromChain,a.default),k=(0,r.useSelector)(m.getToChain,a.default),T=(0,r.useSelector)(o.isHardwareWallet),v=(0,r.useSelector)(o.getHardwareWalletType),b=Boolean(null==n?void 0:n.approval),S=(0,s.useContext)(u.MetaMetricsContext);return(0,s.useEffect)((()=>{var e,t;S({event:"Awaiting Signature(s) on a HW wallet",category:c.MetaMetricsEventCategory.Swaps,properties:{needs_two_confirmations:b,token_from:(null==h?void 0:h.symbol)??"",token_to:(null==g?void 0:g.symbol)??"",is_hardware_wallet:T,hardware_wallet_type:v??""},sensitiveProperties:{token_from_amount:(null==n||null===(e=n.quote)||void 0===e?void 0:e.srcTokenAmount)??"",token_to_amount:(null==n||null===(t=n.quote)||void 0===t?void 0:t.destTokenAmount)??""}})}),[]),s.default.createElement("div",{className:"awaiting-bridge-signatures"},s.default.createElement(d.Box,{paddingLeft:6,paddingRight:6,height:l.BlockSize.Full,justifyContent:l.JustifyContent.center,display:l.Display.Flex,flexDirection:l.FlexDirection.Column},s.default.createElement(d.Box,{marginTop:3,marginBottom:4},s.default.createElement(i.default,null)),!b&&s.default.createElement(d.Text,{color:l.TextColor.textDefault,variant:l.TextVariant.headingMd,as:"h3"},t("swapConfirmWithHwWallet")),b&&s.default.createElement(s.default.Fragment,null,s.default.createElement(d.Text,{variant:l.TextVariant.bodyMdBold,marginTop:2},t("bridgeConfirmTwoTransactions")),s.default.createElement("ul",{className:"awaiting-bridge-signatures__steps"},s.default.createElement("li",null,s.default.createElement(d.AvatarBase,{size:d.AvatarBaseSize.Sm,backgroundColor:l.BackgroundColor.primaryMuted,color:l.TextColor.primaryDefault,marginRight:2},"1"),t("bridgeAllowSwappingOf",[s.default.createElement(d.Text,{as:"span",variant:l.TextVariant.bodyMd,key:"allowAmount"},f),s.default.createElement(d.Text,{as:"span",variant:l.TextVariant.bodyMd,key:"allowToken"},null==h?void 0:h.symbol),s.default.createElement(d.Text,{as:"span",variant:l.TextVariant.bodyMd,key:"allowNetwork"},null==y?void 0:y.name)])),s.default.createElement("li",null,s.default.createElement(d.AvatarBase,{size:d.AvatarBaseSize.Sm,backgroundColor:l.BackgroundColor.primaryMuted,color:l.TextColor.primaryDefault,marginRight:2},"2"),t("bridgeFromTo",[s.default.createElement(d.Text,{as:"span",variant:l.TextVariant.bodyMd,key:"fromAmount"},f),s.default.createElement(d.Text,{as:"span",variant:l.TextVariant.bodyMd,key:"fromToken"},null==h?void 0:h.symbol),s.default.createElement(d.Text,{as:"span",variant:l.TextVariant.bodyMd,key:"toNetwork"},null==k?void 0:k.name)]))),s.default.createElement(d.Text,{variant:l.TextVariant.bodyXs},t("bridgeGasFeesSplit")))))};var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),r=e("react-redux"),a=f(e("lodash/isEqual")),o=e("../../../selectors/selectors"),i=f(e("../../../components/ui/pulse-loader")),l=e("../../../helpers/constants/design-system"),u=e("../../../contexts/metametrics"),c=e("../../../../shared/constants/metametrics"),d=e("../../../components/component-library"),m=e("../../../ducks/bridge/selectors"),p=e("../../../hooks/useI18nContext");function f(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/bridge/awaiting-signatures/awaiting-signatures.tsx"}],[6827,{"../../../../shared/constants/network":5604,"../../../../shared/modules/conversion.utils":5657,"../../../../shared/modules/selectors/networks":5674,"../../../store/actions":7421,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,s.useDispatch)(),t=(0,s.useSelector)(o.getNetworkConfigurationsByChainId),n=(0,s.useSelector)(o.getSelectedNetworkClientId);return{addSourceToken:t=>{const{address:s,decimals:r,symbol:o,icon:i}=t.quote.srcAsset;e((0,a.addToken)({address:s,decimals:r,symbol:o,image:i,networkClientId:n}))},addDestToken:async n=>{const s=(0,i.decimalToPrefixedHex)(n.quote.destChainId),o=t[s];let l;if(!o){const t=r.FEATURED_RPCS.find((e=>e.chainId===s));if(!t)throw new Error("No featured RPC found");l=await e((0,a.addNetwork)(t))}const u=o||l;if(!u)throw new Error("No destination network configuration found");const c=u.defaultRpcEndpointIndex,d=u.rpcEndpoints[c].networkClientId,{address:m,decimals:p,symbol:f,icon:h}=n.quote.destAsset;await e((0,a.addToken)({address:m,decimals:p,symbol:f,image:h,networkClientId:d}))}}};var s=e("react-redux"),r=e("../../../../shared/constants/network"),a=e("../../../store/actions"),o=e("../../../../shared/modules/selectors/networks"),i=e("../../../../shared/modules/conversion.utils")}}},{package:"$root$",file:"ui/pages/bridge/hooks/useAddToken.ts"}],[6828,{"../../../../shared/constants/transaction":5619,"../../../../shared/modules/selectors/networks":5674,"../../../ducks/bridge-status/selectors":6638,"../../../hooks/useTokenFiatAmount":6803,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useBridgeTokenDisplayData=function(e){var t,n;const{primaryTransaction:l}=e,u=(0,s.useSelector)(r.getCurrentChainId),c=(0,s.useSelector)(i.selectBridgeHistoryForAccount)[l.id],d=(0,a.useTokenFiatAmount)(l.sourceTokenAddress,null==c||null===(t=c.pricingData)||void 0===t?void 0:t.amountSent,l.sourceTokenSymbol,{},!0,u);return{category:o.TransactionGroupCategory.bridge,displayCurrencyAmount:d,sourceTokenSymbol:l.sourceTokenSymbol,sourceTokenAmountSent:null==c||null===(n=c.pricingData)||void 0===n?void 0:n.amountSent}};var s=e("react-redux"),r=e("../../../../shared/modules/selectors/networks"),a=e("../../../hooks/useTokenFiatAmount"),o=e("../../../../shared/constants/transaction"),i=e("../../../ducks/bridge-status/selectors")}}},{package:"$root$",file:"ui/pages/bridge/hooks/useBridgeTokenDisplayData.ts"}],[6829,{"../../../ducks/bridge/selectors":6641,"../../../hooks/useMultichainSelector":6783,"../../../selectors":7403,"../../../selectors/multichain":7407,"@metamask/bridge-controller":1411,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDestinationAccount=void 0;var s=e("react-redux"),r=e("react"),a=e("@metamask/bridge-controller"),o=e("../../../selectors"),i=e("../../../ducks/bridge/selectors"),l=e("../../../selectors/multichain"),u=e("../../../hooks/useMultichainSelector");n.useDestinationAccount=(e=!1)=>{const[t,n]=(0,r.useState)(null),c=(0,u.useMultichainSelector)(l.getMultichainIsEvm),d=(0,s.useSelector)(o.getSelectedEvmInternalAccount),m=(0,s.useSelector)(l.getLastSelectedSolanaAccount),p=(0,u.useMultichainSelector)(o.getSelectedInternalAccount),f=c?d:p,h=(0,s.useSelector)(i.getToChain),g=h&&(0,a.isSolanaChainId)(h.chainId);return(0,r.useEffect)((()=>{n(e?f:g?m:d)}),[g,m,d]),{selectedDestinationAccount:t,setSelectedDestinationAccount:n}}}}},{package:"$root$",file:"ui/pages/bridge/hooks/useDestinationAccount.ts"}],[683,{"./RegistryItem":694,"./RegistryType":695,"./lib":705},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Bytes=void 0;const s=e("./lib"),r=e("./RegistryItem"),a=e("./RegistryType");class o extends r.RegistryItem{constructor(e){super(),this.bytes=e,this.getRegistryType=()=>a.RegistryTypes.BYTES,this.getData=()=>this.bytes,this.toDataItem=()=>new s.DataItem(this.bytes)}}n.Bytes=o,o.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][Bytes][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new o(t)},o.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return o.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/Bytes.js"}],[6830,{"../../../../app/scripts/lib/multichain/address":142,"../../../../shared/lib/multichain/accounts":5639,"../../../ducks/domains":6645,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useExternalAccountResolution=void 0;var s=e("react"),r=e("react-redux"),a=e("../../../../app/scripts/lib/multichain/address"),o=e("../../../ducks/domains"),i=e("../../../../shared/lib/multichain/accounts");n.useExternalAccountResolution=({searchQuery:e,isDestinationSolana:t,accounts:n})=>{const l=(0,r.useDispatch)(),u=(0,r.useSelector)(o.getDomainResolutions);(0,s.useEffect)((()=>{l((0,o.initializeDomainSlice)())}),[l]);const c=(0,s.useMemo)((()=>{const n=e.trim();return!!n&&(t?(0,i.isSolanaAddress)(n):(0,a.isEthAddress)(n))}),[e,t]),d=(0,s.useMemo)((()=>{if(t)return!1;const n=e.trim();return!!n&&n.endsWith(".eth")}),[e,t]);(0,s.useEffect)((()=>{l(d?(0,o.lookupDomainName)(e.trim()):(0,o.resetDomainResolution)())}),[l,d,e]);const m=(0,s.useMemo)((()=>{const t=u||[];if(!c&&!d)return null;if(d&&t.length>0){const{resolvedAddress:s}=t[0],r=e.trim();return n.some((e=>e.address.toLowerCase()===s.toLowerCase()))?null:{address:s,metadata:{name:r},isExternal:!0}}if(c){const t=e.trim();return n.some((e=>e.address.toLowerCase()===t.toLowerCase()))?null:{address:t,metadata:{name:t},isExternal:!0}}return null}),[n,c,d,e,u]);return{isValidAddress:c,isValidEnsName:d,externalAccount:m}}}}},{package:"$root$",file:"ui/pages/bridge/hooks/useExternalAccountResolution.ts"}],[6831,{"../../../../shared/constants/bridge":5590,"../../../../shared/modules/conversion.utils":5657,"../../../ducks/bridge/actions":6639,"./useHandleTx":6833,"@metamask/bridge-controller":1411,"@metamask/transaction-controller":2773,"bignumber.js":3847},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.APPROVAL_TX_ERROR=n.ALLOWANCE_RESET_ERROR=void 0,n.default=function(){const{handleTx:e}=(0,c.default)();return{handleApprovalTx:async({approval:t,quoteResponse:n})=>{try{const s=(0,u.decimalToPrefixedHex)(t.chainId);(0,o.isEthUsdt)(s,n.quote.srcAsset.address)&&await(async({approval:t,quoteResponse:n,hexChainId:s})=>{try{const u=new a.BigNumber(await(0,l.getBridgeERC20Allowance)(i.ETH_USDT_ADDRESS,s)),c=new a.BigNumber(n.quote.srcTokenAmount).plus(n.quote.feeData[o.FeeType.METABRIDGE].amount).toString();if(u.lt(c)&&u.gt(0)){const s=(0,o.getEthUsdtResetData)(),a={...t,data:s};await e({txType:r.TransactionType.bridgeApproval,txParams:a,fieldsToAddToTxMeta:{sourceTokenSymbol:n.quote.srcAsset.symbol}})}}catch(e){throw new Error(`${d}: ${e}`)}})({approval:t,quoteResponse:n,hexChainId:s});return await e({txType:r.TransactionType.bridgeApproval,txParams:t,fieldsToAddToTxMeta:{sourceTokenSymbol:n.quote.srcAsset.symbol}})}catch(e){throw new Error(`${m}: ${e}`)}}}};var s,r=e("@metamask/transaction-controller"),a=e("bignumber.js"),o=e("@metamask/bridge-controller"),i=e("../../../../shared/constants/bridge"),l=e("../../../ducks/bridge/actions"),u=e("../../../../shared/modules/conversion.utils"),c=(s=e("./useHandleTx"))&&s.__esModule?s:{default:s};const d=n.ALLOWANCE_RESET_ERROR="Eth USDT allowance reset failed",m=n.APPROVAL_TX_ERROR="Approve transaction failed"}}},{package:"$root$",file:"ui/pages/bridge/hooks/useHandleApprovalTx.ts"}],[6832,{"../../../../shared/modules/Numeric":5652,"./useHandleTx":6833,"@metamask/bridge-controller":1411,"@metamask/transaction-controller":2773,"bignumber.js":3847,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const{handleTx:e}=(0,u.default)(),t=(0,o.useDispatch)();return{handleBridgeTx:async({quoteResponse:n,approvalTxId:s})=>{const o=new r.BigNumber(n.quote.srcTokenAmount).plus(n.quote.feeData[i.FeeType.METABRIDGE].amount),u=new l.Numeric(o,10).shiftedBy(n.quote.srcAsset.decimals).toString(),c="string"==typeof n.trade,d={destinationChainId:new l.Numeric(n.quote.destChainId,10).toPrefixedHexString().toLowerCase(),sourceTokenAmount:n.quote.srcTokenAmount,sourceTokenSymbol:n.quote.srcAsset.symbol,sourceTokenDecimals:n.quote.srcAsset.decimals,sourceTokenAddress:n.quote.srcAsset.address,destinationTokenAmount:n.quote.destTokenAmount,destinationTokenSymbol:n.quote.destAsset.symbol,destinationTokenDecimals:n.quote.destAsset.decimals,destinationTokenAddress:n.quote.destAsset.address,approvalTxId:s,swapTokenValue:u,isSolana:c,isBridgeTx:!0},m=await e({txType:a.TransactionType.bridge,txParams:n.trade,fieldsToAddToTxMeta:d});return c&&m&&(m.isSolana||(m.isSolana=!0),m.hash&&t({type:"TRANSACTION_CREATED",payload:m})),m}}};var s,r=e("bignumber.js"),a=e("@metamask/transaction-controller"),o=e("react-redux"),i=e("@metamask/bridge-controller"),l=e("../../../../shared/modules/Numeric"),u=(s=e("./useHandleTx"))&&s.__esModule?s:{default:s}}}},{package:"$root$",file:"ui/pages/bridge/hooks/useHandleBridgeTx.ts"}],[6833,{"../../../../shared/lib/accounts/solana-wallet-snap":5627,"../../../../shared/modules/conversion.utils":5657,"../../../../shared/modules/selectors":5673,"../../../ducks/bridge/utils":6642,"../../../ducks/metamask/metamask":6651,"../../../helpers/constants/routes":6669,"../../../hooks/accounts/useMultichainWalletSnapClient":6716,"../../../hooks/useMultichainSelector":6783,"../../../selectors":7403,"../../../selectors/multichain":7407,"../../../store/actions":7421,"@metamask/keyring-api":2002,"@metamask/transaction-controller":2773,react:5129,"react-redux":5087,"react-router-dom":5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,r.useDispatch)(),t=(0,r.useSelector)(y.checkNetworkAndAccountSupports1559),n=(0,r.useSelector)(c.getGasFeeEstimates),T=(0,r.useSelector)(p.getIsSmartTransaction),v=(0,r.useSelector)(y.getNetworkConfigurationIdByChainId),b=(0,r.useSelector)(y.getSelectedInternalAccount),S=(0,r.useSelector)(f.getMultichainCurrentChainId),C=(0,g.useMultichainWalletSnapSender)(h.SOLANA_WALLET_SNAP_ID),w=(0,i.useHistory)(),E=(0,r.useSelector)(y.getMemoizedUnapprovedTemplatedConfirmations),x=(0,r.useSelector)(y.getMemoizedUnapprovedConfirmations);(0,o.useEffect)((()=>{const e=E.find((e=>e.origin===h.SOLANA_WALLET_SNAP_ID)),t=x.find((e=>e.origin===h.SOLANA_WALLET_SNAP_ID));e?w.push(`${k.CONFIRMATION_V_NEXT_ROUTE}/${e.id}`):t&&w.push(`${k.CONFIRM_TRANSACTION_ROUTE}/${t.id}`)}),[w,E,x]);const I=(0,d.useMultichainSelector)(f.getMultichainIsSolana);return{handleTx:async({txType:r,txParams:o,fieldsToAddToTxMeta:i})=>I&&r===s.TransactionType.bridge&&"string"==typeof o?(console.log("Handling Solana bridge transaction"),(async({txType:t,txParams:n,fieldsToAddToTxMeta:r})=>{await e((0,l.setDefaultHomeActiveTabName)("activity"));const o=await C.send({id:crypto.randomUUID(),jsonrpc:"2.0",method:a.KeyringRpcMethod.SubmitRequest,params:{request:{params:{account:{address:b.address},transaction:n,scope:S},method:"signAndSendTransaction"},id:crypto.randomUUID(),account:b.id,scope:S}});let i;console.log("===SOLANA=== snap response:",o),"string"==typeof o?i=o:o&&"object"==typeof o&&o.result&&"object"==typeof o.result&&(console.log("===SOLANA=== snap response result:",o.result),i=o.result.signature||o.result.txid||o.result.hash||o.result.txHash),console.log("===SOLANA=== Extracted signature:",i);const u={...r,id:crypto.randomUUID(),chainId:S,networkClientId:b.id,time:Date.now(),txParams:{data:n},type:t,status:s.TransactionStatus.submitted,hash:i,isSolana:!0,isBridgeTx:!0,actionId:t,origin:h.SOLANA_WALLET_SNAP_ID};return console.log("===SOLANA=== Creating bridge transaction meta with ALL fields:",{id:u.id,hash:u.hash,isSolana:u.isSolana,isBridgeTx:u.isBridgeTx,type:u.type,chainId:u.chainId,networkClientId:u.networkClientId,time:u.time,status:u.status,origin:u.origin,actionId:u.actionId,fieldsFromParent:{...r},txParams:u.txParams,fullObject:u}),u})({txType:r,txParams:"string"==typeof o?o:JSON.stringify(o),fieldsToAddToTxMeta:i})):(async({txType:r,txParams:a,fieldsToAddToTxMeta:o})=>{const i=(0,m.decimalToPrefixedHex)(a.chainId),{maxFeePerGas:c,maxPriorityFeePerGas:d}=await(0,u.getTxGasEstimates)({networkAndAccountSupports1559:t,networkGasFeeEstimates:n,txParams:a,hexChainId:i}),p=(0,u.getHexMaxGasLimit)(a.gasLimit??0),f={...a,chainId:i,gasLimit:p,gas:p,maxFeePerGas:c,maxPriorityFeePerGas:d},h=v[i];let g;return g=r===s.TransactionType.bridge&&T?await(0,l.addTransaction)(f,{networkClientId:h,requireApproval:!1,type:r}):await(0,l.addTransactionAndWaitForPublish)(f,{networkClientId:h,requireApproval:!1,type:r}),e((0,l.updateTransaction)({...g,...o},!0)),await(0,l.forceUpdateMetamaskState)(e),g})({txType:r,txParams:o,fieldsToAddToTxMeta:i})}};var s=e("@metamask/transaction-controller"),r=e("react-redux"),a=e("@metamask/keyring-api"),o=e("react"),i=e("react-router-dom"),l=e("../../../store/actions"),u=e("../../../ducks/bridge/utils"),c=e("../../../ducks/metamask/metamask"),d=e("../../../hooks/useMultichainSelector"),m=e("../../../../shared/modules/conversion.utils"),p=e("../../../../shared/modules/selectors"),f=e("../../../selectors/multichain"),h=e("../../../../shared/lib/accounts/solana-wallet-snap"),g=e("../../../hooks/accounts/useMultichainWalletSnapClient"),y=e("../../../selectors"),k=e("../../../helpers/constants/routes")}}},{package:"$root$",file:"ui/pages/bridge/hooks/useHandleTx.ts"}],[6834,{"../../../ducks/bridge/selectors":6641,"../../../selectors/multichain":7407,react:5129,"react-redux":5087,"react-router-dom":5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsMultichainSwap=void 0;var s=e("react-redux"),r=e("react-router-dom"),a=e("react"),o=e("../../../selectors/multichain"),i=e("../../../ducks/bridge/selectors");n.useIsMultichainSwap=()=>{const{search:e,pathname:t}=(0,r.useLocation)(),n=(0,r.useHistory)(),l=(0,s.useSelector)(o.getMultichainIsSolana),u=(0,s.useSelector)(i.getIsSwap);(0,a.useEffect)((()=>{const s=new URLSearchParams(e),r="true"===s.get("swaps");u&&l&&!r&&(s.set("swaps","true"),n.replace({pathname:t,search:s.toString()}))}),[u,l,n,e,t]);return(0,a.useMemo)((()=>"true"===new URLSearchParams(e).get("swaps")&&l),[l,e])}}}},{package:"$root$",file:"ui/pages/bridge/hooks/useIsMultichainSwap.tsx"}],[6835,{"../../../../shared/constants/metametrics":5600,"../../../../shared/constants/network":5604,"../../../../shared/lib/bridge-status/metrics":5629,"../../../../shared/lib/bridge-status/utils":5630,"../../../../shared/modules/selectors/networks":5674,"../../../../shared/types/bridge-status":5682,"../../../ducks/bridge-status/actions":6637,"../../../ducks/bridge/actions":6639,"../../../ducks/bridge/selectors":6641,"../../../helpers/constants/routes":6669,"../../../hooks/bridge/useCrossChainSwapsEventTracker":6728,"../../../hooks/useMultichainSelector":6783,"../../../selectors":7403,"../../../selectors/multichain":7407,"../../../store/actions":7421,"./useAddToken":6827,"./useHandleApprovalTx":6831,"./useHandleBridgeTx":6832,"@metamask/bridge-controller":1411,"@metamask/utils":2822,"ethereumjs-util":4197,"react-redux":5087,"react-router-dom":5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,a.useHistory)(),t=(0,s.useDispatch)(),n=(0,s.useSelector)((e=>e)),o=(0,s.useSelector)(f.getCurrentChainId),{addSourceToken:x,addDestToken:I}=(0,C.default)(),{handleApprovalTx:N}=(0,w.default)(),{handleBridgeTx:O}=(0,E.default)(),B=(0,s.useSelector)(d.isHardwareWallet),{slippage:R}=(0,s.useSelector)(m.getQuoteRequest),F=(0,s.useSelector)(d.getSelectedAddress),j=(0,k.useCrossChainSwapsEventTracker)(),L=(0,b.useMultichainSelector)(S.getMultichainIsEvm);return{submitBridgeTransaction:async s=>{B&&e.push(`${l.CROSS_CHAIN_SWAP_ROUTE}${l.AWAITING_SIGNATURES_ROUTE}`);const a={bridgeId:s.quote.bridgeId,bridge:s.quote.bridges[0],srcChainId:s.quote.srcChainId,destChainId:s.quote.destChainId,quote:s.quote,refuel:Boolean(s.quote.refuel)};let d,m;try{null!=s&&s.approval&&(d=await N({approval:s.approval,quoteResponse:s}))}catch(r){var f;A("Approve transaction failed",r),B&&D(r)?(t((0,h.setWasTxDeclined)(!0)),e.push(`${l.CROSS_CHAIN_SWAP_ROUTE}${l.PREPARE_SWAP_ROUTE}`)):(await t((0,u.setDefaultHomeActiveTabName)("activity")),e.push(l.DEFAULT_ROUTE));const o=(0,g.getInitialHistoryItem)({quoteResponse:(0,g.serializeQuoteMetadata)(s),bridgeTxMetaId:"dummy-id",startTime:null===(f=d)||void 0===f?void 0:f.time,slippagePercentage:R??0,initialDestAssetBalance:undefined,targetContractAddress:undefined,account:F,statusRequest:a}),i=(0,T.getCommonProperties)(o,n),c=M(r)?{allowance_reset_transaction:v.StatusTypes.FAILED}:undefined,m=P(r)?{approval_transaction:v.StatusTypes.FAILED}:undefined;return void j({event:y.MetaMetricsEventName.ActionFailed,properties:{...i,...c,...m,error_message:r.message}})}if([p.CHAIN_IDS.LINEA_MAINNET,p.CHAIN_IDS.LINEA_GOERLI,p.CHAIN_IDS.LINEA_SEPOLIA].includes(o)&&null!=s&&s.approval){A("Delaying submitting bridge tx to make Linea confirmation more likely");const e=new Promise((e=>setTimeout(e,_)));await e}try{var k;m=await O({quoteResponse:s,approvalTxId:null===(k=d)||void 0===k?void 0:k.id})}catch(n){return A("Bridge transaction failed",n),void(B&&D(n)?(t((0,h.setWasTxDeclined)(!0)),e.push(`${l.CROSS_CHAIN_SWAP_ROUTE}${l.PREPARE_SWAP_ROUTE}`)):(await t((0,u.setDefaultHomeActiveTabName)("activity")),e.push(l.DEFAULT_ROUTE)))}const b={...a,srcTxHash:m.hash},S=!0===m.isSolana;t((0,c.startPollingForBridgeTxStatus)({bridgeTxMeta:m,statusRequest:{...b,srcTxHash:S&&m.hash?m.hash:b.srcTxHash},quoteResponse:(0,g.serializeQuoteMetadata)(s),slippagePercentage:R??0,startTime:m.time})),L&&(s.quote.srcAsset.address!==(0,r.zeroAddress)()&&x(s),s.quote.destAsset.address===(0,r.zeroAddress)()||(0,i.isSolanaChainId)(s.quote.destChainId)||await I(s)),await t((0,u.setDefaultHomeActiveTabName)("activity")),S||e.push({pathname:l.DEFAULT_ROUTE,state:{stayOnHomePage:!0}})}}},n.isApprovalTxError=n.isAllowanceResetError=void 0;var s=e("react-redux"),r=e("ethereumjs-util"),a=e("react-router-dom"),o=e("@metamask/utils"),i=e("@metamask/bridge-controller"),l=e("../../../helpers/constants/routes"),u=e("../../../store/actions"),c=e("../../../ducks/bridge-status/actions"),d=e("../../../selectors"),m=e("../../../ducks/bridge/selectors"),p=e("../../../../shared/constants/network"),f=e("../../../../shared/modules/selectors/networks"),h=e("../../../ducks/bridge/actions"),g=e("../../../../shared/lib/bridge-status/utils"),y=e("../../../../shared/constants/metametrics"),k=e("../../../hooks/bridge/useCrossChainSwapsEventTracker"),T=e("../../../../shared/lib/bridge-status/metrics"),v=e("../../../../shared/types/bridge-status"),b=e("../../../hooks/useMultichainSelector"),S=e("../../../selectors/multichain"),C=I(e("./useAddToken")),w=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("./useHandleApprovalTx")),E=I(e("./useHandleBridgeTx"));function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}function I(e){return e&&e.__esModule?e:{default:e}}const A=(0,o.createProjectLogger)("bridge"),_=5e3,M=e=>(e.message??"").includes(w.ALLOWANCE_RESET_ERROR);n.isAllowanceResetError=M;const P=e=>(e.message??"").includes(w.APPROVAL_TX_ERROR);n.isApprovalTxError=P;const D=e=>{var t;const n=(null===(t=e.message)||void 0===t?void 0:t.toLowerCase())??"";return n.includes("ledger")&&(n.includes("rejected")||n.includes("denied")||n.includes("error while signing"))||n.includes("trezor")&&(n.includes("cancelled")||n.includes("rejected"))||n.includes("lattice")&&n.includes("rejected")||n.includes("user rejected")||n.includes("user cancelled")}}}},{package:"$root$",file:"ui/pages/bridge/hooks/useSubmitBridgeTransaction.ts"}],[6836,{"../../../shared/modules/selectors/networks":5674,"../../components/component-library":6193,"../../components/multichain/pages/page":6443,"../../contexts/i18n":6623,"../../ducks/bridge/actions":6639,"../../ducks/swaps/swaps":6659,"../../helpers/constants/design-system":6663,"../../helpers/constants/routes":6669,"../../helpers/higher-order-components/feature-toggled-route":6680,"../../hooks/bridge/useBridgeExchangeRates":6724,"../../hooks/bridge/useBridging":6726,"../../hooks/bridge/useQuoteFetchEvents":6731,"../../hooks/useGasFeeEstimates":6772,"../../selectors":7403,"../../store/actions":7421,"../swaps/hooks/useSwapsFeatureFlags":7347,"./awaiting-signatures/awaiting-signatures":6826,"./awaiting-signatures/awaiting-signatures-cancel-button":6825,"./hooks/useIsMultichainSwap":6834,"./prepare/bridge-transaction-settings-modal":6843,"./prepare/prepare-bridge-page":6849,react:5129,"react-redux":5087,"react-router-dom":5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=A(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),r=e("react-redux"),a=e("react-router-dom"),o=e("../../contexts/i18n"),i=e("../../ducks/swaps/swaps"),l=e("../../helpers/constants/routes"),u=e("../../store/actions"),c=I(e("../../helpers/higher-order-components/feature-toggled-route")),d=e("../../components/component-library"),m=e("../../../shared/modules/selectors/networks"),p=e("../../selectors"),f=I(e("../../hooks/bridge/useBridging")),h=e("../../components/multichain/pages/page"),g=e("../swaps/hooks/useSwapsFeatureFlags"),y=e("../../ducks/bridge/actions"),k=e("../../hooks/useGasFeeEstimates"),T=e("../../hooks/bridge/useBridgeExchangeRates"),v=e("../../hooks/bridge/useQuoteFetchEvents"),b=e("../../helpers/constants/design-system"),S=I(e("./prepare/prepare-bridge-page")),C=I(e("./awaiting-signatures/awaiting-signatures-cancel-button")),w=I(e("./awaiting-signatures/awaiting-signatures")),E=e("./prepare/bridge-transaction-settings-modal"),x=e("./hooks/useIsMultichainSwap");function I(e){return e&&e.__esModule?e:{default:e}}function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(A=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,s.useContext)(o.I18nContext);(0,g.useSwapsFeatureFlags)(),(0,f.default)();const t=(0,a.useHistory)(),n=(0,r.useDispatch)(),I=(0,r.useSelector)(p.getIsBridgeEnabled),A=(0,r.useSelector)(m.getSelectedNetworkClientId),_=async()=>{await n((0,y.resetBridgeState)())};(0,s.useEffect)((()=>(window.addEventListener("beforeunload",_),()=>{window.removeEventListener("beforeunload",_),_()})),[]),(0,k.useGasFeeEstimates)(A),(0,T.useBridgeExchangeRates)(),(0,v.useQuoteFetchEvents)();const M=(0,x.useIsMultichainSwap)(),[P,D]=(0,s.useState)(!1);return s.default.createElement(h.Page,{className:"bridge__container"},s.default.createElement(h.Header,{textProps:{variant:b.TextVariant.headingSm},startAccessory:s.default.createElement(d.ButtonIcon,{iconName:d.IconName.ArrowLeft,size:d.ButtonIconSize.Sm,ariaLabel:e("back"),onClick:async()=>{t.push({pathname:l.DEFAULT_ROUTE,state:{stayOnHomePage:!0}}),n((0,i.clearSwapsState)()),await n((0,u.resetBackgroundSwapsState)()),await _()}}),endAccessory:s.default.createElement(d.ButtonIcon,{iconName:d.IconName.Setting,size:d.ButtonIconSize.Sm,ariaLabel:e("settings"),onClick:()=>{D(!0)}})},e(M?"swap":"bridge")),s.default.createElement(h.Content,{padding:0},s.default.createElement(a.Switch,null,s.default.createElement(c.default,{redirectRoute:l.SWAPS_MAINTENANCE_ROUTE,flag:I,path:l.CROSS_CHAIN_SWAP_ROUTE+l.PREPARE_SWAP_ROUTE,render:()=>s.default.createElement(s.default.Fragment,null,s.default.createElement(E.BridgeTransactionSettingsModal,{isOpen:P,onClose:()=>{D(!1)}}),s.default.createElement(S.default,null))}),s.default.createElement(a.Route,{path:l.CROSS_CHAIN_SWAP_ROUTE+l.AWAITING_SIGNATURES_ROUTE},s.default.createElement(h.Content,null,s.default.createElement(w.default,null)),s.default.createElement(h.Footer,null,s.default.createElement(C.default,null))))))}}}},{package:"$root$",file:"ui/pages/bridge/index.tsx"}],[6837,{"../../../components/component-library":6193,"../../../helpers/constants/design-system":6663,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=(s=e("react"))&&s.__esModule?s:{default:s},a=e("../../../components/component-library"),o=e("../../../helpers/constants/design-system");function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},i.apply(null,arguments)}n.default=e=>r.default.createElement(a.Container,i({display:o.Display.Flex,flexDirection:o.FlexDirection.Column,width:o.BlockSize.Full},e))}}},{package:"$root$",file:"ui/pages/bridge/layout/column.tsx"}],[6838,{"./column":6837,"./row":6839,"./tooltip":6840},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Column",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"Row",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"Tooltip",{enumerable:!0,get:function(){return a.default}});var s=o(e("./column")),r=o(e("./row")),a=o(e("./tooltip"));function o(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/pages/bridge/layout/index.tsx"}],[6839,{"../../../components/component-library":6193,"../../../helpers/constants/design-system":6663,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=(s=e("react"))&&s.__esModule?s:{default:s},a=e("../../../components/component-library"),o=e("../../../helpers/constants/design-system");function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},i.apply(null,arguments)}n.default=e=>r.default.createElement(a.Container,i({display:o.Display.Flex,flexDirection:o.FlexDirection.Row,justifyContent:o.JustifyContent.spaceBetween,flexWrap:o.FlexWrap.NoWrap,alignItems:o.AlignItems.center},e))}}},{package:"$root$",file:"ui/pages/bridge/layout/row.tsx"}],[684,{".":702,"./RegistryItem":694,"./RegistryType":695,"./lib":705,buffer:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoAccount=void 0;const s=e("."),r=e("./lib"),a=e("./RegistryItem"),o=e("./RegistryType");var i;!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.outputDescriptors=2]="outputDescriptors"}(i||(i={}));class l extends a.RegistryItem{constructor(e,t){super(),this.masterFingerprint=e,this.outputDescriptors=t,this.getRegistryType=()=>o.RegistryTypes.CRYPTO_ACCOUNT,this.getMasterFingerprint=()=>this.masterFingerprint,this.getOutputDescriptors=()=>this.outputDescriptors,this.toDataItem=()=>{const e={};return this.masterFingerprint&&(e[i.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.outputDescriptors&&(e[i.outputDescriptors]=this.outputDescriptors.map((e=>e.toDataItem()))),new r.DataItem(e)}}}n.CryptoAccount=l,l.fromDataItem=e=>{const n=e.getData(),r=t.alloc(4),a=n[i.masterFingerprint];a&&r.writeUInt32BE(a,0);const o=n[i.outputDescriptors].map((e=>s.CryptoOutput.fromDataItem(e)));return new l(r,o)},l.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return l.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoAccount.js"}],[6840,{"../../../components/component-library":6193,"../../../helpers/constants/design-system":6663,"./column":6837,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),a=e("../../../components/component-library"),o=e("../../../helpers/constants/design-system"),i=(s=e("./column"))&&s.__esModule?s:{default:s};function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},u.apply(null,arguments)}const c=r.default.forwardRef((({children:e,title:t,triggerElement:n,disabled:s=!1,onClose:l,iconName:c,style:d,...m},p)=>{const[f,h]=(0,r.useState)(!1),[g,y]=(0,r.useState)(null),k=()=>h(!1);return r.default.createElement(a.Box,{ref:p},r.default.createElement(a.Box,{ref:e=>y(e),onMouseEnter:()=>h(!0),onMouseLeave:k,display:o.Display.Flex},n??(c&&r.default.createElement(a.Icon,{color:o.IconColor.iconAlternativeSoft,name:c,size:a.IconSize.Sm}))??r.default.createElement(a.Icon,{name:a.IconName.Question,color:o.IconColor.iconAlternativeSoft,size:a.IconSize.Sm})),!s&&r.default.createElement(a.Popover,u({position:a.PopoverPosition.Auto,referenceElement:g,isOpen:f,onClickOutside:k,style:{maxWidth:"240px",backgroundColor:"var(--color-text-default)",paddingInline:"16px",paddingTop:"8px",paddingBottom:"8px",transitionTimingFunction:"linear",display:"inherit",...d},preventOverflow:!0,flip:!0,hasArrow:!0,isPortal:!0},m),r.default.createElement(i.default,{gap:4},t&&r.default.createElement(a.PopoverHeader,{color:o.TextColor.infoInverse,textAlign:o.TextAlign.Center,justifyContent:l?o.JustifyContent.spaceBetween:o.JustifyContent.center,onClose:l,childrenWrapperProps:{style:{whiteSpace:"nowrap"}}},t),r.default.createElement(a.Text,{justifyContent:o.JustifyContent.center,color:o.TextColor.infoInverse},e))))}));n.default=c}}},{package:"$root$",file:"ui/pages/bridge/layout/tooltip.tsx"}],[6841,{"../../../../shared/constants/metametrics":5600,"../../../components/component-library":6193,"../../../ducks/bridge/selectors":6641,"../../../helpers/constants/design-system":6663,"../../../hooks/bridge/events/useRequestMetadataProperties":6720,"../../../hooks/bridge/events/useRequestProperties":6721,"../../../hooks/bridge/events/useTradeProperties":6722,"../../../hooks/bridge/useCrossChainSwapsEventTracker":6728,"../../../hooks/bridge/useIsTxSubmittable":6729,"../../../hooks/bridge/useLatestBalance":6730,"../../../hooks/useI18nContext":6775,"../hooks/useSubmitBridgeTransaction":6835,"../layout":6838,"../utils/quote":6863,"@metamask/bridge-controller":1411,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeCTAButton=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),r=e("react-redux"),a=e("@metamask/bridge-controller"),o=e("../../../components/component-library"),i=e("../../../ducks/bridge/selectors"),l=e("../../../hooks/useI18nContext"),u=v(e("../hooks/useSubmitBridgeTransaction")),c=e("../../../helpers/constants/design-system"),d=v(e("../../../hooks/bridge/useLatestBalance")),m=e("../../../hooks/bridge/useIsTxSubmittable"),p=e("../../../hooks/bridge/useCrossChainSwapsEventTracker"),f=e("../../../hooks/bridge/events/useRequestProperties"),h=e("../../../hooks/bridge/events/useRequestMetadataProperties"),g=e("../../../hooks/bridge/events/useTradeProperties"),y=e("../../../../shared/constants/metametrics"),k=e("../layout"),T=e("../utils/quote");function v(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}n.BridgeCTAButton=({onFetchNewQuotes:e,needsDestinationAddress:t=!1})=>{const n=(0,l.useI18nContext)(),v=(0,r.useSelector)(i.getFromToken),b=(0,r.useSelector)(i.getToToken),S=(0,r.useSelector)(i.getFromChain),C=(0,r.useSelector)(i.getFromAmount),{isLoading:w,activeQuote:E,isQuoteGoingToRefresh:x,quotesLastFetchedMs:I}=(0,r.useSelector)(i.getBridgeQuotes),A=(0,r.useSelector)(i.getQuoteRefreshRate),_=(0,T.isQuoteExpired)(x,A,I),{submitBridgeTransaction:M}=(0,u.default)(),[P,D]=(0,s.useState)(!1),{isNoQuotesAvailable:N,isInsufficientBalance:O,isInsufficientGasBalance:B,isInsufficientGasForQuote:R}=(0,r.useSelector)(i.getValidationErrors),F=(0,r.useSelector)(i.getWasTxDeclined),j=(0,d.default)(v),L=(0,s.useMemo)((()=>null!=S&&S.chainId?(0,a.getNativeAssetForChainId)(S.chainId):null),[null==S?void 0:S.chainId]),$=(0,d.default)(L),q=(0,m.useIsTxSubmittable)(),U=(0,p.useCrossChainSwapsEventTracker)(),{quoteRequestProperties:W}=(0,f.useRequestProperties)(),H=(0,h.useRequestMetadataProperties)(),V=(0,g.useTradeProperties)(),z=O(j),G=B($),Q=R($),K=(0,s.useMemo)((()=>F?"youDeclinedTheTransaction":_?"bridgeQuoteExpired":!w||q||E?G||N?undefined:z||Q?"alertReasonInsufficientBalance":C?t?"bridgeSelectDestinationAccount":q?"submit":"swapSelectToken":b?t?"bridgeEnterAmountAndSelectAccount":"bridgeEnterAmount":t?"bridgeSelectTokenAmountAndAccount":"bridgeSelectTokenAndAmount":undefined),[w,C,b,q,z,G,Q,F,_,t,E,N]),J=(0,s.useMemo)((()=>F||_?"bridgeFetchNewQuotes":undefined),[F,_]);return E&&!J?s.default.createElement(o.ButtonPrimary,{width:c.BlockSize.Full,size:E?o.ButtonPrimarySize.Md:o.ButtonPrimarySize.Lg,variant:c.TextVariant.bodyMd,"data-testid":"bridge-cta-button",style:{boxShadow:"none"},onClick:async()=>{if(E&&q&&!P)try{D(!0),W&&H&&V&&U({event:y.MetaMetricsEventName.ActionSubmitted,properties:{...W,...H,...V}}),await M(E)}finally{D(!1)}},loading:P,disabled:!q||_||P||t},K?n(K):""):s.default.createElement(k.Row,{alignItems:c.AlignItems.center,justifyContent:c.JustifyContent.center,gap:1},s.default.createElement(o.Text,{variant:c.TextVariant.bodyMd,textAlign:c.TextAlign.Center,color:c.TextColor.textAlternativeSoft},K?n(K):""),J&&s.default.createElement(o.ButtonLink,{as:"a",variant:c.TextVariant.bodyMd,style:{whiteSpace:"nowrap"},onClick:e},n(J)))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/bridge-cta-button.tsx"}],[6842,{"../../../../shared/constants/multichain/networks":5603,"../../../../shared/constants/time":5617,"../../../../shared/lib/multichain/networks":5643,"../../../components/component-library":6193,"../../../components/multichain/asset-picker-amount/asset-picker":6306,"../../../components/multichain/asset-picker-amount/asset-picker-modal/asset-picker-modal-tabs":6301,"../../../ducks/bridge/selectors":6641,"../../../ducks/locale/locale":6650,"../../../ducks/metamask/metamask":6651,"../../../helpers/constants/design-system":6663,"../../../helpers/utils/util":6712,"../../../hooks/bridge/useLatestBalance":6730,"../../../hooks/useCopyToClipboard":6763,"../../../hooks/useI18nContext":6775,"../hooks/useIsMultichainSwap":6834,"../layout":6838,"../utils/quote":6863,"./components/bridge-asset-picker-button":6844,"@metamask/bridge-controller":1411,"@metamask/etherscan-link":1926,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeInputGroup=void 0;var s,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),a=e("react-redux"),o=e("@metamask/bridge-controller"),i=e("@metamask/etherscan-link"),l=e("../../../components/component-library"),u=e("../../../components/multichain/asset-picker-amount/asset-picker"),c=e("../../../components/multichain/asset-picker-amount/asset-picker-modal/asset-picker-modal-tabs"),d=e("../../../hooks/useI18nContext"),m=e("../../../ducks/metamask/metamask"),p=e("../utils/quote"),f=e("../layout"),h=e("../../../helpers/constants/design-system"),g=(s=e("../../../hooks/bridge/useLatestBalance"))&&s.__esModule?s:{default:s},y=e("../../../ducks/bridge/selectors"),k=e("../../../helpers/utils/util"),T=e("../../../hooks/useCopyToClipboard"),v=e("../../../../shared/constants/time"),b=e("../../../ducks/locale/locale"),S=e("../hooks/useIsMultichainSwap"),C=e("../../../../shared/constants/multichain/networks"),w=e("../../../../shared/lib/multichain/networks"),E=e("./components/bridge-asset-picker-button");function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},I.apply(null,arguments)}const A=e=>e.replace(/[^\d.]+/gu,"").split(".",2).join(".");n.BridgeInputGroup=({header:e,token:t,onAssetChange:n,onAmountChange:s,networkProps:x,isTokenListLoading:_,customTokenListGenerator:M,amountFieldProps:P,amountInFiat:D,onMaxButtonClick:N,isMultiselectEnabled:O,onBlockExplorerClick:B,buttonProps:R})=>{var F;const j=(0,d.useI18nContext)(),{isLoading:L}=(0,a.useSelector)(y.getBridgeQuotes),{isInsufficientBalance:$,isEstimatedReturnLow:q}=(0,a.useSelector)(y.getValidationErrors),U=(0,a.useSelector)(m.getCurrentCurrency),W=(0,a.useSelector)(b.getIntlLocale),H=null==x||null===(F=x.network)||void 0===F?void 0:F.chainId,V=(0,g.default)(t),[,z]=(0,T.useCopyToClipboard)(v.MINUTE),G=(0,r.useRef)(null),Q=(null==P?void 0:P.readOnly)||(null==P?void 0:P.disabled);(0,r.useEffect)((()=>{var e;!Q&&G.current&&(G.current.value=(null==P||null===(e=P.value)||void 0===e?void 0:e.toString())??"",G.current.focus())}),[null==P?void 0:P.value,Q,t]);const K=(0,S.useIsMultichainSwap)();return r.default.createElement(f.Column,{paddingInline:6,gap:1},r.default.createElement(f.Row,{gap:4},r.default.createElement(l.TextField,I({inputProps:{disableStateStyles:!0,textAlign:h.TextAlign.Start,style:{fontWeight:400,fontSize:Math.max(14,9/Math.max(9,((null==P?void 0:P.value)??"").toString().length)*36),transition:"font-size 0.1s",padding:0}},style:{minWidth:96,maxWidth:190,opacity:Q&&null!=P&&P.value?1:undefined},display:h.Display.Flex,inputRef:G,type:l.TextFieldType.Text,className:"amount-input",placeholder:"0",onKeyPress:e=>{var t;e&&("."===e.key&&null!==(t=P.value)&&void 0!==t&&t.toString().includes(".")?e.preventDefault():/^[\d.]{1}$/u.test(e.key)||e.preventDefault())},onPaste:e=>{e.preventDefault();const t=A(e.clipboardData.getData("text"));null==s||s(t??"")},onChange:e=>{e.preventDefault(),e.stopPropagation();const t=A(e.target.value);null==s||s(t??"")}},P)),r.default.createElement(u.AssetPicker,{header:e,visibleTabs:[c.TabName.TOKENS],asset:t??undefined,onAssetChange:n,networkProps:x,customTokenListGenerator:M,isTokenListLoading:_,isMultiselectEnabled:O},((e,n)=>Q&&!t?r.default.createElement(l.Button,{"data-testid":R.testId,onClick:e,size:l.ButtonSize.Lg,paddingLeft:6,paddingRight:6,fontWeight:h.FontWeight.Normal,style:{whiteSpace:"nowrap"}},j(K?"swapSwapTo":"bridgeTo")):r.default.createElement(E.BridgeAssetPickerButton,{onClick:e,networkImageSrc:n,asset:t??undefined,networkProps:x,"data-testid":R.testId})))),r.default.createElement(f.Row,{justifyContent:h.JustifyContent.spaceBetween},r.default.createElement(f.Row,null,r.default.createElement(l.Text,{variant:h.TextVariant.bodyMd,fontWeight:h.FontWeight.Normal,color:Q&&q?h.TextColor.warningDefault:h.TextColor.textAlternativeSoft,textAlign:h.TextAlign.End,ellipsis:!0},Q&&L&&"0"===P.value?j("bridgeCalculatingAmount"):undefined,D&&(0,p.formatCurrencyAmount)(D,U,2))),r.default.createElement(l.Text,{display:h.Display.Flex,gap:1,variant:h.TextVariant.bodyMd,color:!Q&&$(V)?h.TextColor.errorDefault:h.TextColor.textAlternativeSoft,onClick:()=>{Q&&t&&H?(()=>{if(t&&H){const s=(0,o.formatChainIdToCaip)(H);let r="";if(s===C.MultichainNetworks.SOLANA){const e=C.MULTICHAIN_NETWORK_BLOCK_EXPLORER_FORMAT_URLS_MAP[s];e&&(r=(0,w.formatBlockExplorerAddressUrl)(e,t.address))}else{var e,n;const s=null==x||null===(e=x.network)||void 0===e||null===(e=e.blockExplorerUrls)||void 0===e?void 0:e[(null==x||null===(n=x.network)||void 0===n?void 0:n.defaultBlockExplorerUrlIndex)??0];s&&(r=(0,i.getAccountLink)(t.address,H,{blockExplorerUrl:s},undefined))}r&&(z(r),null==B||B(t))}})():t&&H&&z(t.address)},as:Q?"a":"p",style:{cursor:Q?"pointer":"default",textDecoration:Q?"underline":"none"}},Q&&t&&H&&((0,o.isNativeAddress)(t.address)?undefined:(0,k.shortenString)(t.address,{truncatedCharLimit:11,truncatedStartChars:4,truncatedEndChars:4,skipCharacterInEnd:!1})),!Q&&V?(0,p.formatTokenAmount)(W,V,null==t?void 0:t.symbol):undefined,N&&t&&!(0,o.isNativeAddress)(t.address)&&V&&r.default.createElement(l.ButtonLink,{variant:h.TextVariant.bodyMd,onClick:()=>N(null==V?void 0:V.toFixed())},j("max")))))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/bridge-input-group.tsx"}],[6843,{"../../../../shared/constants/metametrics":5600,"../../../components/component-library":6193,"../../../ducks/bridge/actions":6639,"../../../ducks/bridge/selectors":6641,"../../../helpers/constants/design-system":6663,"../../../hooks/bridge/useCrossChainSwapsEventTracker":6728,"../../../hooks/useI18nContext":6775,"../layout":6838,"@metamask/bridge-controller":1411,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeTransactionSettingsModal=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),r=e("react-redux"),a=e("@metamask/bridge-controller"),o=e("../../../components/component-library"),i=e("../../../hooks/useI18nContext"),l=e("../../../helpers/constants/design-system"),u=e("../../../ducks/bridge/selectors"),c=e("../../../ducks/bridge/actions"),d=e("../../../hooks/bridge/useCrossChainSwapsEventTracker"),m=e("../../../../shared/constants/metametrics"),p=e("../layout");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}const h=[a.BRIDGE_DEFAULT_SLIPPAGE,3];n.BridgeTransactionSettingsModal=({onClose:e,isOpen:t})=>{const n=(0,i.useI18nContext)(),a=(0,d.useCrossChainSwapsEventTracker)(),f=(0,r.useDispatch)(),g=(0,r.useSelector)(u.getSlippage),[y,k]=(0,s.useState)(g),[T,v]=(0,s.useState)(g&&!h.includes(g)?g.toString():undefined),[b,S]=(0,s.useState)(!0),C=(()=>{if(!T)return null;const e=Number(T.replace(",","."));return e<.5?{severity:l.SEVERITIES.WARNING,text:n("swapSlippageLowDescription",[e]),title:n("swapSlippageLowTitle")}:null})();return s.default.createElement(o.Modal,{isOpen:t,onClose:e,className:"bridge-settings-modal"},s.default.createElement(o.ModalOverlay,null),s.default.createElement(o.ModalContent,null,s.default.createElement(o.ModalHeader,{onClose:e},n("transactionSettings")),s.default.createElement(p.Column,{gap:3,padding:4},s.default.createElement(p.Row,{gap:1,justifyContent:l.JustifyContent.flexStart},s.default.createElement(o.Text,null,n("swapsMaxSlippage")),s.default.createElement(p.Tooltip,{position:o.PopoverPosition.Top,iconName:o.IconName.Info,style:{zIndex:1051}},n("swapSlippageTooltip"))),s.default.createElement(p.Row,{gap:2,justifyContent:l.JustifyContent.flexStart},h.map((e=>s.default.createElement(o.Button,{key:e,size:o.ButtonSize.Sm,onClick:t=>{t.preventDefault(),t.stopPropagation(),k(e),v(undefined)},variant:o.ButtonVariant.Secondary,borderColor:y===e&&b?l.BorderColor.primaryDefault:l.BorderColor.borderDefault,borderWidth:y===e&&b?2:1,backgroundColor:y===e&&b?l.BackgroundColor.primaryMuted:l.BackgroundColor.backgroundDefault},s.default.createElement(o.Text,{color:y===e&&b?l.TextColor.primaryDefault:l.TextColor.textDefault},e,"%")))),b&&s.default.createElement(o.Button,{size:o.ButtonSize.Sm,variant:o.ButtonVariant.Secondary,borderColor:T===undefined?l.BorderColor.borderDefault:l.BorderColor.primaryDefault,borderWidth:T===undefined?1:2,backgroundColor:T===undefined?l.BackgroundColor.backgroundDefault:l.BackgroundColor.primaryMuted,onClick:e=>{e.preventDefault(),e.stopPropagation(),S(!1)}},s.default.createElement(o.Text,{color:T===undefined?l.TextColor.textDefault:l.TextColor.primaryDefault},T===undefined?n("customSlippage"):`${T}%`)),!b&&s.default.createElement(o.TextField,{borderColor:l.BorderColor.primaryDefault,borderWidth:2,borderRadius:l.BorderRadius.pill,type:o.TextFieldType.Text,value:T,onChange:e=>{const{value:t}=e.target;(""===t||/^\d*[.,]?\d*$/u.test(t))&&(k(undefined),v(t))},autoFocus:!0,onBlur:()=>{S(!0)},onFocus:()=>{S(!1)},endAccessory:s.default.createElement(o.Text,{variant:l.TextVariant.bodyMd},"%")})),C&&s.default.createElement(o.Box,{marginTop:5},s.default.createElement(o.BannerAlert,{severity:C.severity,title:C.title,titleProps:{"data-testid":"swaps-banner-title"}},s.default.createElement(o.Text,null,C.text)))),s.default.createElement(o.ModalFooter,null,s.default.createElement(o.ButtonPrimary,{width:l.BlockSize.Full,size:o.ButtonPrimarySize.Md,variant:l.TextVariant.bodyMd,disabled:T!==undefined&&Number(T.replace(",","."))===g||y!==undefined&&y===g,onClick:()=>{const t=y??Number(null==T?void 0:T.replace(",","."));t&&(a({event:m.MetaMetricsEventName.InputChanged,properties:{input:"slippage",value:t.toString()}}),f((0,c.setSlippage)(t)),e())}},n("submit")))))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/bridge-transaction-settings-modal.tsx"}],[6844,{"../../../../components/component-library":6193,"../../../../components/component-library/select-button/select-button.types":6230,"../../../../helpers/constants/design-system":6663,"../../../../helpers/utils/nfts":6701,"../../../../hooks/useI18nContext":6775,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeAssetPickerButton=void 0;var s,r=(s=e("react"))&&s.__esModule?s:{default:s},a=e("../../../../components/component-library/select-button/select-button.types"),o=e("../../../../components/component-library"),i=e("../../../../helpers/constants/design-system"),l=e("../../../../hooks/useI18nContext"),u=e("../../../../helpers/utils/nfts");function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},c.apply(null,arguments)}n.BridgeAssetPickerButton=({asset:e,networkProps:t,networkImageSrc:n,...s})=>{var d;const m=(0,l.useI18nContext)();return r.default.createElement(o.SelectButton,c({borderRadius:i.BorderRadius.pill,backgroundColor:i.BackgroundColor.backgroundDefault,borderColor:i.BorderColor.borderMuted,style:{padding:8,paddingRight:11,paddingInline:e?undefined:24,minWidth:"fit-content"},gap:0,size:a.SelectButtonSize.Lg,alignItems:i.AlignItems.center,descriptionProps:{variant:i.TextVariant.bodyMd,overflowWrap:i.OverflowWrap.BreakWord,ellipsis:!1},caretIconProps:{name:o.IconName.Arrow2Down,style:{display:i.Display.None}},label:r.default.createElement(o.Text,{variant:i.TextVariant.bodyLgMedium,ellipsis:!0},(null==e?void 0:e.symbol)??m("bridgeTo")),startAccessory:e?r.default.createElement(o.BadgeWrapper,{marginRight:2,badge:e?r.default.createElement(o.AvatarNetwork,{name:(null==t||null===(d=t.network)||void 0===d?void 0:d.name)??"",src:n,size:o.AvatarNetworkSize.Xs}):undefined},e?r.default.createElement(o.AvatarToken,{src:(0,u.getNftImage)(e.image)||undefined,backgroundColor:i.BackgroundColor.backgroundHover,name:e.symbol}):undefined):undefined},s))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/components/bridge-asset-picker-button.tsx"}],[6845,{"../../../../../app/scripts/lib/multichain/address":142,"../../../../components/app/user-preferenced-currency-display/user-preferenced-currency-display.component":6110,"../../../../components/component-library":6193,"../../../../helpers/constants/common":6661,"../../../../helpers/constants/design-system":6663,"../../../../helpers/utils/util":6712,"../../../../hooks/useAccountTotalCrossChainFiatBalance":6755,"../../../../hooks/useGetFormattedTokensPerChain":6774,"../../../../hooks/useMultichainAccountTotalFiatBalance":6781,"../../../../hooks/useMultichainSelector":6783,"../../../../selectors":7403,"../../../../selectors/multichain":7407,classnames:3971,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=k(e("react")),r=k(e("classnames")),a=e("react-redux"),o=e("../../../../helpers/utils/util"),i=e("../../../../components/component-library"),l=e("../../../../helpers/constants/design-system"),u=e("../../../../selectors"),c=e("../../../../../app/scripts/lib/multichain/address"),d=e("../../../../hooks/useMultichainAccountTotalFiatBalance"),m=e("../../../../hooks/useGetFormattedTokensPerChain"),p=e("../../../../hooks/useAccountTotalCrossChainFiatBalance"),f=k(e("../../../../components/app/user-preferenced-currency-display/user-preferenced-currency-display.component")),h=e("../../../../helpers/constants/common"),g=e("../../../../hooks/useMultichainSelector"),y=e("../../../../selectors/multichain");function k(e){return e&&e.__esModule?e:{default:e}}const T=({account:e,selected:t,onClick:n})=>{const k=(0,a.useSelector)(u.getUseBlockie),T=(0,a.useSelector)(u.getShouldHideZeroBalanceTokens),v=(0,a.useSelector)(u.getIsTokenNetworkFilterEqualCurrentNetwork),b=(0,a.useSelector)(u.getChainIdsToPoll),{isEvmNetwork:S}=(0,g.useMultichainSelector)(y.getMultichainNetwork,e),C=(0,g.useMultichainSelector)(y.getMultichainIsTestnet,e),w=!C,E=(0,g.useMultichainSelector)(y.getMultichainShouldShowFiat,e),x=(0,a.useSelector)(u.getShowFiatInTestnets),I=E&&(w||C&&x),A=(0,g.useMultichainSelector)(y.getMultichainNativeCurrencyImage,e),_=(0,g.useMultichainSelector)(y.getMultichainNativeCurrency,e),M=(0,d.useMultichainAccountTotalFiatBalance)(e),{formattedTokensWithBalancesPerChain:P}=(0,m.useGetFormattedTokensPerChain)(e,T,v,b),{totalFiatBalance:D}=(0,p.useAccountTotalCrossChainFiatBalance)(e,P);let N;return N=S?!E||C?e.balance:D:M.totalBalance,s.default.createElement(i.Box,{display:l.Display.Flex,padding:4,backgroundColor:t?l.BackgroundColor.primaryMuted:l.BackgroundColor.transparent,className:(0,r.default)("multichain-account-list-item",{"multichain-account-list-item--selected":t}),onClick:n,alignItems:l.AlignItems.center},s.default.createElement(i.AvatarAccount,{borderColor:l.BorderColor.transparent,size:i.AvatarAccountSize.Md,address:e.address,variant:k?i.AvatarAccountVariant.Blockies:i.AvatarAccountVariant.Jazzicon,marginInlineEnd:2}),s.default.createElement(i.Box,{display:l.Display.Flex,flexDirection:l.FlexDirection.Column,style:{flex:1}},s.default.createElement(i.Box,{display:l.Display.Flex,justifyContent:l.JustifyContent.spaceBetween},s.default.createElement(i.Text,{variant:l.TextVariant.bodyMdMedium},e.metadata.name),s.default.createElement(i.Box,{display:l.Display.Flex,alignItems:l.AlignItems.center,justifyContent:l.JustifyContent.flexEnd,gap:1},s.default.createElement(i.Text,{as:"div",display:l.Display.Flex,flexDirection:l.FlexDirection.Row,alignItems:l.AlignItems.center,justifyContent:l.JustifyContent.flexEnd,ellipsis:!0,textAlign:l.TextAlign.End},s.default.createElement(f.default,{ethNumberOfDecimals:3,value:N,type:h.PRIMARY,showFiat:I,isAggregatedFiatOverviewBalance:I,hideLabel:!0,"data-testid":"first-currency-display"})))),s.default.createElement(i.Box,{display:l.Display.Flex,justifyContent:l.JustifyContent.spaceBetween,alignItems:l.AlignItems.center},s.default.createElement(i.Text,{variant:l.TextVariant.bodySm,color:l.TextColor.textAlternative,"data-testid":"account-list-address"},(0,o.shortenAddress)((0,c.normalizeSafeAddress)(e.address))),s.default.createElement(i.Box,{display:l.Display.Flex,gap:2},s.default.createElement(i.AvatarToken,{src:A,name:_,size:i.AvatarTokenSize.Xs,borderColor:l.BorderColor.borderDefault})))))};n.default=s.default.memo(T)}}},{package:"$root$",file:"ui/pages/bridge/prepare/components/destination-account-list-item.tsx"}],[6846,{"../../../../../app/scripts/translate":385,"../../../../components/component-library":6193,"../../../../helpers/constants/design-system":6663,"../../../../selectors":7403,"../../hooks/useExternalAccountResolution":6830,"./destination-account-list-item":6845,"./destination-selected-account-list-item":6847,"./external-account-list-item":6848,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DestinationAccountPicker=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),r=e("react-redux"),a=e("../../../../components/component-library"),o=e("../../../../selectors"),i=e("../../../../helpers/constants/design-system"),l=e("../../../../../app/scripts/translate"),u=e("../../hooks/useExternalAccountResolution"),c=p(e("./destination-selected-account-list-item")),d=p(e("./destination-account-list-item")),m=e("./external-account-list-item");function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}n.DestinationAccountPicker=({onAccountSelect:e,selectedSwapToAccount:t,isDestinationSolana:n})=>{const[p,f]=(0,s.useState)(""),h=(0,r.useSelector)(o.getSelectedInternalAccount),g=(0,r.useSelector)(o.getInternalAccounts),{externalAccount:y}=(0,u.useExternalAccountResolution)({searchQuery:p,isDestinationSolana:n,accounts:g}),k=(0,s.useMemo)((()=>g.filter((e=>{const t=e.metadata.name.toLowerCase().includes(p.toLowerCase()),s=e.address.toLowerCase().includes(p.toLowerCase()),r=t||s,a=n?(0,o.isSolanaAccount)(e):!(0,o.isSolanaAccount)(e);return r&&a}))),[g,n,p]);return t?s.default.createElement(a.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Row,alignItems:i.AlignItems.center,justifyContent:i.JustifyContent.spaceBetween,width:i.BlockSize.Full,className:"swap-to-account-picker",backgroundColor:i.BackgroundColor.backgroundDefault,style:{height:"70px",borderRadius:"8px",boxShadow:"var(--shadow-size-sm) var(--color-shadow-default)"}},s.default.createElement(a.Box,{className:"destination-account-picker__selected",width:i.BlockSize.Full},s.default.createElement(c.default,{account:t,isSelected:t.id===(null==h?void 0:h.id),showOptions:!1,disableHover:!0})),s.default.createElement(a.Box,{className:"deselect-button-container",paddingRight:5},s.default.createElement(a.Button,{onClick:()=>e(null),"aria-label":"Deselect account",variant:a.ButtonVariant.Link,size:a.ButtonSize.Sm,className:"deselect-button",style:{padding:"5px",color:"var(--color-icon-alternative)",textDecoration:"none"}},"✕"))):s.default.createElement(a.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Column,width:i.BlockSize.Full,className:"destination-account-picker",backgroundColor:i.BackgroundColor.backgroundDefault,style:{borderRadius:"8px",position:"relative"}},s.default.createElement(a.Box,{className:"search-container",width:i.BlockSize.Full,display:i.Display.Flex,alignItems:i.AlignItems.center,justifyContent:i.JustifyContent.center,backgroundColor:i.BackgroundColor.backgroundDefault,style:{height:"50px",borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"#B7BBC866",borderRadius:"8px 8px 0 0",boxShadow:"var(--shadow-size-sm) var(--color-shadow-default)"}},s.default.createElement(a.TextField,{placeholder:n?(0,l.t)("destinationAccountPickerSearchPlaceholderToSolana"):(0,l.t)("destinationAccountPickerSearchPlaceholderToMainnet"),value:p,onChange:e=>f(e.target.value),clearButtonOnClick:()=>f(""),className:"text-field-search",style:{width:"98%",borderRadius:0,borderWidth:0,color:"var(--color-text-alternative)"}})),s.default.createElement(a.Box,{style:{height:"20px"}}),s.default.createElement(a.Box,{className:"destination-account-picker__list",backgroundColor:i.BackgroundColor.backgroundDefault,style:{position:"absolute",top:"50px",left:0,right:0,maxHeight:"240px",overflowY:"auto",borderRadius:"0 0 8px 8px",zIndex:1e3,boxShadow:"var(--shadow-size-sm) var(--color-shadow-default)"}},k.map((n=>s.default.createElement(d.default,{key:n.id,account:n,onClick:()=>e(n),isSelected:n.id===(null==t?void 0:t.id),showOptions:!1}))),y&&s.default.createElement(m.ExternalAccountListItem,{key:"external-account",account:y,selected:Boolean(t&&t.address===y.address),onClick:()=>e(y)}),0===k.length&&!y&&s.default.createElement(a.Box,{display:i.Display.Flex,style:{minHeight:"79px"},width:i.BlockSize.Full,height:i.BlockSize.Full,justifyContent:i.JustifyContent.center,alignItems:i.AlignItems.center},s.default.createElement(a.Text,{textAlign:i.TextAlign.Center},p?(0,l.t)("destinationAccountPickerNoMatching"):(0,l.t)("destinationAccountPickerNoEligible")))))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/components/destination-account-picker.tsx"}],[6847,{"../../../../components/component-library":6193,"../../../../helpers/constants/design-system":6663,"../../../../hooks/useI18nContext":6775,"../../../../selectors":7403,classnames:3971,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=c(e("react")),r=c(e("classnames")),a=e("react-redux"),o=e("../../../../components/component-library"),i=e("../../../../helpers/constants/design-system"),l=e("../../../../selectors"),u=e("../../../../hooks/useI18nContext");function c(e){return e&&e.__esModule?e:{default:e}}const d=({account:e,selected:t,onClick:n})=>{const c=(0,a.useSelector)(l.getUseBlockie),d=(0,u.useI18nContext)(),m="isExternal"in e&&e.isExternal;return s.default.createElement(o.Box,{display:i.Display.Flex,padding:4,backgroundColor:t?i.BackgroundColor.primaryMuted:i.BackgroundColor.transparent,className:(0,r.default)("multichain-account-list-item",{"multichain-account-list-item--selected":t}),onClick:n,alignItems:i.AlignItems.center,style:{pointerEvents:"none"}},s.default.createElement(o.AvatarAccount,{borderColor:i.BorderColor.transparent,size:o.AvatarAccountSize.Md,address:e.address,variant:c?o.AvatarAccountVariant.Blockies:o.AvatarAccountVariant.Jazzicon,marginInlineEnd:2}),s.default.createElement(o.Box,{display:i.Display.Flex,style:{flexDirection:"column"}},s.default.createElement(o.Text,{variant:i.TextVariant.bodySmMedium,color:i.TextColor.textAlternative,"data-testid":"account-list-address",marginBottom:1},d("destinationAccountPickerReceiveAt")),s.default.createElement(o.Text,{variant:i.TextVariant.bodyMdMedium,marginBottom:1},m?e.metadata.name.endsWith(".eth")?e.metadata.name:d("externalAccount"):e.metadata.name)))};n.default=s.default.memo(d)}}},{package:"$root$",file:"ui/pages/bridge/prepare/components/destination-selected-account-list-item.tsx"}],[6848,{"../../../../../app/scripts/lib/multichain/address":142,"../../../../components/component-library":6193,"../../../../helpers/constants/design-system":6663,"../../../../helpers/utils/util":6712,"../../../../hooks/useI18nContext":6775,"../../../../selectors":7403,classnames:3971,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ExternalAccountListItem=void 0;var s=m(e("react")),r=m(e("classnames")),a=e("react-redux"),o=e("../../../../helpers/utils/util"),i=e("../../../../components/component-library"),l=e("../../../../helpers/constants/design-system"),u=e("../../../../selectors"),c=e("../../../../../app/scripts/lib/multichain/address"),d=e("../../../../hooks/useI18nContext");function m(e){return e&&e.__esModule?e:{default:e}}n.ExternalAccountListItem=({account:e,selected:t,onClick:n})=>{const m=(0,a.useSelector)(u.getUseBlockie),p=(0,d.useI18nContext)(),f=e.metadata.name.endsWith(".eth");return s.default.createElement(i.Box,{display:l.Display.Flex,padding:4,backgroundColor:l.BackgroundColor.transparent,className:(0,r.default)("multichain-account-list-item",{"multichain-account-list-item--selected":t}),onClick:n,alignItems:l.AlignItems.center,justifyContent:l.JustifyContent.spaceBetween},s.default.createElement(i.Box,{display:l.Display.Flex,alignItems:l.AlignItems.center},s.default.createElement(i.AvatarAccount,{borderColor:l.BorderColor.transparent,size:i.AvatarAccountSize.Md,address:e.address,variant:m?i.AvatarAccountVariant.Blockies:i.AvatarAccountVariant.Jazzicon,marginInlineEnd:2}),s.default.createElement(i.Box,{display:l.Display.Flex,flexDirection:l.FlexDirection.Column,style:{maxWidth:"140px",overflow:"hidden"}},s.default.createElement(i.Text,{variant:l.TextVariant.bodyMdMedium,marginBottom:1,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},f?e.metadata.name:p("externalAccount")),s.default.createElement(i.Text,{variant:l.TextVariant.bodySm,color:l.TextColor.textAlternative,"data-testid":"account-list-address",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},(0,o.shortenAddress)((0,c.normalizeSafeAddress)(e.address))))),f&&s.default.createElement(i.Tag,{label:p("externalAccount"),paddingLeft:2,paddingRight:2,labelProps:{variant:l.TextVariant.bodyXs}}))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/components/external-account-list-item.tsx"}],[6849,{"../../../../shared/constants/bridge":5590,"../../../../shared/constants/metametrics":5600,"../../../../shared/constants/multichain/networks":5603,"../../../../shared/constants/time":5617,"../../../../shared/lib/swaps-utils":5645,"../../../../shared/types/security-alerts-api":5683,"../../../components/component-library":6193,"../../../components/multichain":6365,"../../../components/multichain/pages/page":6443,"../../../ducks/bridge/actions":6639,"../../../ducks/bridge/selectors":6641,"../../../ducks/bridge/utils":6642,"../../../ducks/locale/locale":6650,"../../../ducks/metamask/metamask":6651,"../../../helpers/constants/design-system":6663,"../../../helpers/utils/hardware":6694,"../../../hooks/bridge/events/useRequestProperties":6721,"../../../hooks/bridge/useCountdownTimer":6727,"../../../hooks/bridge/useCrossChainSwapsEventTracker":6728,"../../../hooks/bridge/useIsTxSubmittable":6729,"../../../hooks/bridge/useLatestBalance":6730,"../../../hooks/bridge/useTokenAlerts":6732,"../../../hooks/bridge/useTokensWithFiltering":6733,"../../../hooks/ramps/useRamps/useRamps":6747,"../../../hooks/useI18nContext":6775,"../../../hooks/useMultichainSelector":6783,"../../../selectors":7403,"../../../selectors/multichain":7407,"../../../store/actions":7421,"../../swaps/mascot-background-animation/mascot-background-animation":7356,"../hooks/useDestinationAccount":6829,"../hooks/useIsMultichainSwap":6834,"../layout":6838,"../quotes/bridge-quote-card":6850,"../quotes/multichain-bridge-quote-card":6852,"../utils/quote":6863,"./bridge-cta-button":6841,"./bridge-input-group":6842,"./components/destination-account-picker":6846,"@metamask/bridge-controller":1411,"bignumber.js":3847,classnames:3971,"ethereumjs-util":4197,lodash:4725,react:5129,"react-redux":5087,"react-router-dom":5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=Y(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),r=e("react-redux"),a=J(e("classnames")),o=e("lodash"),i=e("react-router-dom"),l=e("bignumber.js"),u=e("ethereumjs-util"),c=e("@metamask/bridge-controller"),d=e("../../../ducks/bridge/actions"),m=e("../../../ducks/bridge/selectors"),p=e("../../../components/component-library"),f=e("../../../helpers/constants/design-system"),h=e("../../../hooks/useI18nContext"),g=e("../../../hooks/bridge/useTokensWithFiltering"),y=e("../../../store/actions"),k=e("../../../../shared/lib/swaps-utils"),T=e("../utils/quote"),v=e("../../../hooks/bridge/useCrossChainSwapsEventTracker"),b=e("../../../hooks/bridge/events/useRequestProperties"),S=e("../../../../shared/constants/metametrics"),C=e("../../../ducks/bridge/utils"),w=e("../../../components/multichain/pages/page"),E=J(e("../../swaps/mascot-background-animation/mascot-background-animation")),x=e("../layout"),I=J(e("../../../hooks/ramps/useRamps/useRamps")),A=e("../../../ducks/metamask/metamask"),_=J(e("../../../hooks/bridge/useLatestBalance")),M=e("../../../hooks/bridge/useCountdownTimer"),P=e("../../../selectors"),D=e("../../../helpers/utils/hardware"),N=e("../../../../shared/constants/time"),O=e("../../../../shared/constants/bridge"),B=e("../../../ducks/locale/locale"),R=e("../hooks/useIsMultichainSwap"),F=e("../../../hooks/useMultichainSelector"),j=e("../../../selectors/multichain"),L=e("../quotes/multichain-bridge-quote-card"),$=e("../quotes/bridge-quote-card"),q=e("../../../../shared/types/security-alerts-api"),U=e("../../../hooks/bridge/useTokenAlerts"),W=e("../hooks/useDestinationAccount"),H=e("../../../components/multichain"),V=e("../../../../shared/constants/multichain/networks"),z=e("../../../hooks/bridge/useIsTxSubmittable"),G=e("./bridge-input-group"),Q=e("./bridge-cta-button"),K=e("./components/destination-account-picker");function J(e){return e&&e.__esModule?e:{default:e}}function Y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Y=function(e){return e?n:t})(e)}n.default=()=>{var e,t,n;const J=(0,r.useDispatch)(),Y=(0,h.useI18nContext)(),X=(0,R.useIsMultichainSwap)(),Z=(0,r.useSelector)(m.getFromToken),ee=(0,r.useSelector)(P.getTokenList),te=(0,s.useMemo)((()=>0===Object.keys(ee).length),[ee]),ne=(0,r.useSelector)(m.getToToken),se=(0,r.useSelector)(m.getFromChains),re=(0,r.useSelector)(m.getToChains),ae=(0,r.useSelector)(m.getFromChain),oe=(0,r.useSelector)(m.getToChain),ie=(0,r.useSelector)(m.getFromAmount),le=(0,r.useSelector)(m.getFromAmountInCurrency),ue=(0,F.useMultichainSelector)(j.getMultichainProviderConfig),ce=(0,r.useSelector)(m.getSlippage),de=(0,r.useSelector)(m.getQuoteRequest),{isLoading:me,activeQuote:pe,isQuoteGoingToRefresh:fe,quotesLastFetchedMs:he}=(0,r.useSelector)(m.getBridgeQuotes),ge=(0,r.useSelector)(m.getQuoteRefreshRate),ye=(0,r.useSelector)(m.getWasTxDeclined),ke=(0,T.isQuoteExpired)(fe,ge,he),Te=ke&&!de.insufficientBal?undefined:pe,ve=(0,F.useMultichainSelector)(j.getMultichainIsEvm),be=(0,r.useSelector)(P.getSelectedEvmInternalAccount),Se=(0,r.useSelector)(j.getLastSelectedNonEvmAccount),Ce=(0,F.useMultichainSelector)(P.getSelectedInternalAccount),we=ve?be:Ce,Ee=(0,r.useSelector)(P.getCurrentKeyring),xe=(0,D.isHardwareKeyring)(Ee.type),Ie=(0,r.useSelector)(m.getHardwareWalletName),Ae=(0,z.useIsTxSubmittable)(),_e=(0,r.useSelector)(B.getIntlLocale),Me=(0,r.useSelector)(A.getNativeCurrency),{isEstimatedReturnLow:Pe,isNoQuotesAvailable:De,isInsufficientGasForQuote:Ne,isInsufficientBalance:Oe}=(0,r.useSelector)(m.getValidationErrors),{quotesRefreshCount:Be}=(0,r.useSelector)(m.getBridgeQuotes),{openBuyCryptoInPdapp:Re}=(0,I.default)(),Fe=(0,s.useMemo)((()=>null!=ae&&ae.chainId?(0,c.getNativeAssetForChainId)(ae.chainId):null),[null==ae?void 0:ae.chainId]),je=(0,_.default)(Fe),{tokenAlert:Le}=(0,U.useTokenAlerts)(),$e=(0,_.default)(Z),{selectedDestinationAccount:qe,setSelectedDestinationAccount:Ue}=(0,W.useDestinationAccount)(X),{filteredTokenListGenerator:We,isLoading:He}=(0,g.useTokensWithFiltering)((null==oe?void 0:oe.chainId)??(null==ae?void 0:ae.chainId),Z,null!==qe&&"id"in qe?qe.id:undefined),{flippedRequestProperties:Ve}=(0,b.useRequestProperties)(),ze=(0,v.useCrossChainSwapsEventTracker)(),Ge=(0,M.useCountdownTimer)(),[Qe,Ke]=(0,s.useState)(!1),[Je,Ye]=(0,s.useState)(!0);(0,s.useEffect)((()=>Ye(!0)),[Be]);const[Xe,Ze]=(0,s.useState)(!0);(0,s.useEffect)((()=>Ze(!0)),[Le]);const[et,tt]=(0,s.useState)(!0);(0,s.useEffect)((()=>tt(!0)),[null==ne?void 0:ne.address]);const[nt,st]=(0,s.useState)(!1);(0,s.useEffect)((()=>{st(!0);const e=setTimeout((()=>{st(!1)}),N.SECOND);return()=>{clearTimeout(e)}}),[Qe]),(0,s.useEffect)((()=>{if(Te){const{srcAsset:e,destAsset:t,destChainId:n,srcChainId:s}=Te.quote;e&&t&&n&&(J((0,d.setToChainId)(n)),J((0,d.setToToken)({...t,chainId:n,image:e.icon??t.iconUrl??"",address:t.address})),J((0,d.setFromToken)({...e,chainId:s,image:e.icon||e.iconUrl||"",address:e.address})))}else J((0,d.resetBridgeState)())}),[]);const rt=(0,s.useRef)(null),at=(0,s.useRef)(null),ot=(0,s.useRef)(null);(0,s.useEffect)((()=>{var e,t;Ne(je)&&(null===(e=rt.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start"}));Pe&&(null===(t=at.current)||void 0===t||t.scrollIntoView({behavior:"smooth",block:"start"}))}),[Pe,Ne(je),Je]);const it=(0,r.useSelector)(m.getIsToOrFromSolana),lt=(0,s.useMemo)((()=>!(null==oe||!oe.chainId)&&(0,c.isSolanaChainId)(oe.chainId)),[null==oe?void 0:oe.chainId]),ut=(0,s.useMemo)((()=>{var e;return{srcTokenAddress:null==Z?void 0:Z.address,destTokenAddress:null==ne?void 0:ne.address,srcTokenAmount:ie&&null!=Z&&Z.decimals?(0,k.calcTokenValue)(["","."].includes(ie)?"0":ie,Z.decimals).toFixed().split(".")[0]:undefined,srcChainId:null==ae?void 0:ae.chainId,destChainId:null==oe?void 0:oe.chainId,insufficientBal:!(null==ue||null===(e=ue.rpcUrl)||void 0===e||!e.includes("localhost"))||undefined,slippage:ce,walletAddress:(null==we?void 0:we.address)??"",destWalletAddress:null==qe?void 0:qe.address}}),[null==Z?void 0:Z.address,null==Z?void 0:Z.decimals,null==ne?void 0:ne.address,ie,null==ae?void 0:ae.chainId,null==oe?void 0:oe.chainId,ce,null==we?void 0:we.address,null==qe?void 0:qe.address,null==ue?void 0:ue.rpcUrl]),ct=(0,s.useCallback)((0,o.debounce)((e=>{J((0,d.updateQuoteRequestParams)(e))}),300),[]);(0,s.useEffect)((()=>{J((0,d.setSelectedQuote)(null)),ct(ut)}),[ut,ct]);const dt=(0,s.useCallback)((e=>{ze({event:S.MetaMetricsEventName.InputChanged,properties:e})}),[]),{search:mt}=(0,i.useLocation)(),pt=(0,i.useHistory)();(0,s.useEffect)((()=>{if(null==ae||!ae.chainId||te)return;const e=new URLSearchParams(mt),t=e.get("token");if(!t)return;const n=()=>{const t=new URLSearchParams(e);t.delete("token"),pt.replace({search:t.toString()})},s=ee[t.toLowerCase()];switch(t){case null==Z?void 0:Z.address:n();break;case null==s?void 0:s.address:case null!=s&&s.address?(0,u.toChecksumAddress)(s.address):undefined:J((0,d.setFromToken)({...s,image:s.iconUrl,chainId:ae.chainId})),n();break;default:n()}}),[ae,Z,ee,mt,te]),(0,s.useEffect)((()=>{X&&(J((0,d.setSlippage)(undefined)),ae&&!ne&&(J((0,d.setToChainId)(ae.chainId)),J((0,d.setToToken)(O.SOLANA_USDC_ASSET))))}),[]);const ft=Number((null==ne?void 0:ne.occurrences)??0),ht=(null==ne?void 0:ne.address)&&!(0,c.isNativeAddress)(null==ne?void 0:ne.address),gt=(0,r.useSelector)(m.isBridgeSolanaEnabled),[yt,kt]=(0,s.useState)(!1),[Tt,vt]=(0,s.useState)(null),[bt,St]=(0,s.useState)(0);return s.default.createElement(s.default.Fragment,null,s.default.createElement(x.Column,{className:"prepare-bridge-page",gap:8},s.default.createElement(G.BridgeInputGroup,{header:Y(X?"swapSwapFrom":"bridgeFrom"),token:Z,onAmountChange:e=>{J((0,d.setFromTokenInputValue)(e))},onAssetChange:e=>{const t={...e,address:e.address??(0,u.zeroAddress)()};J((0,d.setFromToken)(t)),J((0,d.setFromTokenInputValue)(null)),e.address===(null==ne?void 0:ne.address)&&J((0,d.setToToken)(null)),t.address&&dt({input:"token_source",value:t.address})},networkProps:{network:ae,networks:X?undefined:se,onNetworkChange:e=>{(null==e?void 0:e.chainId)&&e.chainId!==(null==ae?void 0:ae.chainId)&&dt({input:"chain_source",value:e.chainId}),null!=e&&e.chainId&&e.chainId===(null==oe?void 0:oe.chainId)&&(J((0,d.setToChainId)(null)),J((0,d.setToToken)(null))),(0,c.isSolanaChainId)(e.chainId)&&Se?J((0,y.setSelectedAccount)(Se.address)):(0,C.isNetworkAdded)(e)&&(J((0,y.setSelectedAccount)(be.address)),J((0,y.setActiveNetworkWithError)(e.rpcEndpoints[e.defaultRpcEndpointIndex].networkClientId||e.chainId))),J((0,d.setFromToken)(null)),J((0,d.setFromTokenInputValue)(null))},header:Y("yourNetworks")},isMultiselectEnabled:!X,onMaxButtonClick:e=>{J((0,d.setFromTokenInputValue)(e))},amountInFiat:le.valueInCurrency,amountFieldProps:{testId:"from-amount",autoFocus:!0,value:ie||undefined},isTokenListLoading:te,buttonProps:{testId:"bridge-source-button"},onBlockExplorerClick:e=>{vt(e),kt(!0),St((e=>e+1))}}),s.default.createElement(x.Column,{height:f.BlockSize.Full,paddingTop:8,backgroundColor:f.BackgroundColor.backgroundAlternativeSoft,style:{position:"relative"}},s.default.createElement(p.Box,{className:"prepare-bridge-page__switch-tokens",display:f.Display.Flex,backgroundColor:f.BackgroundColor.backgroundAlternativeSoft,style:{position:"absolute",top:"calc(-20px + 1px)",right:"calc(50% - 20px)",border:"2px solid var(--color-background-default)",borderRadius:"100%",opacity:1,width:40,height:40,justifyContent:f.JustifyContent.center}},s.default.createElement(p.ButtonIcon,{iconProps:{className:(0,a.default)({rotate:Qe})},style:{alignSelf:"center",borderRadius:"100%",width:"100%",height:"100%"},"data-testid":"switch-tokens",ariaLabel:"switch-tokens",iconName:p.IconName.Arrow2Down,color:f.IconColor.iconAlternativeSoft,disabled:nt||!(0,c.isValidQuoteRequest)(de,!1)||!X&&!(0,C.isNetworkAdded)(oe),onClick:()=>{if(X||(0,C.isNetworkAdded)(oe)){if(Ke(!Qe),Ve&&ze({event:S.MetaMetricsEventName.InputSourceDestinationFlipped,properties:Ve}),!X){const e=(null==oe?void 0:oe.defaultRpcEndpointIndex)!==undefined&&null!=oe&&oe.rpcEndpoints&&(0,C.isNetworkAdded)(oe)?oe.rpcEndpoints[oe.defaultRpcEndpointIndex].networkClientId:undefined;null!=oe&&oe.chainId&&(0,c.formatChainIdToCaip)(oe.chainId)===V.MultichainNetworks.SOLANA&&Se?J((0,y.setSelectedAccount)(Se.address)):J((0,y.setSelectedAccount)(be.address)),e&&J((0,y.setActiveNetwork)(e)),(null==ae?void 0:ae.chainId)&&J((0,d.setToChainId)(ae.chainId))}J((0,d.setFromToken)(ne)),J((0,d.setToToken)(Z))}}})),s.default.createElement(G.BridgeInputGroup,{header:Y("swapSelectToken"),token:ne,onAssetChange:e=>{const t={...e,address:e.address??(0,u.zeroAddress)()};t.address&&dt({input:"token_destination",value:t.address}),J((0,d.setToToken)(t))},networkProps:X?undefined:{network:oe,networks:re,onNetworkChange:e=>{e.chainId!==(null==oe?void 0:oe.chainId)&&dt({input:"chain_destination",value:e.chainId}),J((0,d.setToChainId)(e.chainId)),J((0,d.setToToken)(null))},header:Y(X?"swapSwapTo":"bridgeTo"),shouldDisableNetwork:({chainId:e})=>e===(null==ae?void 0:ae.chainId)},customTokenListGenerator:oe||X?We:undefined,amountInFiat:(null==Te||null===(e=Te.toTokenAmount)||void 0===e?void 0:e.valueInCurrency)||undefined,amountFieldProps:{testId:"to-amount",readOnly:!0,disabled:!0,value:null!=Te&&null!==(t=Te.toTokenAmount)&&void 0!==t&&t.amount?(0,T.formatTokenAmount)(_e,Te.toTokenAmount.amount):"0",autoFocus:!1,className:null!=Te&&null!==(n=Te.toTokenAmount)&&void 0!==n&&n.amount?"amount-input defined":"amount-input"},isTokenListLoading:He,buttonProps:{testId:"bridge-destination-button"},onBlockExplorerClick:e=>{vt(e),kt(!0),St((e=>e+1))}}),gt&&it&&s.default.createElement(p.Box,{padding:6,paddingBottom:3,paddingTop:3},s.default.createElement(K.DestinationAccountPicker,{onAccountSelect:Ue,selectedSwapToAccount:qe,isDestinationSolana:lt})),s.default.createElement(x.Column,{height:f.BlockSize.Full,justifyContent:f.JustifyContent.center},me&&!Te?s.default.createElement(s.default.Fragment,null,s.default.createElement(p.Text,{textAlign:f.TextAlign.Center,color:f.TextColor.textAlternativeSoft},Y("swapFetchingQuotes")),s.default.createElement(E.default,{height:"64",width:"64"})):null),s.default.createElement(x.Row,{padding:6,paddingTop:Te?0:6},s.default.createElement(x.Column,{gap:3,className:Te?"highlight":"",style:{paddingBottom:null!=Te&&Te.approval?16:"revert-layer",paddingTop:null!=Te&&Te.approval?16:undefined,paddingInline:16,position:"relative",overflow:"hidden",...Te&&!ye&&gt?{boxShadow:"var(--shadow-size-sm) var(--color-shadow-default)",backgroundColor:"var(--color-background-default)",borderRadius:8}:{}}},Te&&fe&&s.default.createElement(x.Row,{style:{position:"absolute",left:0,top:0,width:`calc(100% * (${ge} - ${Ge}) / ${ge})`,height:4,maxWidth:"100%",transition:"width 1s linear"},backgroundColor:f.BackgroundColor.primaryMuted}),!ye&&Te&&(gt?s.default.createElement(L.MultichainBridgeQuoteCard,null):s.default.createElement($.BridgeQuoteCard,null)),s.default.createElement(w.Footer,{padding:0,flexDirection:f.FlexDirection.Column,gap:2},s.default.createElement(Q.BridgeCTAButton,{onFetchNewQuotes:()=>{ct(ut)},needsDestinationAddress:gt&&it&&!qe}),null!=Te&&Te.approval&&ie&&Z?s.default.createElement(x.Row,{justifyContent:f.JustifyContent.center,gap:1},s.default.createElement(p.Text,{color:f.TextColor.textAlternativeSoft,variant:f.TextVariant.bodyXs,textAlign:f.TextAlign.Center},xe?Y("willApproveAmountForBridgingHardware"):Y("willApproveAmountForBridging",[(0,T.formatTokenAmount)(_e,new l.BigNumber(ie),Z.symbol)])),ie&&s.default.createElement(x.Tooltip,{display:f.Display.InlineBlock,position:p.PopoverPosition.Top,offset:[-48,8],title:Y("grantExactAccess")},Y(xe?"bridgeApprovalWarningForHardware":"bridgeApprovalWarning",[ie,Z.symbol]))):null))),xe&&Ae&&Ie&&Te&&s.default.createElement(p.BannerAlert,{marginInline:4,marginBottom:3,title:Y("hardwareWalletSubmissionWarningTitle"),textAlign:f.TextAlign.Left},s.default.createElement("ul",{style:{listStyle:"disc"}},s.default.createElement("li",null,s.default.createElement(p.Text,{variant:f.TextVariant.bodyMd},Y("hardwareWalletSubmissionWarningStep1",[Ie]))),s.default.createElement("li",null,s.default.createElement(p.Text,{variant:f.TextVariant.bodyMd},Y("hardwareWalletSubmissionWarningStep2",[Ie]))))),De&&!ke&&s.default.createElement(p.BannerAlert,{marginInline:4,marginBottom:10,severity:p.BannerAlertSeverity.Danger,description:Y("noOptionsAvailableMessage"),textAlign:f.TextAlign.Left}),et&&ve&&ne&&ht&&ft<2&&s.default.createElement(p.BannerAlert,{severity:p.BannerAlertSeverity.Warning,title:Y("bridgeTokenCannotVerifyTitle"),description:Y("bridgeTokenCannotVerifyDescription"),marginInline:4,marginBottom:3,textAlign:f.TextAlign.Left,onClose:()=>tt(!1)}),Pe&&Je&&Te&&s.default.createElement(p.BannerAlert,{ref:rt,marginInline:4,marginBottom:3,title:Y("lowEstimatedReturnTooltipTitle"),severity:p.BannerAlertSeverity.Warning,description:Y("lowEstimatedReturnTooltipMessage",[100*c.BRIDGE_QUOTE_MAX_RETURN_DIFFERENCE_PERCENTAGE]),textAlign:f.TextAlign.Left,onClose:()=>Ye(!1)}),Le&&Xe&&s.default.createElement(p.BannerAlert,{ref:ot,marginInline:4,marginBottom:3,title:Le.titleId?Y(Le.titleId):"",severity:Le.type===q.TokenFeatureType.MALICIOUS?p.BannerAlertSeverity.Danger:p.BannerAlertSeverity.Warning,description:Le.descriptionId?Y(Le.descriptionId):Le.description,textAlign:f.TextAlign.Left,onClose:()=>Ze(!1)}),!me&&Te&&!Oe($e)&&Ne(je)&&s.default.createElement(p.BannerAlert,{marginInline:4,marginBottom:10,severity:p.BannerAlertSeverity.Danger,description:Y("noOptionsAvailableMessage"),textAlign:f.TextAlign.Left}),Pe&&Je&&s.default.createElement(p.BannerAlert,{ref:rt,marginInline:4,marginBottom:3,title:Y("lowEstimatedReturnTooltipTitle"),severity:p.BannerAlertSeverity.Warning,description:Y("lowEstimatedReturnTooltipMessage",[100*c.BRIDGE_QUOTE_MAX_RETURN_DIFFERENCE_PERCENTAGE]),textAlign:f.TextAlign.Left,onClose:()=>Ye(!1)}),!me&&Te&&!Oe($e)&&Ne(je)&&s.default.createElement(p.BannerAlert,{ref:at,marginInline:4,marginBottom:3,title:Y("bridgeValidationInsufficientGasTitle",[Me]),severity:p.BannerAlertSeverity.Danger,description:Y("bridgeValidationInsufficientGasMessage",[Me]),textAlign:f.TextAlign.Left,actionButtonLabel:Y("buyMoreAsset",[Me]),actionButtonOnClick:()=>Re()}))),yt&&Tt&&s.default.createElement("div",{style:{position:"absolute",bottom:50,left:"50%",transform:"translateX(-50%)",zIndex:1e3,width:"100%",display:"flex",justifyContent:"center"}},s.default.createElement(H.ToastContainer,null,s.default.createElement(H.Toast,{key:bt,text:Y("bridgeBlockExplorerLinkCopied"),onClose:()=>kt(!1),autoHideTime:2500,startAdornment:s.default.createElement(p.AvatarFavicon,{name:Tt.symbol,size:p.AvatarFaviconSize.Sm,src:Tt.image})}))))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/prepare-bridge-page.tsx"}],[685,{"./RegistryItem":694,"./RegistryType":695,"./lib":705},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoCoinInfo=n.Network=n.Type=void 0;const s=e("./lib"),r=e("./RegistryItem"),a=e("./RegistryType");var o,i,l;!function(e){e.type="1",e.network="2"}(o||(o={})),function(e){e[e.bitcoin=0]="bitcoin"}(i=n.Type||(n.Type={})),function(e){e[e.mainnet=0]="mainnet",e[e.testnet=1]="testnet"}(l=n.Network||(n.Network={}));class u extends r.RegistryItem{constructor(e,t){super(),this.type=e,this.network=t,this.getRegistryType=()=>a.RegistryTypes.CRYPTO_COIN_INFO,this.getType=()=>this.type||i.bitcoin,this.getNetwork=()=>this.network||l.mainnet,this.toDataItem=()=>{const e={};return this.type&&(e[o.type]=this.type),this.network&&(e[o.network]=this.network),new s.DataItem(e)}}}n.CryptoCoinInfo=u,u.fromDataItem=e=>{const t=e.getData(),n=t[o.type],s=t[o.network];return new u(n,s)},u.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return u.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoCoinInfo.js"}],[6850,{"../../../../shared/constants/bridge":5590,"../../../../shared/constants/metametrics":5600,"../../../../shared/constants/terms":5616,"../../../components/component-library":6193,"../../../ducks/bridge/selectors":6641,"../../../ducks/locale/locale":6650,"../../../ducks/metamask/metamask":6651,"../../../helpers/constants/design-system":6663,"../../../hooks/bridge/events/useQuoteProperties":6719,"../../../hooks/bridge/events/useRequestMetadataProperties":6720,"../../../hooks/bridge/events/useRequestProperties":6721,"../../../hooks/bridge/useCrossChainSwapsEventTracker":6728,"../../../hooks/useI18nContext":6775,"../../../selectors/multichain":7407,"../layout":6838,"../utils/quote":6863,"./bridge-quotes-modal":6851,"@metamask/bridge-controller":1411,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeQuoteCard=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),r=e("react-redux"),a=e("@metamask/bridge-controller"),o=e("../../../components/component-library"),i=e("../../../ducks/bridge/selectors"),l=e("../../../hooks/useI18nContext"),u=e("../utils/quote"),c=e("../../../ducks/metamask/metamask"),d=e("../../../hooks/bridge/useCrossChainSwapsEventTracker"),m=e("../../../hooks/bridge/events/useRequestProperties"),p=e("../../../hooks/bridge/events/useRequestMetadataProperties"),f=e("../../../hooks/bridge/events/useQuoteProperties"),h=e("../../../../shared/constants/metametrics"),g=e("../../../helpers/constants/design-system"),y=e("../layout"),k=e("../../../../shared/constants/bridge"),T=e("../../../../shared/constants/terms"),v=e("../../../ducks/locale/locale"),b=e("../../../selectors/multichain"),S=e("./bridge-quotes-modal");function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}n.BridgeQuoteCard=()=>{var e,t,n,C;const w=(0,l.useI18nContext)(),{activeQuote:E}=(0,r.useSelector)(i.getBridgeQuotes),x=(0,r.useSelector)(c.getCurrentCurrency),I=(0,r.useSelector)(c.getNativeCurrency),{isEstimatedReturnLow:A}=(0,r.useSelector)(i.getValidationErrors),_=(0,d.useCrossChainSwapsEventTracker)(),{quoteRequestProperties:M}=(0,m.useRequestProperties)(),P=(0,p.useRequestMetadataProperties)(),D=(0,f.useQuoteProperties)(),N=(0,r.useSelector)(i.getFromChain),O=(0,r.useSelector)(i.getToChain),B=(0,r.useSelector)(v.getIntlLocale),[R,F]=(0,s.useState)(!1),[j,L]=(0,s.useState)(!1);return s.default.createElement(s.default.Fragment,null,s.default.createElement(S.BridgeQuotesModal,{isOpen:R,onClose:()=>F(!1)}),E?s.default.createElement(y.Column,{gap:3},s.default.createElement(y.Row,{justifyContent:g.JustifyContent.spaceBetween},s.default.createElement(y.Row,{gap:1,justifyContent:g.JustifyContent.flexStart,style:{whiteSpace:"nowrap"}},s.default.createElement(o.Text,{variant:g.TextVariant.bodyLgMedium},w("bestPrice")),s.default.createElement(y.Tooltip,{title:w("howQuotesWork"),position:o.PopoverPosition.TopStart,offset:[-16,16],iconName:o.IconName.Question},w("howQuotesWorkExplanation",[a.BRIDGE_MM_FEE_RATE]))),s.default.createElement(y.Column,{height:g.BlockSize.Full,alignItems:g.AlignItems.flexEnd},s.default.createElement(o.Text,{as:"a",variant:g.TextVariant.bodyMd,color:g.TextColor.primaryDefault,onClick:()=>{M&&P&&D&&_({event:h.MetaMetricsEventName.AllQuotesOpened,properties:{...M,...P,...D}}),F(!0)}},w("moreQuotes")))),s.default.createElement(y.Column,{gap:1},s.default.createElement(y.Row,null,s.default.createElement(o.Text,{variant:g.TextVariant.bodyMdMedium,color:g.TextColor.textAlternativeSoft},w("bridging")),s.default.createElement(y.Row,{gap:1},s.default.createElement(o.AvatarNetwork,{name:(null==N?void 0:N.name)??"",src:null!=N&&N.chainId?(0,b.getImageForChainId)(N.chainId):undefined,size:o.AvatarNetworkSize.Xs,backgroundColor:g.BackgroundColor.transparent}),s.default.createElement(o.Text,{style:{whiteSpace:"nowrap"}},null!=N&&N.chainId?k.NETWORK_TO_SHORT_NETWORK_NAME_MAP[N.chainId]:null==N?void 0:N.name),s.default.createElement(o.Icon,{name:o.IconName.Arrow2Right,size:o.IconSize.Xs}),s.default.createElement(o.AvatarNetwork,{name:(null==O?void 0:O.name)??"",src:null!=O&&O.chainId?(0,b.getImageForChainId)(O.chainId):undefined,size:o.AvatarNetworkSize.Xs,backgroundColor:g.BackgroundColor.transparent}),s.default.createElement(o.Text,{style:{whiteSpace:"nowrap"}},null!=O&&O.chainId?k.NETWORK_TO_SHORT_NETWORK_NAME_MAP[O.chainId]:null==O?void 0:O.name))),s.default.createElement(y.Row,{className:"row-with-warning",backgroundColor:A?g.BackgroundColor.warningMuted:undefined},s.default.createElement(o.Text,{style:{whiteSpace:"nowrap"},variant:g.TextVariant.bodyMdMedium,color:A?g.TextColor.warningDefault:g.TextColor.textAlternativeSoft},w("networkFee")),s.default.createElement(y.Row,{gap:1},s.default.createElement(y.Tooltip,{position:o.PopoverPosition.TopStart,offset:[-16,16],iconName:o.IconName.Question,triggerElement:s.default.createElement(o.Text,{style:{whiteSpace:"nowrap",overflow:"visible",textDecoration:"underline",cursor:"pointer"},color:A?g.TextColor.warningDefault:undefined},j?`${null!=E&&null!==(e=E.totalNetworkFee)&&void 0!==e&&e.valueInCurrency?(0,u.formatTokenAmount)(B,null==E||null===(t=E.totalNetworkFee)||void 0===t?void 0:t.amount,I):undefined}`:`${(0,u.formatCurrencyAmount)(null==E||null===(n=E.totalNetworkFee)||void 0===n?void 0:n.valueInCurrency,x,2)??(0,u.formatTokenAmount)(B,null==E||null===(C=E.totalNetworkFee)||void 0===C?void 0:C.amount,I)}`)},w("howNetworkFeesWorkExplanation",[j?(0,u.formatTokenAmount)(B,null==E?void 0:E.totalMaxNetworkFee.amount,I):(0,u.formatCurrencyAmount)(null==E?void 0:E.totalMaxNetworkFee.valueInCurrency,x,2)])),s.default.createElement(o.Icon,{style:{cursor:"pointer"},color:A?g.IconColor.warningDefault:g.IconColor.iconAlternativeSoft,name:o.IconName.SwapVertical,size:o.IconSize.Md,onClick:()=>L(!j)}))),s.default.createElement(y.Row,null,s.default.createElement(o.Text,{variant:g.TextVariant.bodyMdMedium,color:g.TextColor.textAlternativeSoft},w("time")),s.default.createElement(o.Text,null,w("bridgeTimingMinutes",[(0,u.formatEtaInMinutes)(E.estimatedProcessingTimeInSeconds)]))),s.default.createElement(y.Row,{justifyContent:g.JustifyContent.flexStart,gap:2},s.default.createElement(o.Text,{variant:g.TextVariant.bodyMd,color:g.TextColor.textAlternativeSoft},w("rateIncludesMMFee",[a.BRIDGE_MM_FEE_RATE])),s.default.createElement(o.Text,{color:g.TextColor.textAlternativeSoft},w("bulletpoint")),s.default.createElement(o.ButtonLink,{variant:g.TextVariant.bodyMd,color:g.TextColor.textAlternativeSoft,href:T.TERMS_OF_USE_LINK,externalLink:!0,style:{textDecoration:"underline"}},w("bridgeTerms"))))):null)}}}},{package:"$root$",file:"ui/pages/bridge/quotes/bridge-quote-card.tsx"}],[6851,{"../../../../shared/constants/metametrics":5600,"../../../components/component-library":6193,"../../../ducks/bridge/actions":6639,"../../../ducks/bridge/selectors":6641,"../../../ducks/locale/locale":6650,"../../../ducks/metamask/metamask":6651,"../../../helpers/constants/design-system":6663,"../../../hooks/bridge/events/useQuoteProperties":6719,"../../../hooks/bridge/events/useRequestMetadataProperties":6720,"../../../hooks/bridge/events/useRequestProperties":6721,"../../../hooks/bridge/events/useTradeProperties":6722,"../../../hooks/bridge/useCrossChainSwapsEventTracker":6728,"../../../hooks/useI18nContext":6775,"../../../hooks/useMultichainSelector":6783,"../../../selectors/multichain":7407,"../layout":6838,"../utils/quote":6863,"@metamask/bridge-controller":1411,"@metamask/snaps-sdk/jsx":2690,lodash:4725,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeQuotesModal=void 0;var s,r=(s=e("react"))&&s.__esModule?s:{default:s},a=e("@metamask/snaps-sdk/jsx"),o=e("react-redux"),i=e("lodash"),l=e("@metamask/bridge-controller"),u=e("../../../components/component-library"),c=e("../../../helpers/constants/design-system"),d=e("../utils/quote"),m=e("../../../hooks/useI18nContext"),p=e("../../../ducks/bridge/actions"),f=e("../../../ducks/bridge/selectors"),h=e("../layout"),g=e("../../../ducks/metamask/metamask"),y=e("../../../hooks/bridge/events/useQuoteProperties"),k=e("../../../hooks/bridge/events/useRequestMetadataProperties"),T=e("../../../hooks/bridge/events/useRequestProperties"),v=e("../../../hooks/bridge/useCrossChainSwapsEventTracker"),b=e("../../../../shared/constants/metametrics"),S=e("../../../hooks/bridge/events/useTradeProperties"),C=e("../../../ducks/locale/locale"),w=e("../../../selectors/multichain"),E=e("../../../hooks/useMultichainSelector");function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},x.apply(null,arguments)}n.BridgeQuotesModal=({onClose:e,...t})=>{const n=(0,m.useI18nContext)(),s=(0,o.useDispatch)(),{sortedQuotes:I,activeQuote:A,recommendedQuote:_}=(0,o.useSelector)(f.getBridgeQuotes),M=(0,o.useSelector)(f.getBridgeSortOrder),P=(0,o.useSelector)(g.getCurrentCurrency),D=(0,E.useMultichainSelector)(w.getMultichainNativeCurrency),N=(0,o.useSelector)(C.getIntlLocale),O=(0,v.useCrossChainSwapsEventTracker)(),{quoteRequestProperties:B}=(0,T.useRequestProperties)(),R=(0,k.useRequestMetadataProperties)(),F=(0,y.useQuoteProperties)(),j=(0,S.useTradeProperties)();return r.default.createElement(u.Modal,x({className:"quotes-modal",onClose:e},t),r.default.createElement(u.ModalOverlay,null),r.default.createElement(u.ModalContent,{modalDialogProps:{padding:0}},r.default.createElement(u.ModalHeader,{onBack:e},r.default.createElement(u.Text,{variant:c.TextVariant.headingSm,textAlign:c.TextAlign.Center},n("swapSelectAQuote"))),r.default.createElement(h.Row,{paddingTop:3,paddingBottom:1,paddingInline:4},[[l.SortOrder.COST_ASC,n("bridgeNetCost"),a.IconName.Arrow2Up],[l.SortOrder.ETA_ASC,n("time"),a.IconName.Arrow2Down]].map((([e,t,n])=>r.default.createElement(u.ButtonLink,{key:t,onClick:()=>{B&&R&&F&&O({event:b.MetaMetricsEventName.AllQuotesSorted,properties:{...B,...R,...F,sort_order:M}}),s((0,p.setSortOrder)(e))},startIconName:M===e&&M===l.SortOrder.ETA_ASC?n:undefined,startIconProps:{size:u.IconSize.Xs},endIconName:M===e&&M===l.SortOrder.COST_ASC?n:undefined,endIconProps:{size:u.IconSize.Xs},color:M===e?c.TextColor.primaryDefault:c.TextColor.textAlternativeSoft},r.default.createElement(u.Text,{variant:M===e?c.TextVariant.bodySmMedium:c.TextVariant.bodySm,color:M===e?c.TextColor.primaryDefault:c.TextColor.textAlternativeSoft},t))))),r.default.createElement(h.Column,{style:{overflow:"scroll"}},I.map(((t,a)=>{const{totalNetworkFee:o,estimatedProcessingTimeInSeconds:l,toTokenAmount:m,cost:f,sentAmount:g,quote:{destAsset:y,bridges:k,requestId:T}}=t,v=T===(null==A?void 0:A.quote.requestId),S=T===(null==_?void 0:_.quote.requestId);return r.default.createElement(h.Row,{alignItems:c.AlignItems.flexStart,key:a,backgroundColor:v?c.BackgroundColor.primaryMuted:undefined,onClick:()=>{s((0,p.setSelectedQuote)(t)),B&&R&&F&&j&&O({event:b.MetaMetricsEventName.QuoteSelected,properties:{...B,...R,...F,...j,is_best_quote:S}}),e()},paddingInline:4,paddingTop:3,paddingBottom:3,style:{position:"relative"}},v&&r.default.createElement(h.Column,{style:{position:"absolute",left:4,top:4,height:"calc(100% - 8px)",width:4,borderRadius:8},backgroundColor:c.BackgroundColor.primaryDefault}),r.default.createElement(h.Column,null,r.default.createElement(u.Text,{variant:c.TextVariant.bodyMd},f.valueInCurrency&&(0,d.formatCurrencyAmount)(f.valueInCurrency,P,0)),[null!=o&&o.valueInCurrency&&null!=g&&g.valueInCurrency?n("quotedTotalCost",[(0,d.formatCurrencyAmount)(o.valueInCurrency.plus(g.valueInCurrency),P,0)]):n("quotedTotalCost",[(0,d.formatTokenAmount)(N,o.amount,D)]),n("quotedReceiveAmount",[(0,d.formatCurrencyAmount)(m.valueInCurrency,P,0)??(0,d.formatTokenAmount)(N,m.amount,y.symbol)])].map((e=>r.default.createElement(u.Text,{key:e,variant:c.TextVariant.bodyXsMedium,color:c.TextColor.textAlternative},e)))),r.default.createElement(h.Column,{alignItems:c.AlignItems.flexEnd},r.default.createElement(u.Text,{variant:c.TextVariant.bodyMd},n("bridgeTimingMinutes",[(0,d.formatEtaInMinutes)(l)])),r.default.createElement(u.Text,{variant:c.TextVariant.bodyXsMedium,color:c.TextColor.textAlternative},(0,i.startCase)(k[0]))))})))))}}}},{package:"$root$",file:"ui/pages/bridge/quotes/bridge-quotes-modal.tsx"}],[6852,{"../../../../shared/constants/bridge":5590,"../../../../shared/constants/metametrics":5600,"../../../../shared/constants/multichain/networks":5603,"../../../../shared/constants/network":5604,"../../../components/component-library":6193,"../../../ducks/bridge/selectors":6641,"../../../ducks/locale/locale":6650,"../../../ducks/metamask/metamask":6651,"../../../helpers/constants/design-system":6663,"../../../hooks/bridge/events/useQuoteProperties":6719,"../../../hooks/bridge/events/useRequestMetadataProperties":6720,"../../../hooks/bridge/events/useRequestProperties":6721,"../../../hooks/bridge/useCrossChainSwapsEventTracker":6728,"../../../hooks/useI18nContext":6775,"../layout":6838,"../utils/quote":6863,"./bridge-quotes-modal":6851,"@metamask/bridge-controller":1411,react:5129,"react-redux":5087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainBridgeQuoteCard=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),r=e("react-redux"),a=e("@metamask/bridge-controller"),o=e("../../../components/component-library"),i=e("../../../ducks/bridge/selectors"),l=e("../../../hooks/useI18nContext"),u=e("../utils/quote"),c=e("../../../ducks/metamask/metamask"),d=e("../../../hooks/bridge/useCrossChainSwapsEventTracker"),m=e("../../../hooks/bridge/events/useRequestProperties"),p=e("../../../hooks/bridge/events/useRequestMetadataProperties"),f=e("../../../hooks/bridge/events/useQuoteProperties"),h=e("../../../../shared/constants/metametrics"),g=e("../../../helpers/constants/design-system"),y=e("../layout"),k=e("../../../../shared/constants/bridge"),T=e("../../../../shared/constants/network"),v=e("../../../../shared/constants/multichain/networks"),b=e("../../../ducks/locale/locale"),S=e("./bridge-quotes-modal");function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}n.MultichainBridgeQuoteCard=()=>{var e;const t=(0,l.useI18nContext)(),{activeQuote:n}=(0,r.useSelector)(i.getBridgeQuotes),C=(0,r.useSelector)(c.getCurrentCurrency),w=(0,d.useCrossChainSwapsEventTracker)(),{quoteRequestProperties:E}=(0,m.useRequestProperties)(),x=(0,p.useRequestMetadataProperties)(),I=(0,f.useQuoteProperties)(),A=(0,r.useSelector)(i.getFromChain),_=(0,r.useSelector)(i.getToChain),M=(0,r.useSelector)(b.getIntlLocale),P=(0,r.useSelector)(i.getIsBridgeTx),[D,N]=(0,s.useState)(!1),O=e=>(0,a.isSolanaChainId)(e)?v.MULTICHAIN_TOKEN_IMAGE_MAP[v.MultichainNetworks.SOLANA]:T.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[(0,a.formatChainIdToHex)(e)],B=e=>(0,a.isSolanaChainId)(e)?k.NETWORK_TO_SHORT_NETWORK_NAME_MAP[v.MultichainNetworks.SOLANA]:k.NETWORK_TO_SHORT_NETWORK_NAME_MAP[(0,a.formatChainIdToHex)(e)];return s.default.createElement(s.default.Fragment,null,s.default.createElement(S.BridgeQuotesModal,{isOpen:D,onClose:()=>N(!1)}),n?s.default.createElement(y.Column,{gap:3},s.default.createElement(y.Column,{gap:2},s.default.createElement(y.Row,{justifyContent:g.JustifyContent.spaceBetween},s.default.createElement(y.Row,{gap:1},s.default.createElement(o.Text,{variant:g.TextVariant.bodyMd,color:g.TextColor.textAlternative},t("multichainQuoteCardQuoteLabel")),s.default.createElement(y.Tooltip,{title:t("howQuotesWork"),position:o.PopoverPosition.TopStart,offset:[-16,16],iconName:o.IconName.Question},t("howQuotesWorkExplanation",[a.BRIDGE_MM_FEE_RATE]))),s.default.createElement(o.Text,null,`1 ${n.quote.srcAsset.symbol} = ${(0,u.formatTokenAmount)(M,n.toTokenAmount.amount.dividedBy(n.sentAmount.amount))} ${n.quote.destAsset.symbol}`)),P&&s.default.createElement(y.Row,{justifyContent:g.JustifyContent.spaceBetween},s.default.createElement(o.Text,{variant:g.TextVariant.bodyMd,color:g.TextColor.textAlternative},t("multichainQuoteCardBridgingLabel")),s.default.createElement(y.Row,{gap:1},s.default.createElement(o.AvatarNetwork,{name:(null==A?void 0:A.name)??"",src:O(n.quote.srcChainId),size:o.AvatarNetworkSize.Xs,backgroundColor:g.BackgroundColor.transparent}),s.default.createElement(o.Text,null,B(n.quote.srcChainId)),s.default.createElement(o.Icon,{name:o.IconName.Arrow2Right,size:o.IconSize.Xs}),s.default.createElement(o.AvatarNetwork,{name:(null==_?void 0:_.name)??"",src:O(n.quote.destChainId),size:o.AvatarNetworkSize.Xs,backgroundColor:g.BackgroundColor.transparent}),s.default.createElement(o.Text,null,B(n.quote.destChainId)))),s.default.createElement(y.Row,{justifyContent:g.JustifyContent.spaceBetween},s.default.createElement(o.Text,{variant:g.TextVariant.bodyMd,color:g.TextColor.textAlternative},t("networkFee")),s.default.createElement(o.Text,null,(0,u.formatCurrencyAmount)(null===(e=n.totalNetworkFee)||void 0===e?void 0:e.valueInCurrency,C,2))),s.default.createElement(y.Row,{justifyContent:g.JustifyContent.spaceBetween},s.default.createElement(o.Text,{variant:g.TextVariant.bodyMd,color:g.TextColor.textAlternative},t("multichainQuoteCardTimeLabel")),s.default.createElement(o.Text,null,t("bridgeTimingMinutes",[(0,u.formatEtaInMinutes)(n.estimatedProcessingTimeInSeconds)]))),s.default.createElement(y.Row,{justifyContent:g.JustifyContent.spaceBetween,color:g.TextColor.textAlternative},s.default.createElement(o.Text,{variant:g.TextVariant.bodyMd},t("rateIncludesMMFee",[a.BRIDGE_MM_FEE_RATE])),s.default.createElement(o.ButtonLink,{variant:g.TextVariant.bodyMd,onClick:()=>{E&&x&&I&&w({event:h.MetaMetricsEventName.AllQuotesOpened,properties:{...E,...x,...I}}),N(!0)}},t("moreQuotes"))))):null)}}}},{package:"$root$",file:"ui/pages/bridge/quotes/multichain-bridge-quote-card.tsx"}],[6853,{"../../../../shared/types/bridge-status":5682,"../../../components/component-library":6193,"../../../helpers/constants/design-system":6663,"../../../hooks/useI18nContext":6775,"./segment":6859,"@metamask/transaction-controller":2773,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({bridgeTxHistoryItem:e,transactionGroup:t}){const n=(0,l.useI18nContext)(),{initialTransaction:r}=t,a=m(r),c=p({bridgeTxHistoryItem:e,srcTxStatus:a}),f=d(a);return s.default.createElement(o.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Column,gap:2},s.default.createElement(o.Text,{color:i.TextColor.textAlternative},n("bridgeTransactionProgress",[f])),s.default.createElement(o.Box,{display:i.Display.Flex,gap:2,width:i.BlockSize.Full},s.default.createElement(u.default,{type:a}),s.default.createElement(u.default,{type:c})))};var s=c(e("react")),r=e("@metamask/transaction-controller"),a=e("../../../../shared/types/bridge-status"),o=e("../../../components/component-library"),i=e("../../../helpers/constants/design-system"),l=e("../../../hooks/useI18nContext"),u=c(e("./segment"));function c(e){return e&&e.__esModule?e:{default:e}}const d=e=>{if(e===a.StatusTypes.PENDING)return 1;if(e===a.StatusTypes.COMPLETE)return 2;throw new Error("No more possible states for srcTxStatus")},m=e=>e.status===r.TransactionStatus.confirmed?a.StatusTypes.COMPLETE:a.StatusTypes.PENDING,p=({bridgeTxHistoryItem:e,srcTxStatus:t})=>{var n;return t!==a.StatusTypes.COMPLETE?null:null!=e&&null!==(n=e.status.destChain)&&void 0!==n&&n.txHash&&e.status.status===a.StatusTypes.COMPLETE?a.StatusTypes.COMPLETE:a.StatusTypes.PENDING}}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/bridge-activity-item-tx-segments.tsx"}],[6854,{"../../../../shared/constants/common":5591,"../../../components/component-library":6193,"../../../components/multichain/menu-items/view-explorer-menu-item":6368,"../../../contexts/metametrics":6627,"../../../helpers/constants/design-system":6663,"../../../hooks/useI18nContext":6775,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({srcChainId:e,destChainId:t,srcBlockExplorerUrl:n,destBlockExplorerUrl:u}){const c=(0,s.useContext)(o.MetaMetricsContext),p=(0,l.useI18nContext)(),f=p("bridgeExplorerLinkViewOn",[d(e,n)]),h=u?p("bridgeExplorerLinkViewOn",[d(t,u)]):undefined;return s.default.createElement(r.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Column,gap:4},n&&s.default.createElement(r.ButtonSecondary,{endIconName:r.IconName.Export,onClick:()=>{n&&(0,a.openBlockExplorer)(n,m,c)}},f),u&&s.default.createElement(r.ButtonSecondary,{endIconName:r.IconName.Export,onClick:()=>{u&&(0,a.openBlockExplorer)(u,m,c)}},h))},n.getBlockExplorerUrl=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),r=e("../../../components/component-library"),a=e("../../../components/multichain/menu-items/view-explorer-menu-item"),o=e("../../../contexts/metametrics"),i=e("../../../helpers/constants/design-system"),l=e("../../../hooks/useI18nContext"),u=e("../../../../shared/constants/common");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}const d=(e,t)=>{const n=e?u.CHAINID_DEFAULT_BLOCK_EXPLORER_HUMAN_READABLE_URL_MAP[e]:undefined;return n||(t?t.split("/")[2]:undefined)};n.getBlockExplorerUrl=(e,t)=>{var n;if(!e||!t)return undefined;const s=e.defaultBlockExplorerUrlIndex;if(s===undefined)return undefined;return`${null===(n=e.blockExplorerUrls[s])||void 0===n?void 0:n.replace(/\/$/u,"")}/tx/${t}`};const m="Activity Tab"}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/bridge-explorer-links.tsx"}],[6855,{"../../../../shared/constants/bridge":5590,"../../../../shared/modules/Numeric":5652,"../../../../shared/types/bridge-status":5682,"../../../components/component-library":6193,"../../../helpers/constants/design-system":6663,"../../../hooks/useI18nContext":6775,"@metamask/transaction-controller":2773,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({step:e,networkConfigurationsByChainId:t,time:n,stepStatus:r}){const i=(0,u.useI18nContext)();return s.createElement(o.Box,{display:l.Display.Flex,alignItems:l.AlignItems.center,gap:2,className:"bridge-transaction-details__step-grid--desc"},n&&s.createElement(o.Text,{color:l.TextColor.textDefault},n),s.createElement(o.Text,{color:r===a.StatusTypes.PENDING||r===a.StatusTypes.COMPLETE?l.TextColor.textDefault:l.TextColor.textAlternative,fontWeight:r===a.StatusTypes.PENDING?l.FontWeight.Medium:l.FontWeight.Normal},e.action===a.ActionTypes.BRIDGE&&m(i,r,e,t),e.action===a.ActionTypes.SWAP&&p(i,r,e)))},n.getStepStatus=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),r=e("@metamask/transaction-controller"),a=e("../../../../shared/types/bridge-status"),o=e("../../../components/component-library"),i=e("../../../../shared/modules/Numeric"),l=e("../../../helpers/constants/design-system"),u=e("../../../hooks/useI18nContext"),c=e("../../../../shared/constants/bridge");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}const m=(e,t,n,s)=>{var r;const o=n.destChainId?new i.Numeric(n.destChainId,10).toPrefixedHexString():undefined,l=o?s[o]:undefined,u=c.NETWORK_TO_SHORT_NETWORK_NAME_MAP[null==l?void 0:l.chainId],d=null===(r=n.destAsset)||void 0===r?void 0:r.symbol;return d?t===a.StatusTypes.COMPLETE?e("bridgeStepActionBridgeComplete",[d,u]):e("bridgeStepActionBridgePending",[d,u]):null},p=(e,t,n)=>{var s,r;const o=null===(s=n.srcAsset)||void 0===s?void 0:s.symbol,i=null===(r=n.destAsset)||void 0===r?void 0:r.symbol;return o&&i?t===a.StatusTypes.COMPLETE?e("bridgeStepActionSwapComplete",[o,i]):e("bridgeStepActionSwapPending",[o,i]):null};n.getStepStatus=({bridgeHistoryItem:e,step:t,srcChainTxMeta:n})=>e?t.action===a.ActionTypes.SWAP?((e,t,n)=>{const s=t.srcChainId===t.destChainId,o=t.srcChainId===e.quote.srcChainId;if(s&&o)return(null==n?void 0:n.status)===r.TransactionStatus.confirmed?a.StatusTypes.COMPLETE:a.StatusTypes.PENDING;return(null==n?void 0:n.status)===r.TransactionStatus.confirmed&&e.status?e.status.status:null})(e,t,n):t.action===a.ActionTypes.BRIDGE?(e=>e.status?e.status.status:null)(e):a.StatusTypes.UNKNOWN:a.StatusTypes.UNKNOWN}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/bridge-step-description.tsx"}],[6856,{"../../../../shared/types/bridge-status":5682,"../../../components/component-library":6193,"../../../helpers/utils/util":6712,"./bridge-step-description":6855,"./step-progress-bar-item":6860,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({bridgeHistoryItem:e,srcChainTxMeta:t,networkConfigurationsByChainId:n}){const u=(null==e?void 0:e.quote.steps)||[],c=u.map((n=>(0,i.getStepStatus)({bridgeHistoryItem:e,step:n,srcChainTxMeta:t})));return s.default.createElement(r.Box,{className:"bridge-transaction-details__step-grid"},u.map(((r,m)=>{const p=m>0?c[m-1]:null,f=c[m],h=m<c.length-1?c[m+1]:null,g=f===a.StatusTypes.COMPLETE&&(h===a.StatusTypes.PENDING||h===a.StatusTypes.COMPLETE),y=p===a.StatusTypes.PENDING&&f===a.StatusTypes.PENDING?null:f,k=(0,o.formatDate)(d(m,m===u.length-1,(null==e?void 0:e.startTime)||(null==t?void 0:t.time),(null==e?void 0:e.estimatedProcessingTimeInSeconds)||0),"hh:mm a");return s.default.createElement(l.default,{key:`progress-${r.action}-${r.srcChainId}-${r.destChainId}`,stepStatus:y,isLastItem:m===u.length-1,isEdgeComplete:g},s.default.createElement(i.default,{step:r,networkConfigurationsByChainId:n,stepStatus:y,time:k}))})))};var s=c(e("react")),r=e("../../../components/component-library"),a=e("../../../../shared/types/bridge-status"),o=e("../../../helpers/utils/util"),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("./bridge-step-description")),l=c(e("./step-progress-bar-item"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function c(e){return e&&e.__esModule?e:{default:e}}const d=(e,t,n,s)=>0===e?n:t&&n&&s?n+1e3*s:undefined}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/bridge-step-list.tsx"}],[6857,{"../../../components/component-library":6193,"../../../helpers/constants/design-system":6663,classnames:3971,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),a=(s=e("classnames"))&&s.__esModule?s:{default:s},o=e("../../../components/component-library"),i=e("../../../helpers/constants/design-system");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}const u=r.forwardRef((({size:e=o.IconSize.Md,color:t,className:n="",style:s},l)=>r.createElement(o.Box,{className:(0,a.default)(n,"mm-icon",`mm-icon--size-${e}`),ref:l,as:"span",display:i.Display.InlineBlock,style:{height:"12px",width:"12px",border:`1px solid var(--color-${t})`,borderRadius:"50%",backgroundColor:`var(--color-${i.BackgroundColor.backgroundDefault})`,zIndex:1,...s}})));n.default=u}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/hollow-circle.tsx"}],[6858,{"../../../components/component-library":6193,"../../../helpers/constants/design-system":6663,"./hollow-circle":6857,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({iconSize:e,color:t}){return s.default.createElement(r.Box,{style:{position:"relative"}},s.default.createElement(r.Box,{className:"bridge-transaction-details__icon-loading",backgroundColor:a.BackgroundColor.primaryMuted,display:a.Display.Flex,justifyContent:a.JustifyContent.center,alignItems:a.AlignItems.center,borderRadius:a.BorderRadius.full,style:{width:"2rem",height:"2rem"}}),s.default.createElement(o.default,{size:e,color:t,style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",borderWidth:"2px"}}))};var s=i(e("react")),r=e("../../../components/component-library"),a=e("../../../helpers/constants/design-system"),o=i(e("./hollow-circle"));function i(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/pulsing-circle.tsx"}],[6859,{"../../../../shared/types/bridge-status":5682,"../../../components/component-library":6193,"../../../helpers/constants/design-system":6663,classnames:3971,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({type:e}){return s.default.createElement(a.Box,{width:o.BlockSize.Full,backgroundColor:o.BackgroundColor.backgroundAlternative,borderRadius:o.BorderRadius.pill},s.default.createElement(a.Box,{width:o.BlockSize.Full,backgroundColor:o.BackgroundColor.primaryDefault,borderRadius:o.BorderRadius.pill,className:(0,r.default)({"bridge-transaction-details__segment":!0,"bridge-transaction-details__segment--pending":e===i.StatusTypes.PENDING,"bridge-transaction-details__segment--complete":e===i.StatusTypes.COMPLETE})}))};var s=l(e("react")),r=l(e("classnames")),a=e("../../../components/component-library"),o=e("../../../helpers/constants/design-system"),i=e("../../../../shared/types/bridge-status");function l(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/segment.tsx"}],[686,{"./RegistryItem":694,"./RegistryType":695,"./lib":705},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoECKey=void 0;const s=e("./lib"),r=e("./RegistryItem"),a=e("./RegistryType");var o;!function(e){e[e.curve=1]="curve",e[e.private=2]="private",e[e.data=3]="data"}(o||(o={}));class i extends r.RegistryItem{constructor(e){super(),this.isECKey=()=>!0,this.getCurve=()=>this.curve||0,this.isPrivateKey=()=>this.privateKey||!1,this.getData=()=>this.data,this.getRegistryType=()=>a.RegistryTypes.CRYPTO_ECKEY,this.toDataItem=()=>{const e={};return this.curve&&(e[o.curve]=this.curve),this.privateKey!==undefined&&(e[o.private]=this.privateKey),e[o.data]=this.data,new s.DataItem(e)},this.getOutputDescriptorContent=()=>this.data.toString("hex"),this.data=e.data,this.curve=e.curve,this.privateKey=e.privateKey||undefined}}n.CryptoECKey=i,i.fromDataItem=e=>{const t=e.getData(),n=t[o.curve],s=t[o.private],r=t[o.data];if(!r)throw new Error(`#[ur-registry][CryptoECKey][fn.fromDataItem]: decoded [dataItem][#data.data] is undefined: ${e}`);return new i({data:r,curve:n,privateKey:s})},i.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return i.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoECKey.js"}],[6860,{"../../../../shared/types/bridge-status":5682,"../../../components/component-library":6193,"../../../helpers/constants/design-system":6663,"./hollow-circle":6857,"./pulsing-circle":6858,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({stepStatus:e,isLastItem:t,isEdgeComplete:n,children:u}){return s.default.createElement(s.default.Fragment,null,(null===e||e===r.StatusTypes.UNKNOWN)&&s.default.createElement(i.default,{size:c,color:o.IconColor.iconMuted}),e===r.StatusTypes.PENDING&&s.default.createElement(l.default,{iconSize:c,color:o.IconColor.primaryDefault}),e===r.StatusTypes.COMPLETE&&s.default.createElement(a.Icon,{name:a.IconName.FullCircle,color:o.IconColor.primaryDefault,size:c}),u,!t&&s.default.createElement(d,{color:n?o.IconColor.primaryDefault:o.IconColor.iconMuted}),!t&&s.default.createElement("div",null))};var s=u(e("react")),r=e("../../../../shared/types/bridge-status"),a=e("../../../components/component-library"),o=e("../../../helpers/constants/design-system"),i=u(e("./hollow-circle")),l=u(e("./pulsing-circle"));function u(e){return e&&e.__esModule?e:{default:e}}const c=a.IconSize.Xs,d=({color:e})=>s.default.createElement("div",{style:{height:"60px",marginTop:"-1rem",marginBottom:"-1rem",width:"1px",backgroundColor:`var(--color-${e})`,zIndex:.1}})}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/step-progress-bar-item.tsx"}],[6861,{"../../../components/component-library":6193,"../../../helpers/constants/design-system":6663,react:5129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({title:e,value:t}){return r.default.createElement(a.Box,{display:o.Display.Flex,justifyContent:o.JustifyContent.spaceBetween},r.default.createElement(a.Text,{width:o.BlockSize.OneFourth,paddingRight:1,variant:o.TextVariant.bodyMd},e),r.default.createElement(a.Text,{display:o.Display.Flex,width:o.BlockSize.ThreeFourths,flexDirection:o.FlexDirection.Column,alignItems:o.AlignItems.flexEnd,textAlign:o.TextAlign.Right,paddingLeft:1,variant:o.TextVariant.bodyMd},t))};var s,r=(s=e("react"))&&s.__esModule?s:{default:s},a=e("../../../components/component-library"),o=e("../../../helpers/constants/design-system")}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/transaction-detail-row.tsx"}],[6862,{"../../../../shared/constants/bridge":5590,"../../../../shared/constants/common":5591,"../../../../shared/constants/metametrics":5600,"../../../../shared/constants/time":5617,"../../../../shared/modules/conversion.utils":5657,"../../../../shared/modules/selectors/networks":5674,"../../../../shared/types/bridge-status":5682,"../../../components/app/confirm/info/row":5783,"../../../components/app/transaction-activity-log":6085,"../../../components/app/transaction-breakdown/transaction-breakdown-utils":6095,"../../../components/app/user-preferenced-currency-display/user-preferenced-currency-display.component":6110,"../../../components/component-library":6193,"../../../components/multichain/pages/page":6443,"../../../contexts/metametrics":6627,"../../../ducks/bridge-status/selectors":6638,"../../../ducks/locale/locale":6650,"../../../helpers/constants/common":6661,"../../../helpers/constants/design-system":6663,"../../../helpers/utils/util":6712,"../../../hooks/bridge/useBridgeChainInfo":6723,"../../../hooks/useI18nContext":6775,"../../../selectors":7403,"../../../selectors/multichain":7407,"../../confirmations/components/simulation-details/formatAmount":7031,"./bridge-explorer-links":6854,"./bridge-step-list":6856,"./transaction-detail-row":6861,"@metamask/bridge-controller":1411,"bignumber.js":3847,react:5129,"react-redux":5087,"react-router-dom":5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getIsDelayed=n.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=R(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),r=e("react-redux"),a=e("react-router-dom"),o=e("bignumber.js"),i=e("@metamask/bridge-controller"),l=e("../../../components/component-library"),u=e("../../../components/multichain/pages/page"),c=e("../../../ducks/bridge-status/selectors"),d=B(e("../../../hooks/bridge/useBridgeChainInfo")),m=e("../../../../shared/modules/selectors/networks"),p=e("../../../components/app/transaction-breakdown/transaction-breakdown-utils"),f=e("../../../../shared/modules/conversion.utils"),h=B(e("../../../components/app/user-preferenced-currency-display/user-preferenced-currency-display.component")),g=e("../../../../shared/constants/common"),y=e("../../../helpers/constants/common"),k=e("../../../../shared/types/bridge-status"),T=e("../../../helpers/constants/design-system"),v=e("../../../helpers/utils/util"),b=e("../../../components/app/confirm/info/row"),S=e("../../../hooks/useI18nContext"),C=e("../../../selectors"),w=e("../../../../shared/constants/metametrics"),E=e("../../../contexts/metametrics"),x=e("../../confirmations/components/simulation-details/formatAmount"),I=e("../../../ducks/locale/locale"),A=B(e("../../../components/app/transaction-activity-log")),_=e("../../../../shared/constants/bridge"),M=e("../../../selectors/multichain"),P=e("../../../../shared/constants/time"),D=B(e("./transaction-detail-row")),N=B(e("./bridge-explorer-links")),O=B(e("./bridge-step-list"));function B(e){return e&&e.__esModule?e:{default:e}}function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(R=function(e){return e?n:t})(e)}const F=(e,t)=>{var n;if(!e||!t)return undefined;const s=e.defaultBlockExplorerUrlIndex;if(s===undefined)return undefined;return`${null===(n=e.blockExplorerUrls[s])||void 0===n?void 0:n.replace(/\/$/u,"")}/tx/${t}`},j=(e,t)=>{const n=10*P.MINUTE;return Boolean(e===k.StatusTypes.PENDING&&(null==t?void 0:t.startTime)&&Date.now()>t.startTime+n+1e3*t.estimatedProcessingTimeInSeconds)};n.getIsDelayed=j;const L={[k.StatusTypes.PENDING]:T.TextColor.warningDefault,[k.StatusTypes.COMPLETE]:T.TextColor.successDefault,[k.StatusTypes.FAILED]:T.TextColor.errorDefault,[k.StatusTypes.UNKNOWN]:T.TextColor.errorDefault};n.default=()=>{var e,t,n;const P=(0,S.useI18nContext)(),B=(0,r.useSelector)(I.getIntlLocale),R=(0,s.useContext)(E.MetaMetricsContext),$=(0,r.useSelector)((e=>e)),q=(0,a.useHistory)(),U=(0,a.useLocation)(),{srcTxMetaId:W}=(0,a.useParams)(),H=(0,r.useSelector)(c.selectBridgeHistoryForAccount),V=(0,r.useSelector)(C.selectedAddressTxListSelectorAllChain),z=(0,r.useSelector)(m.getNetworkConfigurationsByChainId),G=(null===(e=U.state)||void 0===e?void 0:e.transactionGroup)||null,Q=(null===(t=U.state)||void 0===t?void 0:t.isEarliestNonce)||null,K=V.find((e=>e.id===W)),J=W?H[W]:undefined,{srcNetwork:Y,destNetwork:X}=(0,d.default)({bridgeHistoryItem:J,srcTxMeta:K}),Z=null==K?void 0:K.hash,ee=null!=Y&&Y.isEvm?F(Y,Z):undefined,te=null==J||null===(n=J.status.destChain)||void 0===n?void 0:n.txHash,ne=null!=X&&X.isEvm?F(X,te):undefined,se=J?null==J?void 0:J.status.status:k.StatusTypes.PENDING,re=Y?(0,M.getImageForChainId)(Y.isEvm?(0,i.formatChainIdToHex)(Y.chainId):Y.chainId):undefined,ae=X?(0,M.getImageForChainId)(X.isEvm?(0,i.formatChainIdToHex)(X.chainId):X.chainId):undefined,oe=_.NETWORK_TO_SHORT_NETWORK_NAME_MAP[null==Y?void 0:Y.chainId],ie=_.NETWORK_TO_SHORT_NETWORK_NAME_MAP[null==X?void 0:X.chainId],le=K?(0,p.getTransactionBreakdownData)({state:$,transaction:K,isTokenApprove:!1}):undefined,ue=(({locale:e,bridgeHistoryItem:t})=>{var n;return null!=t&&null!==(n=t.pricingData)&&void 0!==n&&n.amountSent?(0,x.formatAmount)(e,new o.BigNumber(t.pricingData.amountSent)):undefined})({locale:B,bridgeHistoryItem:J}),ce=(({locale:e,bridgeHistoryItem:t})=>{var n;if(!t)return undefined;const s=null===(n=t.status.destChain)||void 0===n?void 0:n.amount;if(!s)return undefined;const r=t.quote.destAsset.decimals;return(0,x.formatAmount)(e,new o.BigNumber(s).dividedBy(10**r))})({locale:B,bridgeHistoryItem:J}),de=j(se,J),me=s.default.createElement(l.Box,{display:T.Display.Flex,gap:1,alignItems:T.AlignItems.center},Y&&s.default.createElement(l.AvatarNetwork,{size:l.AvatarNetworkSize.Xs,src:re,name:null==Y?void 0:Y.name}),oe),pe=s.default.createElement(l.Box,{display:T.Display.Flex,gap:1,alignItems:T.AlignItems.center},X&&s.default.createElement(l.AvatarNetwork,{size:l.AvatarNetworkSize.Xs,src:ae,name:null==X?void 0:X.name}),ie);return s.default.createElement("div",{className:"bridge__container"},s.default.createElement(u.Header,{className:"bridge__header",startAccessory:s.default.createElement(l.ButtonIcon,{iconName:l.IconName.ArrowLeft,size:l.ButtonIconSize.Sm,ariaLabel:P("back"),onClick:()=>q.goBack()})},P("bridge")," details"),s.default.createElement(u.Content,{className:"bridge-transaction-details__content"},s.default.createElement(l.Box,{display:T.Display.Flex,flexDirection:T.FlexDirection.Column,gap:4},de&&s.default.createElement(l.BannerAlert,{title:P("bridgeTxDetailsDelayedTitle"),severity:l.BannerAlertSeverity.Warning},s.default.createElement(l.Text,{display:T.Display.Flex,alignItems:T.AlignItems.center},P("bridgeTxDetailsDelayedDescription")," ",s.default.createElement(l.ButtonLink,{externalLink:!0,href:y.SUPPORT_REQUEST_LINK,onClick:()=>{R({category:w.MetaMetricsEventCategory.Home,event:w.MetaMetricsEventName.SupportLinkClicked,properties:{url:y.SUPPORT_REQUEST_LINK,location:"Bridge Tx Details"}},{contextPropsIntoEventProperties:[w.MetaMetricsContextProp.PageTitle]})}},P("bridgeTxDetailsDelayedDescriptionSupport")),".")),se!==k.StatusTypes.COMPLETE&&(J||K)&&s.default.createElement(O.default,{bridgeHistoryItem:J,srcChainTxMeta:K,networkConfigurationsByChainId:z}),s.default.createElement(N.default,{srcChainId:null!=Y&&Y.isEvm?(0,i.formatChainIdToHex)(null==Y?void 0:Y.chainId):undefined,destChainId:null!=X&&X.isEvm?(0,i.formatChainIdToHex)(null==X?void 0:X.chainId):undefined,srcBlockExplorerUrl:ee,destBlockExplorerUrl:ne}),s.default.createElement(b.ConfirmInfoRowDivider,null),s.default.createElement(l.Box,{display:T.Display.Flex,flexDirection:T.FlexDirection.Column,gap:2},s.default.createElement(D.default,{title:P("bridgeTxDetailsStatus"),value:s.default.createElement(l.Text,{textTransform:T.TextTransform.Capitalize,color:se?L[se]:undefined},null==se?void 0:se.toLowerCase())}),s.default.createElement(D.default,{title:P("bridgeTxDetailsBridging"),value:s.default.createElement(l.Box,{display:T.Display.Flex,gap:1,alignItems:T.AlignItems.center,flexWrap:T.FlexWrap.Wrap,justifyContent:T.JustifyContent.flexEnd},me,s.default.createElement(l.Icon,{name:l.IconName.Arrow2Right,size:l.IconSize.Sm}),pe)}),s.default.createElement(D.default,{title:P("bridgeTxDetailsTimestamp"),value:P("bridgeTxDetailsTimestampValue",[(0,v.formatDate)(null==K?void 0:K.time,"MMM d, yyyy"),(0,v.formatDate)(null==K?void 0:K.time,"hh:mm a")])})),s.default.createElement(b.ConfirmInfoRowDivider,null),s.default.createElement(l.Box,{display:T.Display.Flex,flexDirection:T.FlexDirection.Column,gap:2},s.default.createElement(D.default,{title:P("bridgeTxDetailsYouSent"),value:s.default.createElement(l.Box,{display:T.Display.Flex,gap:1,alignItems:T.AlignItems.center,flexWrap:T.FlexWrap.Wrap,justifyContent:T.JustifyContent.flexEnd},P("bridgeTxDetailsTokenAmountOnChain",[ue,null==J?void 0:J.quote.srcAsset.symbol]),me)}),ce&&(null==J?void 0:J.quote.destAsset.symbol)&&s.default.createElement(D.default,{title:P("bridgeTxDetailsYouReceived"),value:s.default.createElement(l.Box,{display:T.Display.Flex,gap:1,alignItems:T.AlignItems.center,flexWrap:T.FlexWrap.Wrap,justifyContent:T.JustifyContent.flexEnd},P("bridgeTxDetailsTokenAmountOnChain",[ce,null==J?void 0:J.quote.destAsset.symbol]),pe)}),s.default.createElement(D.default,{title:P("bridgeTxDetailsTotalGasFee"),value:s.default.createElement(h.default,{currency:null==le?void 0:le.nativeCurrency,denomination:g.EtherDenomination.ETH,numberOfDecimals:6,value:null==le?void 0:le.hexGasTotal,type:y.PRIMARY})})),s.default.createElement(b.ConfirmInfoRowDivider,null),s.default.createElement(l.Box,{display:T.Display.Flex,flexDirection:T.FlexDirection.Column,gap:2},s.default.createElement(D.default,{title:P("bridgeTxDetailsNonce"),value:null!=K&&K.txParams.nonce?(0,f.hexToDecimal)(null==K?void 0:K.txParams.nonce):undefined}),G&&void 0!==Q&&s.default.createElement(A.default,{transactionGroup:G,className:"transaction-list-item-details__transaction-activity-log",isEarliestNonce:Q})))))}}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/transaction-details.tsx"}],[6864,{"../../../shared/constants/metametrics":5600,"../../../shared/constants/network":5604,"../../../shared/constants/transaction":5619,"../../../shared/modules/selectors/networks":5674,"../../../shared/modules/string-utils":5677,"../../components/app/assets/nfts/nft-default-image/nft-default-image":5734,"../../components/app/network-account-balance-header/network-account-balance-header":5908,"../../components/component-library":6193,"../../components/ui/page-container":6574,"../../components/ui/site-origin/site-origin":6592,"../../contexts/i18n":6623,"../../contexts/metametrics":6627,"../../ducks/history/history":6648,"../../helpers/constants/common":6661,"../../helpers/constants/design-system":6663,"../../helpers/utils/util":6712,"../../hooks/useCurrencyDisplay":6764,"../../hooks/useOriginMetadata":6789,"../../hooks/useUserPreferencedCurrency":6809,"../../selectors":7403,"../../store/actions":7421,"../confirmations/components/confirm/nav":6984,"@metamask/etherscan-link":1926,"@metamask/rpc-errors":2415,classnames:3971,react:5129,"react-redux":5087,"react-router-dom":5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=D(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),r=e("react-redux"),a=e("react-router-dom"),o=e("@metamask/rpc-errors"),i=e("@metamask/etherscan-link"),l=P(e("classnames")),u=e("../../components/ui/page-container"),c=e("../../contexts/i18n"),d=e("../../contexts/metametrics"),m=e("../../ducks/history/history"),p=e("../../store/actions"),f=e("../../../shared/constants/metametrics"),h=e("../../../shared/constants/transaction"),g=e("../../components/component-library"),y=e("../../../shared/modules/selectors/networks"),k=e("../../selectors"),T=P(e("../../components/app/assets/nfts/nft-default-image/nft-default-image")),v=e("../../helpers/utils/util"),b=e("../../helpers/constants/design-system"),S=P(e("../../components/app/network-account-balance-header/network-account-balance-header")),C=e("../../../shared/constants/network"),w=P(e("../../components/ui/site-origin/site-origin")),E=e("../../helpers/constants/common"),x=e("../../hooks/useUserPreferencedCurrency"),I=e("../../hooks/useCurrencyDisplay"),A=e("../../hooks/useOriginMetadata"),_=e("../../../shared/modules/string-utils"),M=e("../confirmations/components/confirm/nav");function P(e){return e&&e.__esModule?e:{default:e}}function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(D=function(e){return e?n:t})(e)}n.default=()=>{var e,t;const n=(0,s.useContext)(c.I18nContext),P=(0,r.useDispatch)(),D=(0,a.useHistory)(),N=(0,r.useSelector)(m.getMostRecentOverviewPage),O=(0,r.useSelector)(k.getSuggestedNfts).sort(((e,t)=>e.requestData.asset.tokenId-t.requestData.asset.tokenId)),B=(0,r.useSelector)(k.getRpcPrefsForCurrentProvider),R=(0,r.useSelector)(y.getCurrentChainId),F=(0,r.useSelector)(k.getIpfsGateway),j=(0,s.useContext)(d.MetaMetricsContext),L=(0,r.useSelector)(k.getNetworkIdentifier),{address:$}=(0,r.useSelector)(k.getSelectedInternalAccount),q=(0,r.useSelector)(k.getSelectedAccountCachedBalance),U=(0,r.useSelector)((e=>(0,k.getAddressBookEntryOrAccountName)(e,$))),[W,H]=(0,s.useState)([]),V=C.NETWORK_TO_NAME_MAP[R]||L,{currency:z,numberOfDecimals:G}=(0,x.useUserPreferencedCurrency)(E.PRIMARY,{ethNumberOfDecimals:4}),[Q]=(0,I.useCurrencyDisplay)(q,{numberOfDecimals:G,currency:z}),K=(0,A.useOriginMetadata)(null===(e=O[0])||void 0===e?void 0:e.origin)||{},J=null===(t=O[0])||void 0===t?void 0:t.id,Y=(0,s.useCallback)((async()=>{await Promise.all(O.map((async({requestData:{asset:e},id:t})=>{await P((0,p.resolvePendingApproval)(t,null)),j({event:f.MetaMetricsEventName.NftAdded,category:f.MetaMetricsEventCategory.Wallet,sensitiveProperties:{token_contract_address:e.address,token_symbol:e.symbol,token_id:e.tokenId,token_standard:e.standard,asset_type:h.AssetType.NFT,source:f.MetaMetricsTokenEventSource.Dapp}})}))),D.push(N)}),[P,D,j,N,O]),X=(0,s.useCallback)((async()=>{await Promise.all(O.map((async({id:e})=>P((0,p.rejectPendingApproval)(e,(0,o.serializeError)(o.providerErrors.userRejectedRequest())))))),D.push(N)}),[P,D,N,O]);let Z,ee;if((0,s.useEffect)((()=>{O.length||D.push(N)}),[D,N,O]),O.length)try{const e=new URL(O[0].origin);Z=e.host,ee=e.href}catch{Z="dapp"}return(0,s.useEffect)((()=>{(async()=>{const e=await Promise.all(O.map((async e=>{const t=await(0,v.getAssetImageURL)(e.requestData.asset.image,F);return{...e,requestData:{...e.requestData,asset:{...e.requestData.asset,assetImageUrl:t}}}})));H(e)})()}),[]),s.default.createElement(g.Box,{height:b.BlockSize.Full,width:b.BlockSize.Full,display:b.Display.Flex,flexDirection:b.FlexDirection.Column},s.default.createElement(M.Nav,{confirmationId:J}),s.default.createElement(g.Box,{paddingBottom:2,className:"confirm-add-suggested-nft__header"},s.default.createElement(S.default,{accountName:U,accountBalance:Q,accountAddress:$,networkName:V,chainId:R}),s.default.createElement(g.Box,{paddingTop:4,paddingRight:4,paddingLeft:4,display:b.Display.Flex,justifyContent:b.JustifyContent.center},s.default.createElement(w.default,{chip:!0,siteOrigin:K.origin,title:K.origin,iconSrc:K.iconUrl,iconName:K.hostname})),s.default.createElement(g.Text,{variant:b.TextVariant.headingLg,textAlign:b.TextAlign.Center,margin:2},n("addSuggestedNFTs")),s.default.createElement(g.Text,{variant:b.TextVariant.bodyMd,textAlign:b.TextAlign.Center},n("wantsToAddThisAsset",["dapp"===Z?s.default.createElement(g.Text,{key:Z,variant:b.TextVariant.bodyMd,fontWeight:"bold"},Z):s.default.createElement(g.ButtonLink,{key:Z,size:g.BUTTON_SIZES.INHERIT,href:ee,target:"_blank"},Z)]))),s.default.createElement(g.Box,{className:"confirm-add-suggested-nft__content"},s.default.createElement(g.Box,{className:"confirm-add-suggested-nft__card",padding:2,borderRadius:b.BorderRadius.MD},s.default.createElement(g.Box,{className:(0,l.default)({"confirm-add-suggested-nft__nft-list":O.length>1})},O.map((({id:e,requestData:{asset:{address:t,tokenId:n,symbol:r,name:a}}})=>{const l=W.find((e=>e.requestData.asset.tokenId===n&&(0,_.isEqualCaseInsensitive)(e.requestData.asset.address,t))),u=l?l.requestData.asset.assetImageUrl:"",c=(0,i.getTokenTrackerLink)(t,R,null,null,{blockExplorerUrl:(null==B?void 0:B.blockExplorerUrl)??null});return 1===O.length?s.default.createElement(g.Box,{className:"confirm-add-suggested-nft__nft-single",key:`confirm-add-suggested-nft__nft-single-${e}`,borderRadius:b.BorderRadius.MD,margin:0,padding:0},u?s.default.createElement("img",{className:"confirm-add-suggested-nft__nft-single-image",src:u,alt:a||n}):s.default.createElement(T.default,{className:"confirm-add-suggested-nft__nft-single-image-default",tokenId:n,name:a||r||(0,v.shortenAddress)(t)}),s.default.createElement(g.Box,{padding:1,display:b.Display.Flex,flexDirection:b.FlexDirection.Row,justifyContent:b.JustifyContent.spaceBetween,alignItems:b.AlignItems.Center},s.default.createElement(g.Box,{display:b.Display.Flex,flexDirection:b.FlexDirection.Column,justifyContent:b.JustifyContent.spaceEvenly,flexWrap:b.FlexWrap.NoWrap,width:b.BlockSize.Full,className:"confirm-add-suggested-nft__nft-single-sub-details"},B.blockExplorerUrl?s.default.createElement(g.ButtonLink,{className:"confirm-add-suggested-nft__nft-name",href:c,title:t,target:"_blank",size:g.BUTTON_SIZES.INHERIT},a||r||(0,v.shortenAddress)(t)):s.default.createElement(g.Text,{variant:b.TextVariant.bodyMd,className:"confirm-add-suggested-nft__nft-name",title:t},a||r||(0,v.shortenAddress)(t)),s.default.createElement(g.Text,{variant:b.TextVariant.bodyMd,color:b.TextColor.textAlternative,className:"confirm-add-suggested-nft__nft-tokenId"},"#",n)))):s.default.createElement(g.Box,{display:b.Display.Flex,flexDirection:b.FlexDirection.Row,flexWrap:b.FlexWrap.NoWrap,alignItems:b.AlignItems.Center,justifyContent:b.JustifyContent.spaceBetween,marginBottom:4,className:"confirm-add-suggested-nft__nft-list-item",key:`${t}-${n}`},s.default.createElement(g.Box,{display:b.Display.Flex,flexDirection:b.FlexDirection.Row,flexWrap:b.FlexWrap.NoWrap,alignItems:b.AlignItems.Center,justifyContent:b.JustifyContent.spaceBetween},u?s.default.createElement("img",{className:"confirm-add-suggested-nft__nft-image",src:u,alt:a||n}):s.default.createElement(T.default,{className:"confirm-add-suggested-nft__nft-image-default"}),s.default.createElement(g.Box,{display:b.Display.Flex,flexDirection:b.FlexDirection.Column,justifyContent:b.JustifyContent.spaceEvenly,flexWrap:b.FlexWrap.NoWrap,width:b.BlockSize.Full,className:"confirm-add-suggested-nft__nft-sub-details"},B.blockExplorerUrl?s.default.createElement(g.ButtonLink,{className:"confirm-add-suggested-nft__nft-name",href:c,title:t,target:"_blank",size:g.BUTTON_SIZES.INHERIT},a||r||(0,v.shortenAddress)(t)):s.default.createElement(g.Text,{variant:b.TextVariant.bodySm,className:"confirm-add-suggested-nft__nft-name",title:t},a||r||(0,v.shortenAddress)(t)),s.default.createElement(g.Text,{variant:b.TextVariant.bodySm,color:b.TextColor.textAlternative,className:"confirm-add-suggested-nft__nft-tokenId"},"#",n))),s.default.createElement(g.ButtonIcon,{className:"confirm-add-suggested-nft__nft-remove","data-testid":`confirm-add-suggested-nft__nft-remove-${e}`,iconName:g.IconName.Close,size:g.ButtonIconSize.Sm,color:b.IconColor.iconMuted,onClick:t=>{t.preventDefault(),t.stopPropagation(),P((0,p.rejectPendingApproval)(e,(0,o.serializeError)(o.providerErrors.userRejectedRequest())))}}))}))))),s.default.createElement(u.PageContainerFooter,{cancelText:n("cancel"),submitText:1===O.length?n("addNft"):n("addNfts"),onCancel:X,onSubmit:Y}))}}}},{package:"$root$",file:"ui/pages/confirm-add-suggested-nft/confirm-add-suggested-nft.js"}],[6865,{"./confirm-add-suggested-nft":6864},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var s,r=(s=e("./confirm-add-suggested-nft"))&&s.__esModule?s:{default:s}}}},{package:"$root$",file:"ui/pages/confirm-add-suggested-nft/index.js"}]],[],{});